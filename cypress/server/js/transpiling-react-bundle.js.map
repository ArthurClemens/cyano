{"version":3,"file":"transpiling-react-bundle.js","sources":["../../../dist/react/cyano.mjs","../components/counter.js","transpiling-react.js","../components/counter-custom-hooks.js"],"sourcesContent":["import react from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\n/* eslint-disable complexity, max-statements */\n\nvar classIdSplit = /([\\.#]?[a-zA-Z0-9_:-]+)/;\nvar notClassId = /^\\.|#/;\nvar parseTag_1 = parseTag;\n\nfunction parseTag(tag, props) {\n  if (!tag) {\n    return 'div';\n  }\n\n  var noId = !('id' in props);\n  var tagParts = tag.split(classIdSplit);\n  var tagName = null;\n\n  if (notClassId.test(tagParts[1])) {\n    tagName = 'div';\n  }\n\n  var classes;\n  var part;\n  var type;\n  var i;\n\n  for (i = 0; i < tagParts.length; i++) {\n    part = tagParts[i];\n\n    if (!part) {\n      continue;\n    }\n\n    type = part.charAt(0);\n\n    if (!tagName) {\n      tagName = part;\n    } else if (type === '.') {\n      classes = classes || [];\n      classes.push(part.substring(1, part.length));\n    } else if (type === '#' && noId) {\n      props.id = part.substring(1, part.length);\n    }\n  }\n\n  if (classes) {\n    if (props.className) {\n      classes.push(props.className);\n    }\n\n    props.className = classes.join(' ');\n  }\n\n  return tagName ? tagName.toLowerCase() : 'div';\n}\n\nvar reactHyperscript = h;\n\nfunction h(componentOrTag, properties, children) {\n  // if only one argument which is an array, wrap items with React.Fragment\n  if (arguments.length === 1 && Array.isArray(componentOrTag)) {\n    return h(react.Fragment, null, componentOrTag);\n  } else if (!children && isChildren(properties)) {\n    // If a child array or text node are passed as the second argument, shift them\n    children = properties;\n    properties = {};\n  } else if (arguments.length === 2) {\n    // If no children were passed, we don't want to pass \"undefined\"\n    // and potentially overwrite the `children` prop\n    children = [];\n  }\n\n  properties = properties ? Object.assign({}, properties) : {}; // Supported nested dataset attributes\n\n  if (properties.dataset) {\n    Object.keys(properties.dataset).forEach(function unnest(attrName) {\n      var dashedAttr = attrName.replace(/([a-z])([A-Z])/, function dash(match) {\n        return match[0] + '-' + match[1].toLowerCase();\n      });\n      properties['data-' + dashedAttr] = properties.dataset[attrName];\n    });\n    properties.dataset = undefined;\n  } // Support nested attributes\n\n\n  if (properties.attributes) {\n    Object.keys(properties.attributes).forEach(function unnest(attrName) {\n      properties[attrName] = properties.attributes[attrName];\n    });\n    properties.attributes = undefined;\n  } // When a selector, parse the tag name and fill out the properties object\n\n\n  if (typeof componentOrTag === 'string') {\n    componentOrTag = parseTag_1(componentOrTag, properties);\n  } // Create the element\n\n\n  var args = [componentOrTag, properties].concat(children);\n  return react.createElement.apply(react, args);\n}\n\nfunction isChildren(x) {\n  return typeof x === 'string' || typeof x === 'number' || Array.isArray(x);\n}\n\nconst htmlAttributes = {\n  autocomplete: \"autoComplete\",\n  autofocus: \"autoFocus\",\n  class: \"className\",\n  className: \"className\",\n  enctype: \"encType\",\n  formaction: \"formAction\",\n  frameborder: \"frameBorder\",\n  maxlength: \"maxLength\",\n  minlength: \"minLength\",\n  onblur: \"onBlur\",\n  onchange: \"onChange\",\n  onclick: \"onClick\",\n  onfocus: \"onFocus\",\n  oninput: \"onInput\",\n  onkeydown: \"onKeyDown\",\n  onkeyup: \"onKeyUp\",\n  onmousedown: \"onMouseDown\",\n  onmouseout: \"onMouseOut\",\n  onmouseover: \"onMouseOver\",\n  onmouseup: \"onMouseUp\",\n  onscroll: \"onScroll\",\n  onsubmit: \"onSubmit\",\n  ontouchend: \"onTouchEnd\",\n  ontouchmove: \"onTouchMove\",\n  ontouchstart: \"onTouchStart\",\n  readonly: \"readOnly\",\n  tabindex: \"tabIndex\"\n};\nconst createComponent = function createComponent(component, customHooksFn) {\n  for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    rest[_key - 2] = arguments[_key];\n  }\n\n  return function () {\n    let props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const supportedHooks = {\n      useState: React.useState,\n      useEffect: React.useEffect,\n      useLayoutEffect: React.useLayoutEffect,\n      useReducer: React.useReducer,\n      useRef: React.useRef,\n      useMemo: React.useMemo,\n      useCallback: React.useCallback\n    };\n    const customHooks = customHooksFn !== undefined && customHooksFn !== null ? customHooksFn(supportedHooks) : {};\n    return component(_objectSpread({\n      renderer: reactHyperscript,\n      htmlAttributes\n    }, supportedHooks, customHooks, rest, props));\n  };\n};\n\nexport { createComponent };\n","const Counter = ({ initialCount, useState, useCounter, renderer: h, htmlAttributes: attr }) => {\n  const [count, setCount] = useState(initialCount);\n  const [counters, addCounter, removeCounter] = useCounter();\n  return (\n    h(\"div\",\n      null,\n      [\n        h(\"div\",\n          {\n            key: \"count\",\n          },\n          h(\"span\",\n            {\n              \"data-test-id\": \"count\"\n            },\n            count\n          )\n        ),\n        h(\"button\",\n          {\n            disabled: count < 1,\n            [attr.onclick]: () => setCount(count - 1),\n            key: \"counter-button\",\n            \"data-test-id\": \"decrement\",\n          },\n          \"Less\"\n        ),\n        h(\"button\",\n          {\n            [attr.onclick]: () => setCount(count + 1),\n            key: \"counter-button\",\n            \"data-test-id\": \"increment\",\n          },\n          \"More\"\n        ),\n        h(\"div\",\n          {\n            key: \"counters\",\n            \"data-test-id\": \"counters\",\n          },\n          h(\"span\", null, counters.length)\n        ),\n        h(\"button\",\n          {\n            disabled: counters < 1,\n            key: \"decrement-counters-button\",\n            \"data-test-id\": \"decrement-counters\",\n            [attr.onclick]: () => {\n              const lastCounter = counters[counters.length - 1];\n              removeCounter(lastCounter);\n            }\n          },\n          \"Remove counter\"\n        ),\n        h(\"button\",\n          {\n            key: \"increment-counters-button\",\n            \"data-test-id\": \"increment-counters\",\n            [attr.onclick]: () => addCounter()\n          },\n          \"Add counter\"\n        ),\n      ]\n    )\n  );\n};\n\nexport { Counter };\n\n","import React from \"react\";\nimport { createComponent } from \"../../../dist/react/cyano.mjs\";\nimport { Counter } from \"../components/counter\";\nimport { customHooks } from \"../components/counter-custom-hooks\";\n\nconst ReactCounter = createComponent(Counter, customHooks);\n\nconst App = () => \n  <ReactCounter initialCount={0} />;\n\nReactDOM.render(\n  <App />,\n  document.getElementById(\"root\")\n);\n","const customHooks = ({ useState }) => {\n  // Use a name to access it from hook functions\n  const hooks = {\n    useCounter: () => {\n      // A custom hook that uses another custom hook.\n      const createNewCounter = () => ({\n        id: new Date().getTime(),\n        initialCount: Math.round(Math.random() * 10)\n      });\n      const firstCounter = createNewCounter();\n      const [counters, addCounter, removeCounter] = hooks.useArray([firstCounter]);\n      return [\n        counters,\n        () => addCounter(createNewCounter()),\n        remove => removeCounter(remove)\n      ];\n    },\n    useArray: (initialValue = []) => {\n      const [arr, setArr] = useState(initialValue);\n      return [\n        arr,\n        add => setArr(arr.concat(add)),\n        remove => setArr(arr.filter(item => item !== remove))\n      ];\n    },\n  };\n  return hooks;\n};\n\nexport { customHooks };\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","classIdSplit","notClassId","parseTag_1","tag","props","classes","part","type","i","noId","tagParts","split","tagName","test","length","charAt","push","substring","id","className","join","toLowerCase","reactHyperscript","h","componentOrTag","properties","children","arguments","Array","isArray","react","Fragment","x","assign","dataset","keys","forEach","attrName","dashedAttr","replace","match","undefined","attributes","args","concat","createElement","apply","htmlAttributes","autocomplete","autofocus","class","enctype","formaction","frameborder","maxlength","minlength","onblur","onchange","onclick","onfocus","oninput","onkeydown","onkeyup","onmousedown","onmouseout","onmouseover","onmouseup","onscroll","onsubmit","ontouchend","ontouchmove","ontouchstart","readonly","tabindex","ReactCounter","component","customHooksFn","_len","rest","_key","supportedHooks","useState","React","useEffect","useLayoutEffect","useReducer","useRef","useMemo","useCallback","customHooks","target","source","ownKeys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","_objectSpread","renderer","createComponent","initialCount","useCounter","attr","count","setCount","counters","addCounter","removeCounter","disabled","lastCounter","hooks","createNewCounter","Date","getTime","Math","round","random","firstCounter","useArray","remove","initialValue","arr","setArr","add","item","ReactDOM","render","document","getElementById"],"mappings":"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"}