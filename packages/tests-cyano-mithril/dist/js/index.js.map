{"version":3,"sources":["webpack:///../node_modules/mithril/mithril.js","webpack:///../tests-cyano-shared/node_modules/symbol-observable/es/index.js","webpack:///../tests-cyano-shared/node_modules/symbol-observable/es/ponyfill.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/harmony module decorator","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///../cyano-mithril/dist/cyano-mithril.mjs","webpack:///../tests-cyano-shared/app/AppLayout.js","webpack:///../tests-cyano-shared/app/Layout.js","webpack:///../tests-cyano-shared/app/Navigation.js","webpack:///../tests-cyano-shared/examples/toggle.js","webpack:///../tests-cyano-shared/examples/custom-hooks-reducer.js","webpack:///../tests-cyano-shared/examples/chat/friends-data.js","webpack:///../tests-cyano-shared/examples/chat/chat-api.js","webpack:///../tests-cyano-shared/examples/chat/FriendStatus.js","webpack:///../tests-cyano-shared/examples/chat/custom-hooks.js","webpack:///../tests-cyano-shared/examples/chat/ChatRecipientPicker.js","webpack:///../tests-cyano-shared/examples/chat/Friend.js","webpack:///../tests-cyano-shared/examples/chat/index.js","webpack:///../tests-cyano-shared/cypress-tests/custom-hooks.js","webpack:///../tests-cyano-shared/cypress-tests/trust.js","webpack:///../tests-cyano-shared/cypress-tests/children.js","webpack:///../tests-cyano-shared/cypress-tests/initial-props.js","webpack:///../tests-cyano-shared/cypress-tests/toggle-jsx.js","webpack:///../tests-cyano-shared/cypress-tests/getRef.js","webpack:///../tests-cyano-shared/cypress-tests/forwardRef.js","webpack:///../tests-cyano-shared/cypress-tests/Fragment.js","webpack:///../tests-cyano-shared/app/routes.js","webpack:///../tests-cyano-shared/node_modules/tslib/tslib.es6.js","webpack:///../tests-cyano-shared/node_modules/search-params/dist/search-params.esm.js","webpack:///../tests-cyano-shared/node_modules/path-parser/dist/path-parser.esm.js","webpack:///../tests-cyano-shared/node_modules/route-node/dist/route-node.esm.js","webpack:///../tests-cyano-shared/node_modules/router5-transition-path/dist/index.es.js","webpack:///../tests-cyano-shared/node_modules/router5/dist/index.es.js","webpack:///../tests-cyano-shared/node_modules/router5-plugin-browser/dist/index.es.js","webpack:///../tests-cyano-shared/app/router.js","webpack:///./index.js","webpack:///../tests-cyano-shared/app/createApp.js"],"names":["Vnode","tag","key","attrs0","children0","text","dom","attrs","children","domSize","undefined","state","events","instance","normalize","node","Array","isArray","normalizeChildren","String","input","length","isKeyed","i","TypeError","hyperscriptVnode","children1","attrs1","arguments","this","start","push","selectorParser","selectorCache","hasOwn","hasOwnProperty","isEmpty","object","call","compileSelector","selector","match","classes","exec","type","value","id","attrValue","replace","className","join","execSelector","vnode","hasClass","class","newAttrs","hyperscript","view","Error","apply","trust","html","fragment","vnode2","PromisePolyfill","executor","self","resolvers","rejectors","resolveCurrent","handler","rejectCurrent","_instance","callAsync","setImmediate","setTimeout","list","shouldAbsorb","execute","then","console","error","retry","executeOnce","bind","e","runs","run","fn","onerror","prototype","onFulfilled","onRejection","resolveNext","rejectNext","handle","callback","next","promise","resolve","reject","catch","finally","reason","all","total","count","values","consume","race","window","Promise","g","render","$window","currentRedraw","$doc","document","nameSpace","svg","math","getNameSpace","vnode3","xmlns","checkState","original","callHook","activeElement","createNodes","parent","vnodes","end","hooks","nextSibling","ns","createNode","initLifecycle","createTextNode","insertNode","createText","createHTML","createDocumentFragment","children3","firstChild","childNodes","createFragment","attrs2","is","element","createElementNS","createElement","setAttr","setAttrs","maybeSetContentEditable","textContent","selectedIndex","normalized","setLateSelectAttrs","sentinel","Object","create","$$reentrantLock$$","initComponent","createComponent","possibleParents","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","match0","temp","innerHTML","child","appendChild","updateNodes","old","removeNodes","isOldKeyed","isKeyed0","oldStart","o","v","oe","ve","topSibling","oldEnd","updateNode","getNextSibling","moveNodes","map","lisIndices","originalNextSibling","vnodesLength","oldIndices","li","pos","matched","getKeyMap","oldIndex","a","result","u","il","lisTemp","j","c","makeLisIndices","commonLength","removeNode","oldTag","force","onbeforeupdate","shouldNotUpdate","updateLifecycle","toString","nodeValue","updateText","removeHTML","updateHTML","updateFragment","val","removeAttr","updateAttrs","updateElement","updateComponent","frag","moveChildToFrag","parentNode","insertBefore","contenteditable","contentEditable","content","stateResult","attrsResult","mask","onbeforeremove","reallyRemove","onremove","removeChild","isLifecycleMethod","attr","isFormAttribute","updateEvent","slice","setAttributeNS","updateStyle","hasPropertyKey","setAttribute","removeAttribute","nsLastIndex","indexOf","uppercaseRegex","toLowerCase","capital","normalizeKey","style","cssText","setProperty","removeProperty","EventDict","_","removeEventListener","addEventListener","source","oninit","oncreate","onupdate","handleEvent","ev","handler0","currentTarget","redraw","preventDefault","stopPropagation","active","namespace","namespaceURI","prevRedraw","focus","_12","mountRedraw0","render0","schedule","subscriptions","rendering","pending","sync","mount","root","component","index","splice","_15","requestAnimationFrame","buildQueryString","args","key2","destructure","value1","encodeURIComponent","assign","target","keys","forEach","key3","buildPathname","template","params","test","SyntaxError","queryIndex","hashIndex","queryEnd","pathEnd","path","query","resolved","m2","key1","variadic","newQueryIndex","newHashIndex","newQueryEnd","newPathEnd","result0","querystring","request","oncompletion","callbackCount","PromiseProxy","makeRequest","factory","url","promise1","data","background","complete","wrap","then1","constructor","next0","hasHeader","name","key0","headers","__proto__","replacedAbort","method","toUpperCase","body","assumeJSON","serialize","JSON","FormData","responseType","extract","xhr","XMLHttpRequest","aborted","original0","abort","open","async","user","password","setRequestHeader","deserialize","withCredentials","timeout","onreadystatechange","readyState","message","success","status","response","parse","responseText","code","config","send","stringify","jsonp","callbackName","Math","round","random","script","src","callbackKey","documentElement","_18","mountRedraw","m","m3","parseQueryString","string","charAt","entries","split","counters","data0","entry","key5","decodeURIComponent","value2","levels","cursor","pop","j0","level","nextLevel","isNumber","isNaN","parseInt","desc","getOwnPropertyDescriptor","parsePathname","queryIndex0","hashIndex0","queryEnd0","pathEnd0","path1","sentinel0","route","mountRedraw00","fireAsync","setPath","path0","options","title","history","replaceState","prefix","pushState","location","href","attrs3","currentPath","lastUpdate","currentResolver","SKIP","defaultRoute","routes","onremove0","compiled","check","templateData","templateKeys","regexp","RegExp","m4","key6","extra","k","r","data1","callAsync0","p","scheduled","defaultData","some","ReferenceError","resolveRoute","hash","search","pathname","concat","fail","loop","payload","matchedRoute","localComp","update","comp","onmatch","vnode5","set","get","Link","onclick","child0","disabled","Boolean","result1","defaultPrevented","button","which","ctrlKey","metaKey","shiftKey","altKey","param","key4","_25","module","Symbol","observable","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","loaded","__webpack_modules__","n","getter","__esModule","d","definition","defineProperty","enumerable","globalThis","Function","hmd","obj","prop","currentState","_defineProperty","configurable","writable","_extends","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","_objectSpread2","getOwnPropertyDescriptors","defineProperties","_slicedToArray","arr","_arrayWithHoles","iterator","_arr","_n","_d","_e","_s","_i","done","err","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","minLen","len","arr2","scheduleRender","updateDeps","deps","depsIndex","prevDeps","depsStates","shouldRecompute","every","x","setup","effect","isAsync","runCallbackFn","teardown","teardowns","updates","updateState","initialState","newValueFn","statesIndex","states","previousValue","newValue","useState","useEffect","useRef","initialValue","current","accept","acceptcharset","accesskey","action","allowfullscreen","allowtransparency","alt","autocomplete","autofocus","autoplay","capture","cellpadding","cellspacing","challenge","charset","checked","classid","classname","colspan","cols","contextmenu","controls","coords","crossorigin","datetime","defer","dir","download","draggable","enctype","form","formaction","formenctype","formmethod","formnovalidate","formtarget","frameborder","height","hidden","high","hreflang","htmlfor","httpequiv","icon","inputmode","integrity","keyparams","keytype","kind","label","lang","low","manifest","marginheight","marginwidth","max","maxlength","media","mediagroup","min","minlength","multiple","muted","novalidate","nonce","onblur","onchange","onfocus","oninput","onkeydown","onkeyup","onmousedown","onmouseout","onmouseover","onmouseup","onscroll","onsubmit","ontouchend","ontouchmove","ontouchstart","optimum","pattern","placeholder","poster","preload","radiogroup","readonly","rel","required","reversed","role","rowspan","rows","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","spellcheck","srcdoc","srclang","srcset","step","summary","tabindex","usemap","width","wmode","h","wrapper","displayName","jsx","getRef","cast","renderFunction","initialAttrs","prevState","cleanups","Map","Layout","Navigation","router","examples","tests","navigation","parts","navigate","MenuList","links","link","clicked","setClicked","useArray","setArr","add","remove","item","counterReducer","Counter","reducer","initFn","initValue","initialCount","removeCounter","_updateState2","setValue","getValueDispatch","countState","dispatch","inited","setInited","domRef","removeOnTransitionEnd","classList","createNewCounter","Date","getTime","firstCounter","addCounter","useCounter","avatar","friendsData","isOnline","api","friendId","handleStatusChange","friend","log","delay","setIsOnline","useFriendStatus","recipientId","setRecipientId","FriendStatus","hasChatApi","backgroundImage","setHasChatApi","ChatRecipientPicker","Friend","setCount","useCount","increment","decrement","lastItem","reverse","Children","InitialProps","defaultTitle","Toggle","forceRerender","shouldRerender","Input","props","domElement","setDomElement","ref","getAttribute","toLinkData","__assign","t","s","makeOptions","opts","arrayFormat","booleanFormat","nullFormat","encodeValue","decodeValue","encode","encodeNull","encodeBoolean","encodeName","getNameEncoder","encodeArray","getSearch","parseName","bracketPosition","hasBrackets","reduce","_a","rawName","_b","currentValue","decodedValue","decode","build","paramName","excludeSubDelimiters","encodeURIComponentExcludingSubDelims","segment","encodingMethods","uri","encodeURI","uriComponent","none","legacy","decodingMethods","decodeURI","encodeParam","encoding","isSpatParam","encoder","defaultOrConstrained","rules","regex","tokenise","str","tokens","rule","otherVal","substr","exists","defaultOptions","urlParamsEncoding","Path","hasUrlParams","hasSpatParam","hasMatrixParams","hasQueryParams","spatParams","getParams","urlParams","queryParams","createPath","isQueryParam","_this","caseSensitive","strictTrailingSlash","optTrailingSlash","urlTest","partialTest","delimited","delimiter","upToDelimiter","existingVal","appendQueryParam","ignoreConstraints","ignoreSearch","encodedUrlParams","acc","missingParameters","base","searchParams","sparams","searchPart","predicate","getMetaFromSegments","segments","accName","meta","_c","parser","allParams","matchChildren","nodes","pathSegment","currentMatch","consumedBefore","queryParamsMode","strongMatching","isRoot","_loop_1","remainingPath","consumedPath","paramsToOmit","removedParams","chunk","left","right","kept","removed","omit","getPath","remainingQueryParams_1","getNonAbsoluteChildren","nodes_1","state_1","sortPredicate","originalChildren","_f","leftPath","rightPath","leftSegments","rightSegments","leftParamsCount","rightParamsCount","leftParamLength","rightParamLength","RouteNode","childRoutes","absolute","checkParents","onAdd","finalSort","sort","sortDescendants","getParentSegments","setParent","cb","addRouteNode","routeNode","fullName","addNode","routeName","segmentsByName","getSegmentsByName","sortChildren","buildPath","trailingSlashMode","nonSearchParams","segments_1","extraParams","searchParamsObject","segmentPath","finalPath","buildPathFromSegments","buildState","matchPath","getSegmentsMatchingPath","matchedSegments","firstSegmentParams","lastSegmentSlashChild","findSlashChild","buildStateFromMatch","names","hasParentsParams","findAbsoluteChildren","absoluteChildren","filteredRoutes","findSegmentByName","startingNodes","finalMatch","nameToIDs","ids","hasMetaParams","extractSegmentParams","transitionPath","toState","fromState","toStateOptions","fromStateIds","toStateIds","maxI","reload","leftParams","rightParams","pointOfDifference","toDeactivate","toActivate","intersection","autoCleanUp","allowNotFound","rewritePathOnMatch","errorCodes","constants","withState","stateId","routerState","getState","setState","makeState","forceId","defaultParams","makeNotFoundState","areStatesEqual","state1","state2","ignoreQueryParams","getUrlParams","rootNode","state1Params","state2Params","areStatesDescendants","parentState","childState","forwardState","routeParams","forwardMap","eventsMap","onStart","onStop","onTransitionSuccess","onTransitionStart","onTransitionError","onTransitionCancel","withPlugins","routerPlugins","startPlugin","plugin","appliedPlugin","executeFactory","removeEventListeners","methodName","removeListener","getPlugins","usePlugin","plugins","removePluginFns","removePlugin","withMiddleware","middlewareFactories","middlewareFunctions","useMiddleware","middlewares","middleware","middlewareFunction","clearMiddleware","getMiddlewareFactories","getMiddlewareFunctions","withObservability","callbacks","subscribe","listener","isObject","finalListener","unsubscribeHandler","previousRoute","unsubscribe","observer","invokeEventListeners","eventName","_cb","functions","isCancelled","errorKey","remainingFunctions","isState","processFn","stepFn","errBase","_done","newState","hasStateChanged","mergeStates","res","resVal","stack","promiseError","isMapped","noop","withNavigation","cancelCurrentTransition","lastArg","isStarted","sameStates","skipTransition","transitionToState","redirect","redirected","navigateToDefault","getOptions","cancel","cancelled","completed","getLifecycleFunctions","canDeactivateFunctions","canActivateFunctions","makeError","isUnknownRoute","asyncBase","canDeactivate","forceDeactivate","fnMap","canActivate","activeSegments_1","clearCanDeactivate","transition","noop$1","withRouterLifecycle","started","startPath","startState","startPathOrState","invokeErrCb","navigateToDefault_1","redirect_1","stop","toFunction","withRouteLifecycle","canDeactivateFactories","canActivateFactories","getLifecycleFactories","canDeactivateHandler","canActivateHandler","createRouter","dependencies","fns","arg","prev","pipe","routerOptions","setOption","option","withOptions","routerDependencies","setDependency","dependencyName","dependency","setDependencies","getDependencies","getInjectables","factoryFunction","withDependencies","forward","fromRoute","toRoute","onRouteAdded","forwardTo","decodeParams","decoders","encodeParams","encoders","isActive","strictEquality","activeState","paramsWithDefault","encodedParams","name_1","decodedParams","builtPath","setRootPath","rootPath","withRoutes","jl","isBrowser","safelyEncodePath","safeBrowser","getBase","addPopstateListener","shouldAddHashChangeListener","useHash","navigator","userAgent","getLocation","hashPrefix","getHash","mergeState","preserveHash","browser","removePopStateListener","transitionOptions","routerStart","buildUrl","updateBrowserState","trimmedState","finalState","onPopState","evt","matchUrl","pathParts","urlToPath","replaceHistoryState","lastKnownState","historyState","hasState","statesAreEqual","setContent","mountNode","querySelector","AppLayout","CustomHooksUseReducer","Chat","CustomHooks","GetRef","Trust","ForwardRef","ToggleJSX","Fragment","browserPlugin","routeData","find","setupRouter"],"mappings":";4BAAE,WACF,aACA,SAASA,EAAMC,EAAKC,EAAKC,EAAQC,EAAWC,EAAMC,GACjD,MAAO,CAACL,IAAKA,EAAKC,IAAKA,EAAKK,MAAOJ,EAAQK,SAAUJ,EAAWC,KAAMA,EAAMC,IAAKA,EAAKG,aAASC,EAAWC,WAAOD,EAAWE,YAAQF,EAAWG,cAAUH,GAE1JV,EAAMc,UAAY,SAASC,GAC1B,OAAIC,MAAMC,QAAQF,GAAcf,EAAM,SAAKU,OAAWA,EAAWV,EAAMkB,kBAAkBH,QAAOL,OAAWA,GAC/F,MAARK,GAAgC,kBAATA,EAA2B,KAClC,iBAATA,EAA0BA,EAC9Bf,EAAM,SAAKU,OAAWA,EAAWS,OAAOJ,QAAOL,OAAWA,IAElEV,EAAMkB,kBAAoB,SAASE,GAClC,IAAIhB,EAAY,GAChB,GAAIgB,EAAMC,OAAQ,CAKjB,IAJA,IAAIC,EAAsB,MAAZF,EAAM,IAA8B,MAAhBA,EAAM,GAAGlB,IAIlCqB,EAAI,EAAGA,EAAIH,EAAMC,OAAQE,IACjC,IAAiB,MAAZH,EAAMG,IAA8B,MAAhBH,EAAMG,GAAGrB,OAAiBoB,EAClD,MAAM,IAAIE,UAAU,2DAGtB,IAASD,EAAI,EAAGA,EAAIH,EAAMC,OAAQE,IACjCnB,EAAUmB,GAAKvB,EAAMc,UAAUM,EAAMG,IAGvC,OAAOnB,GA+BR,IAAIqB,EAAmB,WACtB,IAAgDC,EAA5CC,EAASC,UAAUC,MAAOC,EAAQD,KAAO,EAO7C,GANc,MAAVF,EACHA,EAAS,IACmB,iBAAXA,GAAqC,MAAdA,EAAO1B,KAAee,MAAMC,QAAQU,MAC5EA,EAAS,GACTG,EAAQD,MAELD,UAAUP,SAAWS,EAAQ,EAChCJ,EAAYE,UAAUE,GACjBd,MAAMC,QAAQS,KAAYA,EAAY,CAACA,SAG5C,IADAA,EAAY,GACLI,EAAQF,UAAUP,QAAQK,EAAUK,KAAKH,UAAUE,MAE3D,OAAO9B,EAAM,GAAI2B,EAAOzB,IAAKyB,EAAQD,IAElCM,EAAiB,+EACjBC,EAAgB,GAChBC,EAAS,GAAGC,eAChB,SAASC,EAAQC,GAChB,IAAK,IAAInC,KAAOmC,EAAQ,GAAIH,EAAOI,KAAKD,EAAQnC,GAAM,OAAO,EAC7D,OAAO,EAER,SAASqC,EAAgBC,GAExB,IADA,IAAIC,EAAOxC,EAAM,MAAOyC,EAAU,GAAInC,EAAQ,GACvCkC,EAAQT,EAAeW,KAAKH,IAAW,CAC7C,IAAII,EAAOH,EAAM,GAAII,EAAQJ,EAAM,GACnC,GAAa,KAATG,GAAyB,KAAVC,EAAc5C,EAAM4C,OAClC,GAAa,MAATD,EAAcrC,EAAMuC,GAAKD,OAC7B,GAAa,MAATD,EAAcF,EAAQX,KAAKc,QAC/B,GAAoB,MAAhBJ,EAAM,GAAG,GAAY,CAC7B,IAAIM,EAAYN,EAAM,GAClBM,IAAWA,EAAYA,EAAUC,QAAQ,YAAa,MAAMA,QAAQ,QAAS,OAChE,UAAbP,EAAM,GAAgBC,EAAQX,KAAKgB,GAClCxC,EAAMkC,EAAM,IAAoB,KAAdM,EAAmBA,EAAYA,IAAa,GAIrE,OADIL,EAAQrB,OAAS,IAAGd,EAAM0C,UAAYP,EAAQQ,KAAK,MAChDjB,EAAcO,GAAY,CAACvC,IAAKA,EAAKM,MAAOA,GAEpD,SAAS4C,EAAaxC,EAAOyC,GAC5B,IAAI7C,EAAQ6C,EAAM7C,MACdC,EAAWR,EAAMkB,kBAAkBkC,EAAM5C,UACzC6C,EAAWnB,EAAOI,KAAK/B,EAAO,SAC9B0C,EAAYI,EAAW9C,EAAM+C,MAAQ/C,EAAM0C,UAI/C,GAHAG,EAAMnD,IAAMU,EAAMV,IAClBmD,EAAM7C,MAAQ,KACd6C,EAAM5C,cAAWE,GACZ0B,EAAQzB,EAAMJ,SAAW6B,EAAQ7B,GAAQ,CAC7C,IAAIgD,EAAW,GACf,IAAK,IAAIrD,KAAOK,EACX2B,EAAOI,KAAK/B,EAAOL,KAAMqD,EAASrD,GAAOK,EAAML,IAEpDK,EAAQgD,EAET,IAAK,IAAIrD,KAAOS,EAAMJ,MACjB2B,EAAOI,KAAK3B,EAAMJ,MAAOL,IAAgB,cAARA,IAAwBgC,EAAOI,KAAK/B,EAAOL,KAC/EK,EAAML,GAAOS,EAAMJ,MAAML,IAY3B,IAAK,IAAIA,KATQ,MAAb+C,GAA8C,MAAzBtC,EAAMJ,MAAM0C,YAAmB1C,EAAM0C,UAChD,MAAbA,EAC4B,MAAzBtC,EAAMJ,MAAM0C,UACX9B,OAAOR,EAAMJ,MAAM0C,WAAa,IAAM9B,OAAO8B,GAC7CA,EACwB,MAAzBtC,EAAMJ,MAAM0C,UACXtC,EAAMJ,MAAM0C,UACZ,MACDI,IAAU9C,EAAM+C,MAAQ,MACZ/C,EACf,GAAI2B,EAAOI,KAAK/B,EAAOL,IAAgB,QAARA,EAAe,CAC7CkD,EAAM7C,MAAQA,EACd,MAQF,OALIS,MAAMC,QAAQT,IAAiC,IAApBA,EAASa,QAA+B,MAAfb,EAAS,IAAkC,MAApBA,EAAS,GAAGP,IAC1FmD,EAAM/C,KAAOG,EAAS,GAAGA,SAEzB4C,EAAM5C,SAAWA,EAEX4C,EAER,SAASI,EAAYhB,GACpB,GAAgB,MAAZA,GAAwC,iBAAbA,GAA6C,mBAAbA,GAAoD,mBAAlBA,EAASiB,KACzG,MAAMC,MAAM,wDAEb,IAAIN,EAAQ3B,EAAiBkC,MAAM,EAAG/B,WACtC,MAAwB,iBAAbY,IACVY,EAAM5C,SAAWR,EAAMkB,kBAAkBkC,EAAM5C,UAC9B,MAAbgC,GAAyBW,EAAalB,EAAcO,IAAaD,EAAgBC,GAAWY,IAEjGA,EAAMnD,IAAMuC,EACLY,GAuHR,GArHAI,EAAYI,MAAQ,SAASC,GAE5B,OADY,MAARA,IAAcA,EAAO,IAClB7D,EAAM,SAAKU,OAAWA,EAAWmD,OAAMnD,OAAWA,IAE1D8C,EAAYM,SAAW,WACtB,IAAIC,EAAStC,EAAiBkC,MAAM,EAAG/B,WAGvC,OAFAmC,EAAO9D,IAAM,IACb8D,EAAOvD,SAAWR,EAAMkB,kBAAkB6C,EAAOvD,UAC1CuD,IAGJC,EAAkB,SAASC,GAC9B,KAAMpC,gBAAgBmC,GAAkB,MAAM,IAAIN,MAAM,qCACxD,GAAwB,mBAAbO,EAAyB,MAAM,IAAIzC,UAAU,+BACxD,IAAI0C,EAAOrC,KAAMsC,EAAY,GAAIC,EAAY,GAAIC,EAAiBC,EAAQH,GAAW,GAAOI,EAAgBD,EAAQF,GAAW,GAC3HvD,EAAWqD,EAAKM,UAAY,CAACL,UAAWA,EAAWC,UAAWA,GAC9DK,EAAoC,mBAAjBC,aAA8BA,aAAeC,WACpE,SAASL,EAAQM,EAAMC,GACtB,OAAO,SAASC,EAAQjC,GACvB,IAAIkC,EACJ,IACC,IAAIF,GAAyB,MAAThC,GAAmC,iBAAVA,GAAuC,mBAAVA,GAAwD,mBAAvBkC,EAAOlC,EAAMkC,MAKvHN,GAAU,WACJI,GAAgC,IAAhBD,EAAKvD,QAAc2D,QAAQC,MAAM,wCAAyCpC,GAC/F,IAAK,IAAItB,EAAI,EAAGA,EAAIqD,EAAKvD,OAAQE,IAAKqD,EAAKrD,GAAGsB,GAC9CsB,EAAU9C,OAAS,EAAG+C,EAAU/C,OAAS,EACzCR,EAASF,MAAQkE,EACjBhE,EAASqE,MAAQ,WAAYJ,EAAQjC,WAVuG,CAC7I,GAAIA,IAAUqB,EAAM,MAAM,IAAI1C,UAAU,uCACxC2D,EAAYJ,EAAKK,KAAKvC,KAYxB,MAAOwC,GACNd,EAAcc,KAIjB,SAASF,EAAYJ,GACpB,IAAIO,EAAO,EACX,SAASC,EAAIC,GACZ,OAAO,SAAS3C,GACXyC,IAAS,GACbE,EAAG3C,IAGL,IAAI4C,EAAUF,EAAIhB,GAClB,IAAKQ,EAAKQ,EAAIlB,GAAiBoB,GAAU,MAAOJ,GAAII,EAAQJ,IAE7DF,EAAYlB,KAEGyB,UAAUX,KAAO,SAASY,EAAaC,GACtD,IAQIC,EAAaC,EARAjF,EAANgB,KAAsB2C,UACjC,SAASuB,EAAOC,EAAUpB,EAAMqB,EAAMtF,GACrCiE,EAAK7C,MAAK,SAASc,GAClB,GAAwB,mBAAbmD,EAAyBC,EAAKpD,QACpC,IAAKgD,EAAYG,EAASnD,IAAS,MAAOwC,GAAQS,GAAYA,EAAWT,OAEjD,mBAAnBxE,EAASqE,OAAwBvE,IAAUE,EAASF,OAAOE,EAASqE,QAGhF,IAAIgB,EAAU,IAAIlC,GAAgB,SAASmC,EAASC,GAASP,EAAcM,EAASL,EAAaM,KAEjG,OADAL,EAAOJ,EAAa9E,EAASsD,UAAW0B,GAAa,GAAOE,EAAOH,EAAa/E,EAASuD,UAAW0B,GAAY,GACzGI,GAERlC,EAAgB0B,UAAUW,MAAQ,SAAST,GAC1C,OAAO/D,KAAKkD,KAAK,KAAMa,IAExB5B,EAAgB0B,UAAUY,QAAU,SAASN,GAC5C,OAAOnE,KAAKkD,MACX,SAASlC,GACR,OAAOmB,EAAgBmC,QAAQH,KAAYjB,MAAK,WAC/C,OAAOlC,QAGT,SAAS0D,GACR,OAAOvC,EAAgBmC,QAAQH,KAAYjB,MAAK,WAC/C,OAAOf,EAAgBoC,OAAOG,UAKlCvC,EAAgBmC,QAAU,SAAStD,GAClC,OAAIA,aAAiBmB,EAAwBnB,EACtC,IAAImB,GAAgB,SAASmC,GAAUA,EAAQtD,OAEvDmB,EAAgBoC,OAAS,SAASvD,GACjC,OAAO,IAAImB,GAAgB,SAASmC,EAASC,GAASA,EAAOvD,OAE9DmB,EAAgBwC,IAAM,SAAS5B,GAC9B,OAAO,IAAIZ,GAAgB,SAASmC,EAASC,GAC5C,IAAIK,EAAQ7B,EAAKvD,OAAQqF,EAAQ,EAAGC,EAAS,GAC7C,GAAoB,IAAhB/B,EAAKvD,OAAc8E,EAAQ,SAC1B,IAAK,IAAI5E,EAAI,EAAGA,EAAIqD,EAAKvD,OAAQE,KACrC,SAAUA,GACT,SAASqF,EAAQ/D,GAChB6D,IACAC,EAAOpF,GAAKsB,EACR6D,IAAUD,GAAON,EAAQQ,GAEf,MAAX/B,EAAKrD,IAAkC,iBAAZqD,EAAKrD,IAAsC,mBAAZqD,EAAKrD,IAA8C,mBAAjBqD,EAAKrD,GAAGwD,KAGnG6B,EAAQhC,EAAKrD,IAFjBqD,EAAKrD,GAAGwD,KAAK6B,EAASR,GAPxB,CAUG7E,OAINyC,EAAgB6C,KAAO,SAASjC,GAC/B,OAAO,IAAIZ,GAAgB,SAASmC,EAASC,GAC5C,IAAK,IAAI7E,EAAI,EAAGA,EAAIqD,EAAKvD,OAAQE,IAChCqD,EAAKrD,GAAGwD,KAAKoB,EAASC,OAIH,oBAAXU,OAAwB,MACJ,IAAnBA,OAAOC,QACjBD,OAAOC,QAAU/C,EACN8C,OAAOC,QAAQrB,UAAUY,UACpCQ,OAAOC,QAAQrB,UAAUY,QAAUtC,EAAgB0B,UAAUY,SAE9D,IAAItC,EAAkB8C,OAAOC,aACvB,QAAsB,IAAX,EAAAC,EAAwB,MACX,IAAnB,EAAAA,EAAOD,QACjB,EAAAC,EAAOD,QAAU/C,EACN,EAAAgD,EAAOD,QAAQrB,UAAUY,UACpC,EAAAU,EAAOD,QAAQrB,UAAUY,QAAUtC,EAAgB0B,UAAUY,SAE1DtC,EAAkB,EAAAgD,EAAOD,QAG9B,IAw6BIE,EAx6BM,SAASC,GAClB,IACIC,EADAC,EAAOF,GAAWA,EAAQG,SAE1BC,EAAY,CACfC,IAAK,6BACLC,KAAM,sCAEP,SAASC,EAAaC,GACrB,OAAOA,EAAOnH,OAASmH,EAAOnH,MAAMoH,OAASL,EAAUI,EAAOzH,KAG/D,SAAS2H,EAAWF,EAAQG,GAC3B,GAAIH,EAAO/G,QAAUkH,EAAU,MAAM,IAAInE,MAAM,sCAMhD,SAASoE,EAASJ,GACjB,IAAIG,EAAWH,EAAO/G,MACtB,IACC,OAAOkB,KAAK8B,MAAMkE,EAAUjG,WAC3B,QACDgG,EAAWF,EAAQG,IAKrB,SAASE,IACR,IACC,OAAOX,EAAKW,cACX,MAAO1C,GACR,OAAO,MAIT,SAAS2C,EAAYC,EAAQC,EAAQpG,EAAOqG,EAAKC,EAAOC,EAAaC,GACpE,IAAK,IAAI/G,EAAIO,EAAOP,EAAI4G,EAAK5G,IAAK,CACjC,IAAImG,EAASQ,EAAO3G,GACN,MAAVmG,GACHa,EAAWN,EAAQP,EAAQU,EAAOE,EAAID,IAIzC,SAASE,EAAWN,EAAQP,EAAQU,EAAOE,EAAID,GAC9C,IAAIpI,EAAMyH,EAAOzH,IACjB,GAAmB,iBAARA,EAGV,OAFAyH,EAAO/G,MAAQ,GACK,MAAhB+G,EAAOnH,OAAeiI,EAAcd,EAAOnH,MAAOmH,EAAQU,GACtDnI,GACP,IAAK,KAQR,SAAoBgI,EAAQP,EAAQW,GACnCX,EAAOpH,IAAM8G,EAAKqB,eAAef,EAAOlH,UACxCkI,EAAWT,EAAQP,EAAOpH,IAAK+H,GAVnBM,CAAWV,EAAQP,EAAQW,GAAc,MACnD,IAAK,IAAKO,EAAWX,EAAQP,EAAQY,EAAID,GAAc,MACvD,IAAK,KAqCR,SAAwBJ,EAAQP,EAAQU,EAAOE,EAAID,GAClD,IAAIvE,EAAWsD,EAAKyB,yBACpB,GAAuB,MAAnBnB,EAAOlH,SAAkB,CAC5B,IAAIsI,EAAYpB,EAAOlH,SACvBwH,EAAYlE,EAAUgF,EAAW,EAAGA,EAAUzH,OAAQ+G,EAAO,KAAME,GAEpEZ,EAAOpH,IAAMwD,EAASiF,WACtBrB,EAAOjH,QAAUqD,EAASkF,WAAW3H,OACrCqH,EAAWT,EAAQnE,EAAUuE,GA7CjBY,CAAehB,EAAQP,EAAQU,EAAOE,EAAID,GAAc,MAClE,SA8CH,SAAuBJ,EAAQP,EAAQU,EAAOE,EAAID,GACjD,IAAIpI,EAAMyH,EAAOzH,IACbiJ,EAASxB,EAAOnH,MAChB4I,EAAKD,GAAUA,EAAOC,GAEtBC,GADJd,EAAKb,EAAaC,IAAWY,GAE5Ba,EAAK/B,EAAKiC,gBAAgBf,EAAIrI,EAAK,CAACkJ,GAAIA,IAAO/B,EAAKiC,gBAAgBf,EAAIrI,GACxEkJ,EAAK/B,EAAKkC,cAAcrJ,EAAK,CAACkJ,GAAIA,IAAO/B,EAAKkC,cAAcrJ,GAC7DyH,EAAOpH,IAAM8I,EACC,MAAVF,GA6kBL,SAAkBxB,EAAQwB,EAAQZ,GACjC,IAAK,IAAIpI,KAAOgJ,EACfK,EAAQ7B,EAAQxH,EAAK,KAAMgJ,EAAOhJ,GAAMoI,GA9kBxCkB,CAAS9B,EAAQwB,EAAQZ,GAG1B,GADAI,EAAWT,EAAQmB,EAASf,IACvBoB,EAAwB/B,KACT,MAAfA,EAAOrH,OACU,KAAhBqH,EAAOrH,KAAa+I,EAAQM,YAAchC,EAAOrH,KAChDqH,EAAOlH,SAAW,CAACR,EAAM,SAAKU,OAAWA,EAAWgH,EAAOrH,UAAMK,OAAWA,KAE3D,MAAnBgH,EAAOlH,UAAkB,CAC5B,IAAIsI,EAAYpB,EAAOlH,SACvBwH,EAAYoB,EAASN,EAAW,EAAGA,EAAUzH,OAAQ+G,EAAO,KAAME,GAC/C,WAAfZ,EAAOzH,KAA8B,MAAViJ,GAsnBlC,SAA4BxB,EAAQwB,GACnC,GAAI,UAAWA,EACd,GAAoB,OAAjBA,EAAOrG,OACyB,IAA9B6E,EAAOpH,IAAIqJ,gBAAsBjC,EAAOpH,IAAIuC,MAAQ,UAClD,CACN,IAAI+G,EAAa,GAAKV,EAAOrG,MACzB6E,EAAOpH,IAAIuC,QAAU+G,IAA4C,IAA9BlC,EAAOpH,IAAIqJ,gBACjDjC,EAAOpH,IAAIuC,MAAQ+G,GAIlB,kBAAmBV,GAAQK,EAAQ7B,EAAQ,gBAAiB,KAAMwB,EAAOS,mBAAejJ,GAjoB3CmJ,CAAmBnC,EAAQwB,IAnEjEI,CAAcrB,EAAQP,EAAQU,EAAOE,EAAID,QA2FrD,SAAyBJ,EAAQP,EAAQU,EAAOE,EAAID,IApBpD,SAAuBX,EAAQU,GAC9B,IAAI0B,EACJ,GAA+B,mBAApBpC,EAAOzH,IAAIwD,KAAqB,CAG1C,GAFAiE,EAAO/G,MAAQoJ,OAAOC,OAAOtC,EAAOzH,KAEF,OADlC6J,EAAWpC,EAAO/G,MAAM8C,MACXwG,kBAA2B,OACxCH,EAASG,mBAAoB,MACvB,CAGN,GAFAvC,EAAO/G,WAAQ,EAEmB,OADlCmJ,EAAWpC,EAAOzH,KACLgK,kBAA2B,OACxCH,EAASG,mBAAoB,EAC7BvC,EAAO/G,MAAiC,MAAxB+G,EAAOzH,IAAIyF,WAA0D,mBAA9BgC,EAAOzH,IAAIyF,UAAUjC,KAAuB,IAAIiE,EAAOzH,IAAIyH,GAAUA,EAAOzH,IAAIyH,GAExIc,EAAcd,EAAO/G,MAAO+G,EAAQU,GAChB,MAAhBV,EAAOnH,OAAeiI,EAAcd,EAAOnH,MAAOmH,EAAQU,GAE9D,GADAV,EAAO7G,SAAWb,EAAMc,UAAUgH,EAASxF,KAAKoF,EAAO/G,MAAM8C,KAAMiE,IAC/DA,EAAO7G,WAAa6G,EAAQ,MAAMhE,MAAM,0DAC5CoG,EAASG,kBAAoB,MAG7BC,CAAcxC,EAAQU,GACC,MAAnBV,EAAO7G,UACV0H,EAAWN,EAAQP,EAAO7G,SAAUuH,EAAOE,EAAID,GAC/CX,EAAOpH,IAAMoH,EAAO7G,SAASP,IAC7BoH,EAAOjH,QAAwB,MAAdiH,EAAOpH,IAAcoH,EAAO7G,SAASJ,QAAU,GAGhEiH,EAAOjH,QAAU,EAhGb0J,CAAgBlC,EAAQP,EAAQU,EAAOE,EAAID,GAMjD,IAAI+B,EAAkB,CAACC,QAAS,QAASC,MAAO,QAASC,MAAO,QAASC,MAAO,QAASC,GAAI,QAASC,GAAI,KAAMC,GAAI,KAAMC,SAAU,QAASC,IAAK,YAClJ,SAASjC,EAAWX,EAAQP,EAAQY,EAAID,GACvC,IAAIyC,EAASpD,EAAOlH,SAASiC,MAAM,kBAAoB,GAMnDsI,EAAO3D,EAAKkC,cAAcc,EAAgBU,EAAO,KAAO,OACjD,+BAAPxC,GACHyC,EAAKC,UAAY,2CAA+CtD,EAAOlH,SAAW,SAClFuK,EAAOA,EAAKhC,YAEZgC,EAAKC,UAAYtD,EAAOlH,SAEzBkH,EAAOpH,IAAMyK,EAAKhC,WAClBrB,EAAOjH,QAAUsK,EAAK/B,WAAW3H,OAEjCqG,EAAO7G,SAAW,GAGlB,IAFA,IACIoK,EADAnH,EAAWsD,EAAKyB,yBAEboC,EAAQF,EAAKhC,YACnBrB,EAAO7G,SAASkB,KAAKkJ,GACrBnH,EAASoH,YAAYD,GAEtBvC,EAAWT,EAAQnE,EAAUuE,GAuK9B,SAAS8C,EAAYlD,EAAQmD,EAAKlD,EAAQE,EAAOC,EAAaC,GAC7D,GAAI8C,IAAQlD,IAAiB,MAAPkD,GAAyB,MAAVlD,GAChC,GAAW,MAAPkD,GAA8B,IAAfA,EAAI/J,OAAc2G,EAAYC,EAAQC,EAAQ,EAAGA,EAAO7G,OAAQ+G,EAAOC,EAAaC,QACvG,GAAc,MAAVJ,GAAoC,IAAlBA,EAAO7G,OAAcgK,EAAYpD,EAAQmD,EAAK,EAAGA,EAAI/J,YAC3E,CACJ,IAAIiK,EAAuB,MAAVF,EAAI,IAA4B,MAAdA,EAAI,GAAGlL,IACtCqL,EAAwB,MAAbrD,EAAO,IAA+B,MAAjBA,EAAO,GAAGhI,IAC1C4B,EAAQ,EAAG0J,EAAW,EAC1B,IAAKF,EAAY,KAAOE,EAAWJ,EAAI/J,QAA2B,MAAjB+J,EAAII,IAAmBA,IACxE,IAAKD,EAAU,KAAOzJ,EAAQoG,EAAO7G,QAA2B,MAAjB6G,EAAOpG,IAAgBA,IACtE,GAAiB,OAAbyJ,GAAmC,MAAdD,EAAoB,OAC7C,GAAIA,IAAeC,EAClBF,EAAYpD,EAAQmD,EAAKI,EAAUJ,EAAI/J,QACvC2G,EAAYC,EAAQC,EAAQpG,EAAOoG,EAAO7G,OAAQ+G,EAAOC,EAAaC,QAChE,GAAKiD,EAiBL,CAIN,IAFA,IAA2DE,EAAGC,EAAGC,EAAIC,EAAIC,EAArEC,EAASV,EAAI/J,OAAS,EAAG8G,EAAMD,EAAO7G,OAAS,EAE5CyK,GAAUN,GAAYrD,GAAOrG,IACnC6J,EAAKP,EAAIU,GACTF,EAAK1D,EAAOC,GACRwD,EAAGzL,MAAQ0L,EAAG1L,MACdyL,IAAOC,GAAIG,EAAW9D,EAAQ0D,EAAIC,EAAIxD,EAAOC,EAAaC,GAChD,MAAVsD,EAAGtL,MAAa+H,EAAcuD,EAAGtL,KACrCwL,IAAU3D,IAGX,KAAO2D,GAAUN,GAAYrD,GAAOrG,IACnC2J,EAAIL,EAAII,GACRE,EAAIxD,EAAOpG,GACP2J,EAAEvL,MAAQwL,EAAExL,MAChBsL,IAAY1J,IACR2J,IAAMC,GAAGK,EAAW9D,EAAQwD,EAAGC,EAAGtD,EAAO4D,EAAeZ,EAAKI,EAAUnD,GAAcC,GAG1F,KAAOwD,GAAUN,GAAYrD,GAAOrG,GAC/BA,IAAUqG,GACVsD,EAAEvL,MAAQ0L,EAAG1L,KAAOyL,EAAGzL,MAAQwL,EAAExL,KAErC+L,EAAUhE,EAAQ0D,EADlBE,EAAaG,EAAeZ,EAAKI,EAAUnD,IAEvCsD,IAAOD,GAAGK,EAAW9D,EAAQ0D,EAAID,EAAGtD,EAAOyD,EAAYvD,KACrDxG,KAAWqG,GAAK8D,EAAUhE,EAAQwD,EAAGpD,GACvCoD,IAAMG,GAAIG,EAAW9D,EAAQwD,EAAGG,EAAIxD,EAAOC,EAAaC,GAC9C,MAAVsD,EAAGtL,MAAa+H,EAAcuD,EAAGtL,KACrCkL,IACAG,EAAKP,IADOU,GAEZF,EAAK1D,EAAOC,GACZsD,EAAIL,EAAII,GACRE,EAAIxD,EAAOpG,GAGZ,KAAOgK,GAAUN,GAAYrD,GAAOrG,GAC/B6J,EAAGzL,MAAQ0L,EAAG1L,KACdyL,IAAOC,GAAIG,EAAW9D,EAAQ0D,EAAIC,EAAIxD,EAAOC,EAAaC,GAChD,MAAVsD,EAAGtL,MAAa+H,EAAcuD,EAAGtL,KAC3B6H,IACVwD,EAAKP,IADLU,GAEAF,EAAK1D,EAAOC,GAEb,GAAIrG,EAAQqG,EAAKkD,EAAYpD,EAAQmD,EAAKI,EAAUM,EAAS,QACxD,GAAIN,EAAWM,EAAQ9D,EAAYC,EAAQC,EAAQpG,EAAOqG,EAAM,EAAGC,EAAOC,EAAaC,OACvF,CAEJ,IAAuJ4D,EAAKC,EAAxJC,EAAsB/D,EAAagE,EAAelE,EAAMrG,EAAQ,EAAGwK,EAAa,IAAItL,MAAMqL,GAAeE,EAAG,EAAGhL,EAAE,EAAGiL,EAAM,WAAYC,EAAU,EACpJ,IAAKlL,EAAI,EAAGA,EAAI8K,EAAc9K,IAAK+K,EAAW/K,IAAM,EACpD,IAAKA,EAAI4G,EAAK5G,GAAKO,EAAOP,IAAK,CACnB,MAAP2K,IAAaA,EAAMQ,EAAUtB,EAAKI,EAAUM,EAAS,IAEzD,IAAIa,EAAWT,GADfN,EAAK1D,EAAO3G,IACUrB,KACN,MAAZyM,IACHH,EAAOG,EAAWH,EAAOG,GAAY,EACrCL,EAAW/K,EAAEO,GAAS6K,EACtBhB,EAAKP,EAAIuB,GACTvB,EAAIuB,GAAY,KACZhB,IAAOC,GAAIG,EAAW9D,EAAQ0D,EAAIC,EAAIxD,EAAOC,EAAaC,GAChD,MAAVsD,EAAGtL,MAAa+H,EAAcuD,EAAGtL,KACrCmM,KAKF,GAFApE,EAAc+D,EACVK,IAAYX,EAASN,EAAW,GAAGH,EAAYpD,EAAQmD,EAAKI,EAAUM,EAAS,GACnE,IAAZW,EAAezE,EAAYC,EAAQC,EAAQpG,EAAOqG,EAAM,EAAGC,EAAOC,EAAaC,QAElF,IAAa,IAATkE,EAKH,IADAD,GADAJ,EA2IN,SAAwBS,GACvB,IAAIC,EAAS,CAAC,GACVC,EAAI,EAAGpB,EAAI,EAAGnK,EAAI,EAClBwL,EAAKC,EAAQ3L,OAASuL,EAAEvL,OAC5B,IAASE,EAAI,EAAGA,EAAIwL,EAAIxL,IAAKyL,EAAQzL,GAAKqL,EAAErL,GAC5C,IAASA,EAAI,EAAGA,EAAIwL,IAAMxL,EACzB,IAAc,IAAVqL,EAAErL,GAAN,CACA,IAAI0L,EAAIJ,EAAOA,EAAOxL,OAAS,GAC/B,GAAIuL,EAAEK,GAAKL,EAAErL,GACZyL,EAAQzL,GAAK0L,EACbJ,EAAO9K,KAAKR,OAFb,CAOA,IAFAuL,EAAI,EACJpB,EAAImB,EAAOxL,OAAS,EACbyL,EAAIpB,GAAG,CAGb,IAAIwB,GAAKJ,IAAM,IAAMpB,IAAM,IAAMoB,EAAIpB,EAAI,GACrCkB,EAAEC,EAAOK,IAAMN,EAAErL,GACpBuL,EAAII,EAAI,EAGRxB,EAAIwB,EAGFN,EAAErL,GAAKqL,EAAEC,EAAOC,MACfA,EAAI,IAAGE,EAAQzL,GAAKsL,EAAOC,EAAI,IACnCD,EAAOC,GAAKvL,IAGduL,EAAID,EAAOxL,OACXqK,EAAImB,EAAOC,EAAI,GACf,KAAOA,KAAM,GACZD,EAAOC,GAAKpB,EACZA,EAAIsB,EAAQtB,GAGb,OADAsB,EAAQ3L,OAAS,EACVwL,EAjLWM,CAAeb,IACZjL,OAAS,EACpBE,EAAI4G,EAAK5G,GAAKO,EAAOP,IACzBmK,EAAIxD,EAAO3G,IACkB,IAAzB+K,EAAW/K,EAAEO,GAAeyG,EAAWN,EAAQyD,EAAGtD,EAAOE,EAAID,GAE5D8D,EAAWI,KAAQhL,EAAIO,EAAOyK,IAC7BN,EAAUhE,EAAQyD,EAAGrD,GAEd,MAATqD,EAAEpL,MAAa+H,EAAcH,EAAO3G,GAAGjB,UAG5C,IAAKiB,EAAI4G,EAAK5G,GAAKO,EAAOP,IACzBmK,EAAIxD,EAAO3G,IACkB,IAAzB+K,EAAW/K,EAAEO,IAAeyG,EAAWN,EAAQyD,EAAGtD,EAAOE,EAAID,GACpD,MAATqD,EAAEpL,MAAa+H,EAAcH,EAAO3G,GAAGjB,UAxG1B,CAErB,IAAI8M,EAAehC,EAAI/J,OAAS6G,EAAO7G,OAAS+J,EAAI/J,OAAS6G,EAAO7G,OAKpE,IADAS,EAAQA,EAAQ0J,EAAW1J,EAAQ0J,EAC5B1J,EAAQsL,EAActL,KAC5B2J,EAAIL,EAAItJ,OACR4J,EAAIxD,EAAOpG,KACS,MAAL2J,GAAkB,MAALC,IACd,MAALD,EAAWlD,EAAWN,EAAQyD,EAAGtD,EAAOE,EAAI0D,EAAeZ,EAAKtJ,EAAQ,EAAGuG,IACtE,MAALqD,EAAW2B,EAAWpF,EAAQwD,GAClCM,EAAW9D,EAAQwD,EAAGC,EAAGtD,EAAO4D,EAAeZ,EAAKtJ,EAAQ,EAAGuG,GAAcC,IAE/E8C,EAAI/J,OAAS+L,GAAc/B,EAAYpD,EAAQmD,EAAKtJ,EAAOsJ,EAAI/J,QAC/D6G,EAAO7G,OAAS+L,GAAcpF,EAAYC,EAAQC,EAAQpG,EAAOoG,EAAO7G,OAAQ+G,EAAOC,EAAaC,KAgG3G,SAASyD,EAAW9D,EAAQmD,EAAK1D,EAAQU,EAAOC,EAAaC,GAC5D,IAAIgF,EAASlC,EAAInL,IACjB,GAAIqN,IADwB5F,EAAOzH,IACf,CAGnB,GAFAyH,EAAO/G,MAAQyK,EAAIzK,MACnB+G,EAAO9G,OAASwK,EAAIxK,OAwftB,SAAyB8G,EAAQ0D,GAChC,EAAG,CAED,IAIImC,EALL,GAAoB,MAAhB7F,EAAOnH,OAAwD,mBAAhCmH,EAAOnH,MAAMiN,eAE/C,QAAc9M,KADV6M,EAAQzF,EAASxF,KAAKoF,EAAOnH,MAAMiN,eAAgB9F,EAAQ0D,MACnCmC,EAAO,MAEpC,GAA0B,iBAAf7F,EAAOzH,KAA2D,mBAAhCyH,EAAO/G,MAAM6M,eAEzD,QAAc9M,KADV6M,EAAQzF,EAASxF,KAAKoF,EAAO/G,MAAM6M,eAAgB9F,EAAQ0D,MACnCmC,EAAO,MAEpC,OAAO,QACC,GAcT,OAbA7F,EAAOpH,IAAM8K,EAAI9K,IACjBoH,EAAOjH,QAAU2K,EAAI3K,QACrBiH,EAAO7G,SAAWuK,EAAIvK,SAQtB6G,EAAOnH,MAAQ6K,EAAI7K,MACnBmH,EAAOlH,SAAW4K,EAAI5K,SACtBkH,EAAOrH,KAAO+K,EAAI/K,MACX,EAhhBFoN,CAAgB/F,EAAQ0D,GAAM,OAClC,GAAsB,iBAAXkC,EAIV,OAHoB,MAAhB5F,EAAOnH,OACVmN,EAAgBhG,EAAOnH,MAAOmH,EAAQU,GAE/BkF,GACP,IAAK,KAaT,SAAoBlC,EAAK1D,GACpB0D,EAAI5K,SAASmN,aAAejG,EAAOlH,SAASmN,aAC/CvC,EAAI9K,IAAIsN,UAAYlG,EAAOlH,UAE5BkH,EAAOpH,IAAM8K,EAAI9K,IAjBJuN,CAAWzC,EAAK1D,GAAS,MACnC,IAAK,KAkBT,SAAoBO,EAAQmD,EAAK1D,EAAQY,EAAID,GACxC+C,EAAI5K,WAAakH,EAAOlH,UAC3BsN,EAAW7F,EAAQmD,GACnBxC,EAAWX,EAAQP,EAAQY,EAAID,KAG/BX,EAAOpH,IAAM8K,EAAI9K,IACjBoH,EAAOjH,QAAU2K,EAAI3K,QACrBiH,EAAO7G,SAAWuK,EAAIvK,UA1BVkN,CAAW9F,EAAQmD,EAAK1D,EAAQY,EAAID,GAAc,MAC5D,IAAK,KA4BT,SAAwBJ,EAAQmD,EAAK1D,EAAQU,EAAOC,EAAaC,GAChE6C,EAAYlD,EAAQmD,EAAI5K,SAAUkH,EAAOlH,SAAU4H,EAAOC,EAAaC,GACvE,IAAI7H,EAAU,EAAGqI,EAAYpB,EAAOlH,SAEpC,GADAkH,EAAOpH,IAAM,KACI,MAAbwI,EAAmB,CACtB,IAAK,IAAIvH,EAAI,EAAGA,EAAIuH,EAAUzH,OAAQE,IAAK,CAC1C,IAAI0J,EAAQnC,EAAUvH,GACT,MAAT0J,GAA8B,MAAbA,EAAM3K,MACR,MAAdoH,EAAOpH,MAAaoH,EAAOpH,IAAM2K,EAAM3K,KAC3CG,GAAWwK,EAAMxK,SAAW,GAGd,IAAZA,IAAeiH,EAAOjH,QAAUA,IAxCxBuN,CAAe/F,EAAQmD,EAAK1D,EAAQU,EAAOC,EAAaC,GAAK,MACvE,SA0CJ,SAAuB8C,EAAK1D,EAAQU,EAAOE,GAC1C,IAAIc,EAAU1B,EAAOpH,IAAM8K,EAAI9K,IAC/BgI,EAAKb,EAAaC,IAAWY,EACV,aAAfZ,EAAOzH,MACU,MAAhByH,EAAOnH,QAAemH,EAAOnH,MAAQ,IACtB,MAAfmH,EAAOrH,OACVqH,EAAOnH,MAAMsC,MAAQ6E,EAAOrH,KAC5BqH,EAAOrH,UAAOK,KAgUjB,SAAqBgH,EAAQ0D,EAAKlC,EAAQZ,GACzC,GAAc,MAAVY,EACH,IAAK,IAAIhJ,KAAOgJ,EACfK,EAAQ7B,EAAQxH,EAAKkL,GAAOA,EAAIlL,GAAMgJ,EAAOhJ,GAAMoI,GAGrD,IAAI2F,EACJ,GAAW,MAAP7C,EACH,IAAK,IAAIlL,KAAOkL,EACU,OAAnB6C,EAAM7C,EAAIlL,KAA6B,MAAVgJ,GAAiC,MAAfA,EAAOhJ,IAC3DgO,EAAWxG,EAAQxH,EAAK+N,EAAK3F,IAvUhC6F,CAAYzG,EAAQ0D,EAAI7K,MAAOmH,EAAOnH,MAAO+H,GACxCmB,EAAwB/B,KACZ,MAAZ0D,EAAI/K,MAA+B,MAAfqH,EAAOrH,MAAgC,KAAhBqH,EAAOrH,KACjD+K,EAAI/K,KAAKsN,aAAejG,EAAOrH,KAAKsN,aAAYvC,EAAI9K,IAAIyI,WAAW6E,UAAYlG,EAAOrH,OAG1E,MAAZ+K,EAAI/K,OAAc+K,EAAI5K,SAAW,CAACR,EAAM,SAAKU,OAAWA,EAAW0K,EAAI/K,UAAMK,EAAW0K,EAAI9K,IAAIyI,cACjF,MAAfrB,EAAOrH,OAAcqH,EAAOlH,SAAW,CAACR,EAAM,SAAKU,OAAWA,EAAWgH,EAAOrH,UAAMK,OAAWA,KACrGyK,EAAY/B,EAASgC,EAAI5K,SAAUkH,EAAOlH,SAAU4H,EAAO,KAAME,KA5DvD8F,CAAchD,EAAK1D,EAAQU,EAAOE,QAgE/C,SAAyBL,EAAQmD,EAAK1D,EAAQU,EAAOC,EAAaC,GAEjE,GADAZ,EAAO7G,SAAWb,EAAMc,UAAUgH,EAASxF,KAAKoF,EAAO/G,MAAM8C,KAAMiE,IAC/DA,EAAO7G,WAAa6G,EAAQ,MAAMhE,MAAM,0DAC5CgK,EAAgBhG,EAAO/G,MAAO+G,EAAQU,GAClB,MAAhBV,EAAOnH,OAAemN,EAAgBhG,EAAOnH,MAAOmH,EAAQU,GACzC,MAAnBV,EAAO7G,UACU,MAAhBuK,EAAIvK,SAAkB0H,EAAWN,EAAQP,EAAO7G,SAAUuH,EAAOE,EAAID,GACpE0D,EAAW9D,EAAQmD,EAAIvK,SAAU6G,EAAO7G,SAAUuH,EAAOC,EAAaC,GAC3EZ,EAAOpH,IAAMoH,EAAO7G,SAASP,IAC7BoH,EAAOjH,QAAUiH,EAAO7G,SAASJ,SAET,MAAhB2K,EAAIvK,UACZwM,EAAWpF,EAAQmD,EAAIvK,UACvB6G,EAAOpH,SAAMI,EACbgH,EAAOjH,QAAU,IAGjBiH,EAAOpH,IAAM8K,EAAI9K,IACjBoH,EAAOjH,QAAU2K,EAAI3K,SA/EhB4N,CAAgBpG,EAAQmD,EAAK1D,EAAQU,EAAOC,EAAaC,QAG9D+E,EAAWpF,EAAQmD,GACnB7C,EAAWN,EAAQP,EAAQU,EAAOE,EAAID,GA8ExC,SAASqE,EAAUxE,EAAQpG,EAAOqG,GAEjC,IADA,IAAI+D,EAAMnC,OAAOC,OAAO,MACjBlI,EAAQqG,EAAKrG,IAAS,CAC5B,IAAI4F,EAASQ,EAAOpG,GACpB,GAAc,MAAV4F,EAAgB,CACnB,IAAIxH,EAAMwH,EAAOxH,IACN,MAAPA,IAAagM,EAAIhM,GAAO4B,IAG9B,OAAOoK,EAOR,IAAIc,EAAU,GAyCd,SAAShB,EAAe9D,EAAQ3G,EAAG8G,GAClC,KAAO9G,EAAI2G,EAAO7G,OAAQE,IACzB,GAAiB,MAAb2G,EAAO3G,IAA+B,MAAjB2G,EAAO3G,GAAGjB,IAAa,OAAO4H,EAAO3G,GAAGjB,IAElE,OAAO+H,EAUR,SAAS4D,EAAUhE,EAAQP,EAAQW,GAClC,IAAIiG,EAAOlH,EAAKyB,yBAChB0F,EAAgBtG,EAAQqG,EAAM5G,GAC9BgB,EAAWT,EAAQqG,EAAMjG,GAE1B,SAASkG,EAAgBtG,EAAQqG,EAAM5G,GAEtC,KAAqB,MAAdA,EAAOpH,KAAeoH,EAAOpH,IAAIkO,aAAevG,GAAQ,CAC9D,GAA0B,iBAAfP,EAAOzH,KAEjB,GAAc,OADdyH,EAASA,EAAO7G,UACI,cACd,GAAmB,MAAf6G,EAAOzH,IACjB,IAAK,IAAIsB,EAAI,EAAGA,EAAImG,EAAO7G,SAASQ,OAAQE,IAC3C+M,EAAKpD,YAAYxD,EAAO7G,SAASU,SAE5B,GAAmB,MAAfmG,EAAOzH,IAEjBqO,EAAKpD,YAAYxD,EAAOpH,UAClB,GAA+B,IAA3BoH,EAAOlH,SAASa,QAE1B,GAAc,OADdqG,EAASA,EAAOlH,SAAS,IACL,cAEpB,IAASe,EAAI,EAAGA,EAAImG,EAAOlH,SAASa,OAAQE,IAAK,CAChD,IAAI0J,EAAQvD,EAAOlH,SAASe,GACf,MAAT0J,GAAesD,EAAgBtG,EAAQqG,EAAMrD,GAGnD,OAGF,SAASvC,EAAWT,EAAQ3H,EAAK+H,GACb,MAAfA,EAAqBJ,EAAOwG,aAAanO,EAAK+H,GAC7CJ,EAAOiD,YAAY5K,GAEzB,SAASmJ,EAAwB/B,GAChC,GAAoB,MAAhBA,EAAOnH,OACsB,MAAhCmH,EAAOnH,MAAMmO,iBACmB,MAAhChH,EAAOnH,MAAMoO,gBACX,OAAO,EACV,IAAI7F,EAAYpB,EAAOlH,SACvB,GAAiB,MAAbsI,GAA0C,IAArBA,EAAUzH,QAAqC,MAArByH,EAAU,GAAG7I,IAAa,CAC5E,IAAI2O,EAAU9F,EAAU,GAAGtI,SACvBkH,EAAOpH,IAAI0K,YAAc4D,IAASlH,EAAOpH,IAAI0K,UAAY4D,QAEzD,GAAmB,MAAflH,EAAOrH,MAA6B,MAAbyI,GAA0C,IAArBA,EAAUzH,OAAc,MAAM,IAAIqC,MAAM,mDAC7F,OAAO,EAGR,SAAS2H,EAAYpD,EAAQC,EAAQpG,EAAOqG,GAC3C,IAAK,IAAI5G,EAAIO,EAAOP,EAAI4G,EAAK5G,IAAK,CACjC,IAAImG,EAASQ,EAAO3G,GACN,MAAVmG,GAAgB2F,EAAWpF,EAAQP,IAGzC,SAAS2F,EAAWpF,EAAQP,GAC3B,IAEImH,EAAaC,EASZjC,EAXDkC,EAAO,EACPlH,EAAWH,EAAO/G,MAEI,iBAAf+G,EAAOzH,KAA2D,mBAAhCyH,EAAO/G,MAAMqO,iBAE3C,OADVnC,EAAS/E,EAASxF,KAAKoF,EAAO/G,MAAMqO,eAAgBtH,KACX,mBAAhBmF,EAAO9H,OACnCgK,EAAO,EACPF,EAAchC,IAGZnF,EAAOnH,OAAgD,mBAAhCmH,EAAOnH,MAAMyO,iBAEzB,OADVnC,EAAS/E,EAASxF,KAAKoF,EAAOnH,MAAMyO,eAAgBtH,KACX,mBAAhBmF,EAAO9H,OAEnCgK,GAAQ,EACRD,EAAcjC,IAKhB,GAFAjF,EAAWF,EAAQG,GAEdkH,EAGE,CACN,GAAmB,MAAfF,EAAqB,CACxB,IAAI5I,EAAO,WAEC,EAAP8I,KAAYA,GAAQ,IAAcE,MAEvCJ,EAAY9J,KAAKkB,EAAMA,GAExB,GAAmB,MAAf6I,EAAqB,CACpB7I,EAAO,WAEC,EAAP8I,KAAYA,GAAQ,IAAcE,MAEvCH,EAAY/J,KAAKkB,EAAMA,SAfxBiJ,EAASxH,GACTyH,EAAYlH,EAAQP,GAiBrB,SAASuH,IACRrH,EAAWF,EAAQG,GACnBqH,EAASxH,GACTyH,EAAYlH,EAAQP,IAGtB,SAASoG,EAAW7F,EAAQP,GAC3B,IAAK,IAAInG,EAAI,EAAGA,EAAImG,EAAO7G,SAASQ,OAAQE,IAC3C0G,EAAOkH,YAAYzH,EAAO7G,SAASU,IAGrC,SAAS4N,EAAYlH,EAAQP,GAE5B,KAAqB,MAAdA,EAAOpH,KAAeoH,EAAOpH,IAAIkO,aAAevG,GAAQ,CAC9D,GAA0B,iBAAfP,EAAOzH,KAEjB,GAAc,OADdyH,EAASA,EAAO7G,UACI,cACd,GAAmB,MAAf6G,EAAOzH,IACjB6N,EAAW7F,EAAQP,OACb,CACN,GAAmB,MAAfA,EAAOzH,MACVgI,EAAOkH,YAAYzH,EAAOpH,MACrBU,MAAMC,QAAQyG,EAAOlH,WAAW,MAEtC,GAA+B,IAA3BkH,EAAOlH,SAASa,QAEnB,GAAc,OADdqG,EAASA,EAAOlH,SAAS,IACL,cAEpB,IAAK,IAAIe,EAAI,EAAGA,EAAImG,EAAOlH,SAASa,OAAQE,IAAK,CAChD,IAAI0J,EAAQvD,EAAOlH,SAASe,GACf,MAAT0J,GAAekE,EAAYlH,EAAQgD,IAI1C,OAGF,SAASiE,EAASxH,GAGjB,GAF0B,iBAAfA,EAAOzH,KAAqD,mBAA1ByH,EAAO/G,MAAMuO,UAAyBpH,EAASxF,KAAKoF,EAAO/G,MAAMuO,SAAUxH,GACpHA,EAAOnH,OAA0C,mBAA1BmH,EAAOnH,MAAM2O,UAAyBpH,EAASxF,KAAKoF,EAAOnH,MAAM2O,SAAUxH,GAC5E,iBAAfA,EAAOzH,IACM,MAAnByH,EAAO7G,UAAkBqO,EAASxH,EAAO7G,cACvC,CACN,IAAIiI,EAAYpB,EAAOlH,SACvB,GAAIQ,MAAMC,QAAQ6H,GACjB,IAAK,IAAIvH,EAAI,EAAGA,EAAIuH,EAAUzH,OAAQE,IAAK,CAC1C,IAAI0J,EAAQnC,EAAUvH,GACT,MAAT0J,GAAeiE,EAASjE,KAWhC,SAAS1B,EAAQ7B,EAAQxH,EAAKkL,EAAKvI,EAAOyF,GACzC,GAAY,QAARpI,GAAyB,OAARA,GAAyB,MAAT2C,IAAiBuM,EAAkBlP,KAASkL,IAAQvI,GA2E1F,SAAyB6E,EAAQ2H,GAChC,MAAgB,UAATA,GAA6B,YAATA,GAA+B,kBAATA,GAAqC,aAATA,GAAuB3H,EAAOpH,MAAQyH,KAAkC,WAAfL,EAAOzH,KAAoByH,EAAOpH,IAAIkO,aAAepH,EAAKW,cA5E7FuH,CAAgB5H,EAAQxH,IAA0B,iBAAV2C,GAA3I,CACA,GAAe,MAAX3C,EAAI,IAAyB,MAAXA,EAAI,GAAY,OAAOqP,EAAY7H,EAAQxH,EAAK2C,GACtE,GAAwB,WAApB3C,EAAIsP,MAAM,EAAG,GAAiB9H,EAAOpH,IAAImP,eAAe,+BAAgCvP,EAAIsP,MAAM,GAAI3M,QACrG,GAAY,UAAR3C,EAAiBwP,EAAYhI,EAAOpH,IAAK8K,EAAKvI,QAClD,GAAI8M,EAAejI,EAAQxH,EAAKoI,GAAK,CACzC,GAAY,UAARpI,EAAiB,CAIpB,IAAoB,UAAfwH,EAAOzH,KAAkC,aAAfyH,EAAOzH,MAAuByH,EAAOpH,IAAIuC,QAAU,GAAKA,GAAS6E,EAAOpH,MAAQyH,IAAiB,OAEhI,GAAmB,WAAfL,EAAOzH,KAA4B,OAARmL,GAAgB1D,EAAOpH,IAAIuC,QAAU,GAAKA,EAAO,OAEhF,GAAmB,WAAf6E,EAAOzH,KAA4B,OAARmL,GAAgB1D,EAAOpH,IAAIuC,QAAU,GAAKA,EAAO,OAI9D,UAAf6E,EAAOzH,KAA2B,SAARC,EAAgBwH,EAAOpH,IAAIsP,aAAa1P,EAAK2C,GACtE6E,EAAOpH,IAAIJ,GAAO2C,MAEF,kBAAVA,EACNA,EAAO6E,EAAOpH,IAAIsP,aAAa1P,EAAK,IACnCwH,EAAOpH,IAAIuP,gBAAgB3P,GAE5BwH,EAAOpH,IAAIsP,aAAqB,cAAR1P,EAAsB,QAAUA,EAAK2C,IAGpE,SAASqL,EAAWxG,EAAQxH,EAAKkL,EAAK9C,GACrC,GAAY,QAARpI,GAAyB,OAARA,GAAuB,MAAPkL,IAAegE,EAAkBlP,GACtE,GAAe,MAAXA,EAAI,IAAyB,MAAXA,EAAI,IAAekP,EAAkBlP,GACtD,GAAY,UAARA,EAAiBwP,EAAYhI,EAAOpH,IAAK8K,EAAK,WAClD,IACJuE,EAAejI,EAAQxH,EAAKoI,IACjB,cAARpI,GACU,UAARA,IACW,WAAfwH,EAAOzH,KACW,WAAfyH,EAAOzH,MAAkD,IAA9ByH,EAAOpH,IAAIqJ,eAAwBjC,EAAOpH,MAAQyH,MAE7D,UAAfL,EAAOzH,KAA2B,SAARC,EAGzB,CACN,IAAI4P,EAAc5P,EAAI6P,QAAQ,MACT,IAAjBD,IAAoB5P,EAAMA,EAAIsP,MAAMM,EAAc,KAC1C,IAAR1E,GAAe1D,EAAOpH,IAAIuP,gBAAwB,cAAR3P,EAAsB,QAAUA,QAJ9EwH,EAAOpH,IAAIJ,GAAO,UAX8CqP,EAAY7H,EAAQxH,OAAKQ,GAiD3F,SAAS0O,EAAkBC,GAC1B,MAAgB,WAATA,GAA8B,aAATA,GAAgC,aAATA,GAAgC,aAATA,GAAgC,mBAATA,GAAsC,mBAATA,EAE/H,SAASM,EAAejI,EAAQxH,EAAKoI,GAEpC,YAAc5H,IAAP4H,IAENZ,EAAOzH,IAAI8P,QAAQ,MAAQ,GAAqB,MAAhBrI,EAAOnH,OAAiBmH,EAAOnH,MAAM4I,IAE7D,SAARjJ,GAA0B,SAARA,GAA0B,SAARA,GAA0B,UAARA,GAA2B,WAARA,IAErEA,KAAOwH,EAAOpH,IAGpB,IAAI0P,EAAiB,SACrB,SAASC,EAAYC,GAAW,MAAO,IAAMA,EAAQD,cACrD,SAASE,EAAajQ,GACrB,MAAkB,MAAXA,EAAI,IAAyB,MAAXA,EAAI,GAAaA,EACjC,aAARA,EAAqB,QACpBA,EAAI8C,QAAQgN,EAAgBC,GAE/B,SAASP,EAAYtG,EAASgC,EAAKgF,GAClC,GAAIhF,IAAQgF,QAEL,GAAa,MAATA,EAEVhH,EAAQgH,MAAMC,QAAU,QAClB,GAAqB,iBAAVD,EAEjBhH,EAAQgH,MAAMC,QAAUD,OAClB,GAAW,MAAPhF,GAA8B,iBAARA,EAIhC,IAAK,IAAIlL,KAFTkJ,EAAQgH,MAAMC,QAAU,GAERD,EAAO,CAET,OADTvN,EAAQuN,EAAMlQ,KACCkJ,EAAQgH,MAAME,YAAYH,EAAajQ,GAAMiB,OAAO0B,QAElE,CAGN,IAAK,IAAI3C,KAAOkQ,EAAO,CACtB,IAAIvN,EACS,OADTA,EAAQuN,EAAMlQ,MACI2C,EAAQ1B,OAAO0B,MAAY1B,OAAOiK,EAAIlL,KAC3DkJ,EAAQgH,MAAME,YAAYH,EAAajQ,GAAM2C,GAI/C,IAAK,IAAI3C,KAAOkL,EACC,MAAZA,EAAIlL,IAA8B,MAAdkQ,EAAMlQ,IAC7BkJ,EAAQgH,MAAMG,eAAeJ,EAAajQ,KAgB9C,SAASsQ,IAER3O,KAAK4O,EAAItJ,EAeV,SAASoI,EAAY7H,EAAQxH,EAAK2C,GACjC,GAAqB,MAAjB6E,EAAO9G,OAAgB,CAC1B,GAAI8G,EAAO9G,OAAOV,KAAS2C,EAAO,OACrB,MAATA,GAAmC,mBAAVA,GAAyC,iBAAVA,GAIjC,MAAtB6E,EAAO9G,OAAOV,IAAcwH,EAAOpH,IAAIoQ,oBAAoBxQ,EAAIsP,MAAM,GAAI9H,EAAO9G,QAAQ,GAC5F8G,EAAO9G,OAAOV,QAAOQ,IAJK,MAAtBgH,EAAO9G,OAAOV,IAAcwH,EAAOpH,IAAIqQ,iBAAiBzQ,EAAIsP,MAAM,GAAI9H,EAAO9G,QAAQ,GACzF8G,EAAO9G,OAAOV,GAAO2C,QAKH,MAATA,GAAmC,mBAAVA,GAAyC,iBAAVA,IAClE6E,EAAO9G,OAAS,IAAI4P,EACpB9I,EAAOpH,IAAIqQ,iBAAiBzQ,EAAIsP,MAAM,GAAI9H,EAAO9G,QAAQ,GACzD8G,EAAO9G,OAAOV,GAAO2C,GAIvB,SAAS2F,EAAcoI,EAAQlJ,EAAQU,GACT,mBAAlBwI,EAAOC,QAAuB/I,EAASxF,KAAKsO,EAAOC,OAAQnJ,GACvC,mBAApBkJ,EAAOE,UAAyB1I,EAAMrG,KAAK+F,EAAS1C,KAAKwL,EAAOE,SAAUpJ,IAEtF,SAASgG,EAAgBkD,EAAQlJ,EAAQU,GACT,mBAApBwI,EAAOG,UAAyB3I,EAAMrG,KAAK+F,EAAS1C,KAAKwL,EAAOG,SAAUrJ,IA6BtF,OAhEA8I,EAAU9K,UAAYqE,OAAOC,OAAO,MACpCwG,EAAU9K,UAAUsL,YAAc,SAAUC,GAC3C,IACIpE,EADAqE,EAAWrP,KAAK,KAAOoP,EAAGrO,MAEN,mBAAbsO,EAAyBrE,EAASqE,EAAS5O,KAAK2O,EAAGE,cAAeF,GACpC,mBAAzBC,EAASF,aAA4BE,EAASF,YAAYC,GACtEpP,KAAK4O,IAAmB,IAAdQ,EAAGG,SAAkB,EAAIvP,KAAK4O,MAC7B,IAAX5D,IACHoE,EAAGI,iBACHJ,EAAGK,oBAuDE,SAAShR,EAAK4H,EAAQkJ,GAC5B,IAAK9Q,EAAK,MAAM,IAAIkB,UAAU,qFAC9B,IAAI4G,EAAQ,GACRmJ,EAASxJ,IACTyJ,EAAYlR,EAAImR,aAEF,MAAdnR,EAAI4H,SAAgB5H,EAAIoJ,YAAc,IAC1CxB,EAASlI,EAAMkB,kBAAkBF,MAAMC,QAAQiH,GAAUA,EAAS,CAACA,IACnE,IAAIwJ,EAAavK,EACjB,IACCA,EAAkC,mBAAXiK,EAAwBA,OAAS1Q,EACxDyK,EAAY7K,EAAKA,EAAI4H,OAAQA,EAAQE,EAAO,KAAoB,iCAAdoJ,OAA+C9Q,EAAY8Q,GAC5G,QACDrK,EAAgBuK,EAEjBpR,EAAI4H,OAASA,EAEC,MAAVqJ,GAAkBxJ,MAAoBwJ,GAAkC,mBAAjBA,EAAOI,OAAsBJ,EAAOI,QAC/F,IAAK,IAAIpQ,EAAI,EAAGA,EAAI6G,EAAM/G,OAAQE,IAAK6G,EAAM7G,MAGlCqQ,CAAI9K,QAwCb+K,EAvCM,SAASC,EAASC,EAAU/M,GACrC,IAAIgN,EAAgB,GAChBC,GAAY,EACZC,GAAU,EACd,SAASC,IACR,GAAIF,EAAW,MAAM,IAAIvO,MAAM,+BAC/BuO,GAAY,EACZ,IAAK,IAAI1Q,EAAI,EAAGA,EAAIyQ,EAAc3Q,OAAQE,GAAK,EAC9C,IAAMuQ,EAAQE,EAAczQ,GAAIvB,EAAMgS,EAAczQ,EAAI,IAAK6P,GAC7D,MAAO/L,GAAKL,EAAQC,MAAMI,GAE3B4M,GAAY,EAEb,SAASb,IACHc,IACJA,GAAU,EACVH,GAAS,WACRG,GAAU,EACVC,QAmBH,OAfAf,EAAOe,KAAOA,EAeP,CAACC,MAdR,SAAeC,EAAMC,GACpB,GAAiB,MAAbA,GAAuC,MAAlBA,EAAU7O,MAAqC,mBAAd6O,EACzD,MAAM,IAAI9Q,UAAU,gEAErB,IAAI+Q,EAAQP,EAAcjC,QAAQsC,GAC9BE,GAAS,IACZP,EAAcQ,OAAOD,EAAO,GAC5BT,EAAQO,EAAM,GAAIjB,IAEF,MAAbkB,IACHN,EAAcjQ,KAAKsQ,EAAMC,GACzBR,EAAQO,EAAMrS,EAAMsS,GAAYlB,KAGZA,OAAQA,GAEZqB,CAAIxL,EAAQyL,sBAAuB1N,SAClD2N,EAAmB,SAAStQ,GAC/B,GAA+C,oBAA3C0H,OAAOrE,UAAUiI,SAASrL,KAAKD,GAA+B,MAAO,GACzE,IAAIuQ,EAAO,GACX,IAAK,IAAIC,KAAQxQ,EAChByQ,EAAYD,EAAMxQ,EAAOwQ,IAE1B,OAAOD,EAAK1P,KAAK,KACjB,SAAS4P,EAAYD,EAAME,GAC1B,GAAI/R,MAAMC,QAAQ8R,GACjB,IAAK,IAAIxR,EAAI,EAAGA,EAAIwR,EAAO1R,OAAQE,IAClCuR,EAAYD,EAAO,IAAMtR,EAAI,IAAKwR,EAAOxR,SAGtC,GAA+C,oBAA3CwI,OAAOrE,UAAUiI,SAASrL,KAAKyQ,GACvC,IAAK,IAAIxR,KAAKwR,EACbD,EAAYD,EAAO,IAAMtR,EAAI,IAAKwR,EAAOxR,SAGtCqR,EAAK7Q,KAAKiR,mBAAmBH,IAAmB,MAAVE,GAA6B,KAAXA,EAAgB,IAAMC,mBAAmBD,GAAU,OAG9GE,EAASlJ,OAAOkJ,QAAU,SAASC,EAAQtC,GAC3CA,GAAQ7G,OAAOoJ,KAAKvC,GAAQwC,SAAQ,SAASC,GAAQH,EAAOG,GAAQzC,EAAOyC,OAG3EC,EAAgB,SAASC,EAAUC,GACtC,GAAI,wBAA0BC,KAAKF,GAClC,MAAM,IAAIG,YAAY,gDAEvB,GAAc,MAAVF,EAAgB,OAAOD,EAC3B,IAAII,EAAaJ,EAASxD,QAAQ,KAC9B6D,EAAYL,EAASxD,QAAQ,KAC7B8D,EAAWD,EAAY,EAAIL,EAASlS,OAASuS,EAC7CE,EAAUH,EAAa,EAAIE,EAAWF,EACtCI,EAAOR,EAAS/D,MAAM,EAAGsE,GACzBE,EAAQ,GACZf,EAAOe,EAAOR,GACd,IAAIS,EAAWF,EAAK/Q,QAAQ,yBAAyB,SAASkR,EAAIC,EAAMC,GAGvE,cAFOJ,EAAMG,GAEO,MAAhBX,EAAOW,GAAsBD,EAE1BE,EAAWZ,EAAOW,GAAQnB,mBAAmB7R,OAAOqS,EAAOW,QAG/DE,EAAgBJ,EAASlE,QAAQ,KACjCuE,EAAeL,EAASlE,QAAQ,KAChCwE,EAAcD,EAAe,EAAIL,EAAS5S,OAASiT,EACnDE,EAAaH,EAAgB,EAAIE,EAAcF,EAC/CI,EAAUR,EAASzE,MAAM,EAAGgF,GAC5Bb,GAAc,IAAGc,GAAWlB,EAAS/D,MAAMmE,EAAYE,IACvDQ,GAAiB,IAAGI,IAAYd,EAAa,EAAI,IAAM,KAAOM,EAASzE,MAAM6E,EAAeE,IAChG,IAAIG,EAAc/B,EAAiBqB,GAInC,OAHIU,IAAaD,IAAYd,EAAa,GAAKU,EAAgB,EAAI,IAAM,KAAOK,GAC5Ed,GAAa,IAAGa,GAAWlB,EAAS/D,MAAMoE,IAC1CU,GAAgB,IAAGG,IAAYb,EAAY,EAAI,GAAK,KAAOK,EAASzE,MAAM8E,IACvEG,GA6KJE,EA3KM,SAASzN,EAASH,EAAS6N,GACpC,IAAIC,EAAgB,EACpB,SAASC,EAAa7Q,GACrB,OAAO,IAAI8C,EAAQ9C,GAOpB,SAAS8Q,EAAYC,GACpB,OAAO,SAASC,EAAKrC,GACD,iBAARqC,GAAoBrC,EAAOqC,EAAKA,EAAMA,EAAIA,KACpC,MAARrC,IAAcA,EAAO,IAC9B,IAAIsC,EAAW,IAAInO,GAAQ,SAASZ,EAASC,GAC5C4O,EAAQ1B,EAAc2B,EAAKrC,EAAKY,QAASZ,GAAM,SAAUuC,GACxD,GAAyB,mBAAdvC,EAAKhQ,KACf,GAAI5B,MAAMC,QAAQkU,GACjB,IAAK,IAAI5T,EAAI,EAAGA,EAAI4T,EAAK9T,OAAQE,IAChC4T,EAAK5T,GAAK,IAAIqR,EAAKhQ,KAAKuS,EAAK5T,SAG1B4T,EAAO,IAAIvC,EAAKhQ,KAAKuS,GAE3BhP,EAAQgP,KACN/O,MAEJ,IAAwB,IAApBwM,EAAKwC,WAAqB,OAAOF,EACrC,IAAIxO,EAAQ,EACZ,SAAS2O,IACQ,KAAV3O,GAAuC,mBAAjBkO,GAA6BA,IAE1D,OACA,SAASU,EAAKJ,GACb,IAAIK,EAAQL,EAASnQ,KAkBrB,OAVAmQ,EAASM,YAAcV,EACvBI,EAASnQ,KAAO,WACf2B,IACA,IAAI+O,EAAQF,EAAM5R,MAAMuR,EAAUtT,WAKlC,OAJA6T,EAAM1Q,KAAKsQ,GAAU,SAAShQ,GAE7B,GADAgQ,IACc,IAAV3O,EAAa,MAAMrB,KAEjBiQ,EAAKG,IAENP,EApBDI,CAAKJ,IAwBd,SAASQ,EAAU9C,EAAM+C,GACxB,IAAK,IAAIC,KAAQhD,EAAKiD,QACrB,GAAI,GAAG1T,eAAeG,KAAKsQ,EAAKiD,QAASD,IAASD,EAAKlC,KAAKmC,GAAO,OAAO,EAE3E,OAAO,EAER,OAtDAd,EAAapP,UAAYqB,EAAQrB,UACjCoP,EAAagB,UAAY/O,EAqDlB,CACN4N,QAASI,GAAY,SAASE,EAAKrC,EAAMzM,EAASC,GACjD,IAKqB2P,EALjBC,EAAwB,MAAfpD,EAAKoD,OAAiBpD,EAAKoD,OAAOC,cAAgB,MAC3DC,EAAOtD,EAAKsD,KACZC,IAAgC,MAAlBvD,EAAKwD,WAAqBxD,EAAKwD,YAAcC,KAAKD,WAAgBF,aAAgBhP,EAAQoP,UACxGC,EAAe3D,EAAK2D,eAAyC,mBAAjB3D,EAAK4D,QAAyB,GAAK,QAC/EC,EAAM,IAAIvP,EAAQwP,eAAkBC,GAAU,EAC9CC,EAAYH,EACZI,EAAQJ,EAAII,MAehB,IAAK,IAAIjB,KAdTa,EAAII,MAAQ,WACXF,GAAU,EACVE,EAAMvU,KAAKT,OAEZ4U,EAAIK,KAAKd,EAAQf,GAAoB,IAAfrC,EAAKmE,MAAsC,iBAAdnE,EAAKoE,KAAoBpE,EAAKoE,UAAOtW,EAAoC,iBAAlBkS,EAAKqE,SAAwBrE,EAAKqE,cAAWvW,GACnJyV,GAAsB,MAARD,IAAiBR,EAAU9C,EAAM,sBAClD6D,EAAIS,iBAAiB,eAAgB,mCAEN,mBAArBtE,EAAKuE,aAA+BzB,EAAU9C,EAAM,cAC9D6D,EAAIS,iBAAiB,SAAU,4BAE5BtE,EAAKwE,kBAAiBX,EAAIW,gBAAkBxE,EAAKwE,iBACjDxE,EAAKyE,UAASZ,EAAIY,QAAUzE,EAAKyE,SACrCZ,EAAIF,aAAeA,EACF3D,EAAKiD,SACjB,IAAG1T,eAAeG,KAAKsQ,EAAKiD,QAASD,IACxCa,EAAIS,iBAAiBtB,EAAMhD,EAAKiD,QAAQD,IAG1Ca,EAAIa,mBAAqB,SAASrG,GAEjC,IAAI0F,GACyB,IAAzB1F,EAAGiC,OAAOqE,WACb,IACC,IAMmCC,EAN/BC,EAAWxG,EAAGiC,OAAOwE,QAAU,KAAOzG,EAAGiC,OAAOwE,OAAS,KAA6B,MAArBzG,EAAGiC,OAAOwE,QAAkB,cAAgBjE,KAAKwB,GAMlH0C,EAAW1G,EAAGiC,OAAOyE,SAmBzB,GAlBqB,SAAjBpB,EAGEtF,EAAGiC,OAAOqD,cAAwC,mBAAjB3D,EAAK4D,UAAwBmB,EAAWtB,KAAKuB,MAAM3G,EAAGiC,OAAO2E,eACxFtB,GAAiC,SAAjBA,GAMX,MAAZoB,IAAkBA,EAAW1G,EAAGiC,OAAO2E,cAEhB,mBAAjBjF,EAAK4D,SACfmB,EAAW/E,EAAK4D,QAAQvF,EAAGiC,OAAQN,GACnC6E,GAAU,GAC4B,mBAArB7E,EAAKuE,cACtBQ,EAAW/E,EAAKuE,YAAYQ,IAEzBF,EAAStR,EAAQwR,OAChB,CACJ,IAAMH,EAAUvG,EAAGiC,OAAO2E,aAC1B,MAAOxS,GAAKmS,EAAUG,EACtB,IAAI1S,EAAQ,IAAIvB,MAAM8T,GACtBvS,EAAM6S,KAAO7G,EAAGiC,OAAOwE,OACvBzS,EAAM0S,SAAWA,EACjBvR,EAAOnB,IAGT,MAAOI,GACNe,EAAOf,KAIiB,mBAAhBuN,EAAKmF,SACftB,EAAM7D,EAAKmF,OAAOtB,EAAK7D,EAAMqC,IAAQwB,KAEzBG,IACXb,EAAgBU,EAAII,MACpBJ,EAAII,MAAQ,WACXF,GAAU,EACVZ,EAAczT,KAAKT,QAIV,MAARqU,EAAcO,EAAIuB,OACa,mBAAnBpF,EAAKwD,UAA0BK,EAAIuB,KAAKpF,EAAKwD,UAAUF,IAC9DA,aAAgBhP,EAAQoP,SAAUG,EAAIuB,KAAK9B,GAC/CO,EAAIuB,KAAK3B,KAAK4B,UAAU/B,OAE9BgC,MAAOnD,GAAY,SAASE,EAAKrC,EAAMzM,EAASC,GAC/C,IAAI+R,EAAevF,EAAKuF,cAAgB,YAAcC,KAAKC,MAAsB,KAAhBD,KAAKE,UAAmB,IAAMzD,IAC3F0D,EAASrR,EAAQG,SAASiC,cAAc,UAC5CpC,EAAQiR,GAAgB,SAAShD,UACzBjO,EAAQiR,GACfI,EAAO/J,WAAWW,YAAYoJ,GAC9BpS,EAAQgP,IAEToD,EAAO9S,QAAU,kBACTyB,EAAQiR,GACfI,EAAO/J,WAAWW,YAAYoJ,GAC9BnS,EAAO,IAAI1C,MAAM,0BAElB6U,EAAOC,IAAMvD,GAAOA,EAAIlF,QAAQ,KAAO,EAAI,IAAM,KAChDiD,mBAAmBJ,EAAK6F,aAAe,YAAc,IACrDzF,mBAAmBmF,GACpBjR,EAAQG,SAASqR,gBAAgBxN,YAAYqN,OAIlCI,CAAI7R,OAAQ9C,EAAiB6N,EAAaT,QACpDwH,EAAc/G,EACdgH,EAAI,WAAe,OAAOrV,EAAYG,MAAM9B,KAAMD,YACtDiX,EAAEA,EAAIrV,EACNqV,EAAEjV,MAAQJ,EAAYI,MACtBiV,EAAE/U,SAAWN,EAAYM,SACzB+U,EAAEzG,MAAQwG,EAAYxG,MACtB,IAAI0G,EAAKtV,EACLuD,EAAU/C,EACV+U,EAAmB,SAASC,GAC/B,GAAe,KAAXA,GAA2B,MAAVA,EAAgB,MAAO,GACnB,MAArBA,EAAOC,OAAO,KAAYD,EAASA,EAAOxJ,MAAM,IAEpD,IADA,IAAI0J,EAAUF,EAAOG,MAAM,KAAMC,EAAW,GAAIC,EAAQ,GAC/C9X,EAAI,EAAGA,EAAI2X,EAAQ7X,OAAQE,IAAK,CACxC,IAAI+X,EAAQJ,EAAQ3X,GAAG4X,MAAM,KACzBI,EAAOC,mBAAmBF,EAAM,IAChCG,EAA0B,IAAjBH,EAAMjY,OAAemY,mBAAmBF,EAAM,IAAM,GAClD,SAAXG,EAAmBA,GAAS,EACZ,UAAXA,IAAoBA,GAAS,GACtC,IAAIC,EAASH,EAAKJ,MAAM,YACpBQ,EAASN,EACTE,EAAKxJ,QAAQ,MAAQ,GAAG2J,EAAOE,MACnC,IAAK,IAAIC,EAAK,EAAGA,EAAKH,EAAOrY,OAAQwY,IAAM,CAC1C,IAAIC,EAAQJ,EAAOG,GAAKE,EAAYL,EAAOG,EAAK,GAC5CG,EAAwB,IAAbD,IAAoBE,MAAMC,SAASH,EAAW,KAC7D,GAAc,KAAVD,EAEmB,MAAlBV,EADAG,EAAOG,EAAOlK,MAAM,EAAGqK,GAAI3W,UAE9BkW,EAASG,GAAQvY,MAAMC,QAAQ0Y,GAAUA,EAAOtY,OAAS,GAE1DyY,EAAQV,EAASG,UAGb,GAAc,cAAVO,EAAuB,MAChC,GAAID,IAAOH,EAAOrY,OAAS,EAAGsY,EAAOG,GAASL,MACzC,CAGJ,IAAIU,EAAOpQ,OAAOqQ,yBAAyBT,EAAQG,GACvC,MAARK,IAAcA,EAAOA,EAAKtX,OAClB,MAARsX,IAAcR,EAAOG,GAASK,EAAOH,EAAW,GAAK,IACzDL,EAASQ,IAIZ,OAAOd,GAGJgB,EAAgB,SAASpF,GAC5B,IAAIqF,EAAcrF,EAAIlF,QAAQ,KAC1BwK,EAAatF,EAAIlF,QAAQ,KACzByK,EAAYD,EAAa,EAAItF,EAAI5T,OAASkZ,EAC1CE,EAAWH,EAAc,EAAIE,EAAYF,EACzCI,EAAQzF,EAAIzF,MAAM,EAAGiL,GAAUzX,QAAQ,UAAW,KAMtD,OALK0X,GAEa,MAAbA,EAAM,KAAYA,EAAQ,IAAMA,GAChCA,EAAMrZ,OAAS,GAAiC,MAA5BqZ,EAAMA,EAAMrZ,OAAS,KAAYqZ,EAAQA,EAAMlL,MAAM,GAAI,KAHtEkL,EAAQ,IAKb,CACN3G,KAAM2G,EACNlH,OAAQ8G,EAAc,EACnB,GACAvB,EAAiB9D,EAAIzF,MAAM8K,EAAc,EAAGE,MA0C7CG,EAAY,GAuOhB9B,EAAE+B,MAtOQ,SAAS1T,EAAS2T,GAC3B,IAAIC,EACJ,SAASC,EAAQC,EAAO7F,EAAM8F,GAE7B,GADAD,EAAQ1H,EAAc0H,EAAO7F,GACZ,MAAb2F,EAAmB,CACtBA,IACA,IAAIna,EAAQsa,EAAUA,EAAQta,MAAQ,KAClCua,EAAQD,EAAUA,EAAQC,MAAQ,KAClCD,GAAWA,EAAQjY,QAASkE,EAAQiU,QAAQC,aAAaza,EAAOua,EAAON,EAAMS,OAASL,GACrF9T,EAAQiU,QAAQG,UAAU3a,EAAOua,EAAON,EAAMS,OAASL,QAG5D9T,EAAQqU,SAASC,KAAOZ,EAAMS,OAASL,EAGzC,IAAiC1I,EAAWmJ,EAAQC,EAAaC,EAA7DC,EAAkBjB,EAClBkB,EAAOjB,EAAMiB,KAAO,GACxB,SAASjB,EAAMvI,EAAMyJ,EAAcC,GAClC,GAAY,MAAR1J,EAAc,MAAM,IAAI3O,MAAM,wEAIlC,IAeIsY,EAfArb,EAAQ,EACRsb,EAAWlS,OAAOoJ,KAAK4I,GAAQ7P,KAAI,SAAS0O,GAC/C,GAAiB,MAAbA,EAAM,GAAY,MAAM,IAAIlH,YAAY,gCAC5C,GAAI,wBAA0BD,KAAKmH,GAClC,MAAM,IAAIlH,YAAY,wEAEvB,MAAO,CACNkH,MAAOA,EACPtI,UAAWyJ,EAAOnB,GAClBsB,OAlE2B3I,EAkEJqH,EAjEtBuB,EAAe9B,EAAc9G,GAC7B6I,EAAerS,OAAOoJ,KAAKgJ,EAAa3I,QACxCL,EAAO,GACPkJ,EAAS,IAAIC,OAAO,IAAMH,EAAapI,KAAK/Q,QAK/C,sDACA,SAASuZ,EAAIC,EAAMC,GAClB,OAAY,MAARD,EAAqB,KAAOD,GAChCpJ,EAAKpR,KAAK,CAAC2a,EAAGF,EAAMG,EAAa,QAAVF,IACT,QAAVA,EAAwB,OACd,MAAVA,EAAsB,aACnB,WAAaA,GAAS,QAE3B,KACG,SAASG,GAGf,IAAK,IAAIrb,EAAI,EAAGA,EAAI6a,EAAa/a,OAAQE,IACxC,GAAI4a,EAAa3I,OAAO4I,EAAa7a,MAAQqb,EAAMpJ,OAAO4I,EAAa7a,IAAK,OAAO,EAGpF,IAAK4R,EAAK9R,OAAQ,OAAOgb,EAAO5I,KAAKmJ,EAAM7I,MAC3C,IAAIpN,EAAS0V,EAAO1Z,KAAKia,EAAM7I,MAC/B,GAAc,MAAVpN,EAAgB,OAAO,EAC3B,IAASpF,EAAI,EAAGA,EAAI4R,EAAK9R,OAAQE,IAChCqb,EAAMpJ,OAAOL,EAAK5R,GAAGmb,GAAKvJ,EAAK5R,GAAGob,EAAIhW,EAAOpF,EAAI,GAAKiY,mBAAmB7S,EAAOpF,EAAI,IAErF,OAAO,KA/Ba,IAASgS,EAC1B4I,EACAC,EACAjJ,EACAkJ,KAiECQ,EAAqC,mBAAjBnY,aAA8BA,aAAeC,WACjEmY,EAAI/V,EAAQZ,UACZ4W,GAAY,EAGhB,GADAjC,EAAY,KACQ,MAAhBgB,EAAsB,CACzB,IAAIkB,EAAc3C,EAAcyB,GAChC,IAAKG,EAASgB,MAAK,SAAU1b,GAAK,OAAOA,EAAE2a,MAAMc,MAChD,MAAM,IAAIE,eAAe,gDAG3B,SAASC,IACRJ,GAAY,EAGZ,IAAI1B,EAASnU,EAAQqU,SAAS6B,KACN,MAApBxC,EAAMS,OAAO,KAChBA,EAASnU,EAAQqU,SAAS8B,OAAShC,EACX,MAApBT,EAAMS,OAAO,IAEE,OADlBA,EAASnU,EAAQqU,SAAS+B,SAAWjC,GAC1B,KAAYA,EAAS,IAAMA,IAMxC,IAAIL,EAAQK,EAAOkC,SACjBva,QAAQ,2BAA4BwW,oBACpChK,MAAMoL,EAAMS,OAAOha,QACjB8T,EAAOkF,EAAcW,GAEzB,SAASwC,IACR,GAAIxC,IAAUc,EAAc,MAAM,IAAIpY,MAAM,mCAAqCoY,GACjFf,EAAQe,EAAc,KAAM,CAAC9Y,SAAS,IAHvCiQ,EAAOkC,EAAK3B,OAAQtM,EAAQiU,QAAQxa,OAMpC,SAAS8c,EAAKlc,GAIb,KAAOA,EAAI0a,EAAS5a,OAAQE,IAC3B,GAAI0a,EAAS1a,GAAG2a,MAAM/G,GAAO,CAC5B,IAAIuI,EAAUzB,EAAS1a,GAAG+Q,UACtBqL,EAAe1B,EAAS1a,GAAGqZ,MAC3BgD,EAAYF,EACZG,EAASlC,EAAa,SAASmC,GAClC,GAAID,IAAWlC,EAAf,CACA,GAAImC,IAASjC,EAAM,OAAO4B,EAAKlc,EAAI,GACnC+Q,EAAoB,MAARwL,GAAsC,mBAAdA,EAAKra,MAAuC,mBAATqa,EAA6B,MAAPA,EAC7FrC,EAAStG,EAAK3B,OAAQkI,EAAcV,EAAOW,EAAa,KACxDC,EAAkB8B,EAAQzW,OAASyW,EAAU,KAC/B,IAAV/c,EAAaka,EAAczJ,UAE9BzQ,EAAQ,EACRka,EAAczJ,OAAOe,UAevB,YAVIuL,EAAQja,MAA2B,mBAAZia,GAC1BA,EAAU,GACVG,EAAOD,IAECF,EAAQK,QAChBjB,EAAE/X,MAAK,WACN,OAAO2Y,EAAQK,QAAQ5I,EAAK3B,OAAQwH,EAAO2C,MACzC5Y,KAAK8Y,EAAQL,GAEZK,EAAO,QAIdL,IArCDC,CAAK,GA8DN,OAlBA3C,EAAY,WACNiC,IACJA,GAAY,EACZF,EAAWM,KAG4B,mBAA9BjW,EAAQiU,QAAQG,WAC1BU,EAAY,WACX9U,EAAQwJ,oBAAoB,WAAYoK,GAAW,IAEpD5T,EAAQyJ,iBAAiB,WAAYmK,GAAW,IAClB,MAApBF,EAAMS,OAAO,KACvBP,EAAY,KACZkB,EAAY,WACX9U,EAAQwJ,oBAAoB,aAAcyM,GAAc,IAEzDjW,EAAQyJ,iBAAiB,aAAcwM,GAAc,IAE/CtC,EAAczI,MAAMC,EAAM,CAChC7E,eAAgB,WAEf,UADA7M,EAAQA,EAAQ,EAAI,IACDga,IAAciB,IAElC9K,SAAUqM,EACVjO,SAAU8M,EACVvY,KAAM,WACL,GAAK9C,GAASga,IAAciB,EAA5B,CAEA,IAAIoC,EAAS,CAAChe,EAAMsS,EAAWmJ,EAAOvb,IAAKub,IAE3C,OADIG,IAAiBoC,EAASpC,EAAgB3U,OAAO+W,EAAO,KACrDA,MAqFV,OAjFApD,EAAMqD,IAAM,SAASjD,EAAO7F,EAAM8F,GACf,MAAdU,KACHV,EAAUA,GAAW,IACbjY,SAAU,GAEnB2Y,EAAa,KACbZ,EAAQC,EAAO7F,EAAM8F,IAEtBL,EAAMsD,IAAM,WAAY,OAAOxC,GAC/Bd,EAAMS,OAAS,KACfT,EAAMuD,KAAO,CACZ1a,KAAM,SAASua,GACd,IAEiBI,EAAS5C,EAFtBP,EAAU+C,EAAOzd,MAAM0a,QAEvBQ,EAAS,GACbxI,EAAOwI,EAAQuC,EAAOzd,OAGtBkb,EAAOjZ,SAAWiZ,EAAOR,QAAUQ,EAAOvb,IAAMub,EAAO5K,OACvD4K,EAAO3K,SAAW2K,EAAOjO,eAAiBiO,EAAO1K,SACjD0K,EAAOzM,eAAiByM,EAAOvM,SAAW,KAI1C,IAAImP,EAASvF,EAAGkF,EAAOzd,MAAMiC,UAAY,IAAKiZ,EAAQuC,EAAOxd,UAmD7D,OA5CI6d,EAAO9d,MAAM+d,SAAWC,QAAQF,EAAO9d,MAAM+d,YAChDD,EAAO9d,MAAMib,KAAO,KACpB6C,EAAO9d,MAAM,iBAAmB,OAGhC8d,EAAO9d,MAAM6d,QAAU,OAEvBA,EAAUC,EAAO9d,MAAM6d,QACvB5C,EAAO6C,EAAO9d,MAAMib,KACpB6C,EAAO9d,MAAMib,KAAOZ,EAAMS,OAASG,EACnC6C,EAAO9d,MAAM6d,QAAU,SAAS/Y,GAC/B,IAAImZ,EACmB,mBAAZJ,EACVI,EAAUJ,EAAQ9b,KAAK+C,EAAE8L,cAAe9L,GACnB,MAAX+Y,GAAsC,iBAAZA,GAEK,mBAAxBA,EAAQpN,aACzBoN,EAAQpN,YAAY3L,IAaR,IAAZmZ,GAAsBnZ,EAAEoZ,kBAEV,IAAbpZ,EAAEqZ,QAA4B,IAAZrZ,EAAEsZ,OAA2B,IAAZtZ,EAAEsZ,OAEpCtZ,EAAE8L,cAAc+B,QAAqC,UAA3B7N,EAAE8L,cAAc+B,QAE3C7N,EAAEuZ,SAAYvZ,EAAEwZ,SAAYxZ,EAAEyZ,UAAazZ,EAAE0Z,SAE9C1Z,EAAEgM,iBACFhM,EAAE+L,QAAS,EACXwJ,EAAMqD,IAAIzC,EAAM,KAAMP,MAIlBoD,IAGTzD,EAAMoE,MAAQ,SAASC,GACtB,OAAOxD,GAAkB,MAARwD,EAAexD,EAAOwD,GAAQxD,GAEzCb,EAEEsE,CAAIpY,OAAQ8R,GACtBC,EAAE5R,OAASA,EACX4R,EAAEzH,OAASwH,EAAYxH,OACvByH,EAAElE,QAAUA,EAAQA,QACpBkE,EAAEX,MAAQvD,EAAQuD,MAClBW,EAAEE,iBAAmBA,EACrBF,EAAElG,iBAAmBA,EACrBkG,EAAEwB,cAAgBA,EAClBxB,EAAEvF,cAAgBA,EAClBuF,EAAEzV,MAAQpD,EACV6Y,EAAE7U,gBAAkBA,EACemb,EAAgB,QAAItG,EA/yDtD,I,uDCkBD,QClBe,SAAkCxG,GAChD,IAAIxF,EACAuS,EAAS/M,EAAK+M,OAalB,MAXsB,mBAAXA,EACNA,EAAOC,WACVxS,EAASuS,EAAOC,YAEhBxS,EAASuS,EAAO,cAChBA,EAAOC,WAAaxS,GAGrBA,EAAS,eAGHA,EDEK,CAZO,oBAAT3I,KACFA,KACoB,oBAAX4C,OACTA,YACoB,IAAX,EAAAE,EACT,EAAAA,EAEAmY,KEXLG,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB9e,IAAjB+e,EACH,OAAOA,EAAaC,QAGrB,IAAIP,EAASG,EAAyBE,GAAY,CACjD1c,GAAI0c,EACJG,QAAQ,EACRD,QAAS,IAUV,OANAE,EAAoBJ,GAAUL,EAAQA,EAAOO,QAASH,GAGtDJ,EAAOQ,QAAS,EAGTR,EAAOO,QCvBfH,EAAoBM,EAAKV,IACxB,IAAIW,EAASX,GAAUA,EAAOY,WAC7B,IAAOZ,EAAiB,QACxB,IAAM,EAEP,OADAI,EAAoBS,EAAEF,EAAQ,CAAElT,EAAGkT,IAC5BA,GCLRP,EAAoBS,EAAI,CAACN,EAASO,KACjC,IAAI,IAAI/f,KAAO+f,EACXV,EAAoB9T,EAAEwU,EAAY/f,KAASqf,EAAoB9T,EAAEiU,EAASxf,IAC5E6J,OAAOmW,eAAeR,EAASxf,EAAK,CAAEigB,YAAY,EAAMjC,IAAK+B,EAAW/f,MCJ3Eqf,EAAoBvY,EAAI,WACvB,GAA0B,iBAAfoZ,WAAyB,OAAOA,WAC3C,IACC,OAAOve,MAAQ,IAAIwe,SAAS,cAAb,GACd,MAAOhb,GACR,GAAsB,iBAAXyB,OAAqB,OAAOA,QALjB,GCAxByY,EAAoBe,IAAOnB,KAC1BA,EAASpV,OAAOC,OAAOmV,IACX3e,WAAU2e,EAAO3e,SAAW,IACxCuJ,OAAOmW,eAAef,EAAQ,UAAW,CACxCgB,YAAY,EACZlC,IAAK,KACJ,MAAM,IAAIva,MAAM,0FAA4Fyb,EAAOrc,OAG9Gqc,GCTRI,EAAoB9T,EAAI,CAAC8U,EAAKC,IAAUzW,OAAOrE,UAAUvD,eAAeG,KAAKie,EAAKC,G,uBC6I9EC,E,kBA3IJ,SAASC,EAAgBH,EAAKrgB,EAAK2C,GAYjC,OAXI3C,KAAOqgB,EACTxW,OAAOmW,eAAeK,EAAKrgB,EAAK,CAC9B2C,MAAOA,EACPsd,YAAY,EACZQ,cAAc,EACdC,UAAU,IAGZL,EAAIrgB,GAAO2C,EAGN0d,EAGT,SAASM,IAeP,OAdAA,EAAW9W,OAAOkJ,QAAU,SAAUC,GACpC,IAAK,IAAI3R,EAAI,EAAGA,EAAIK,UAAUP,OAAQE,IAAK,CACzC,IAAIqP,EAAShP,UAAUL,GAEvB,IAAK,IAAIrB,KAAO0Q,EACV7G,OAAOrE,UAAUvD,eAAeG,KAAKsO,EAAQ1Q,KAC/CgT,EAAOhT,GAAO0Q,EAAO1Q,IAK3B,OAAOgT,IAGOvP,MAAM9B,KAAMD,WAG9B,SAASkf,EAAQze,EAAQ0e,GACvB,IAAI5N,EAAOpJ,OAAOoJ,KAAK9Q,GAEvB,GAAI0H,OAAOiX,sBAAuB,CAChC,IAAIC,EAAUlX,OAAOiX,sBAAsB3e,GACvC0e,IAAgBE,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAOpX,OAAOqQ,yBAAyB/X,EAAQ8e,GAAKhB,eAEtDhN,EAAKpR,KAAK4B,MAAMwP,EAAM8N,GAGxB,OAAO9N,EAGT,SAASiO,EAAelO,GACtB,IAAK,IAAI3R,EAAI,EAAGA,EAAIK,UAAUP,OAAQE,IAAK,CACzC,IAAIqP,EAAyB,MAAhBhP,UAAUL,GAAaK,UAAUL,GAAK,GAE/CA,EAAI,EACNuf,EAAQ/W,OAAO6G,IAAS,GAAMwC,SAAQ,SAAUlT,GAC9CwgB,EAAgBxN,EAAQhT,EAAK0Q,EAAO1Q,OAE7B6J,OAAOsX,0BAChBtX,OAAOuX,iBAAiBpO,EAAQnJ,OAAOsX,0BAA0BzQ,IAEjEkQ,EAAQ/W,OAAO6G,IAASwC,SAAQ,SAAUlT,GACxC6J,OAAOmW,eAAehN,EAAQhT,EAAK6J,OAAOqQ,yBAAyBxJ,EAAQ1Q,OAKjF,OAAOgT,EAGT,SAASqO,EAAeC,EAAKjgB,GAC3B,OAWF,SAAyBigB,GACvB,GAAIxgB,MAAMC,QAAQugB,GAAM,OAAOA,EAZxBC,CAAgBD,IAmBzB,SAA+BA,EAAKjgB,GAClC,GAAsB,oBAAX6d,UAA4BA,OAAOsC,YAAY3X,OAAOyX,IAAO,OACxE,IAAIG,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAKphB,EAET,IACE,IAAK,IAAiCqhB,EAA7BC,EAAKR,EAAIpC,OAAOsC,cAAmBE,GAAMG,EAAKC,EAAG/b,QAAQgc,QAChEN,EAAK5f,KAAKggB,EAAGlf,QAETtB,GAAKogB,EAAKtgB,SAAWE,GAH8CqgB,GAAK,IAK9E,MAAOM,GACPL,GAAK,EACLC,EAAKI,EARP,QAUE,IACON,GAAsB,MAAhBI,EAAE,QAAoBA,EAAE,SADrC,QAGE,GAAIH,EAAI,MAAMC,GAIlB,OAAOH,EA3CwBQ,CAAsBX,EAAKjgB,IAAM6gB,EAA4BZ,EAAKjgB,IAmEnG,WACE,MAAM,IAAIC,UAAU,6IApEmF6gB,GAGzG,SAASC,EAAmBd,GAC1B,OAGF,SAA4BA,GAC1B,GAAIxgB,MAAMC,QAAQugB,GAAM,OAAOe,EAAkBf,GAJ1CgB,CAAmBhB,IAW5B,SAA0BiB,GACxB,GAAsB,oBAAXrD,QAA0BA,OAAOsC,YAAY3X,OAAO0Y,GAAO,OAAOzhB,MAAM0hB,KAAKD,GAZtDE,CAAiBnB,IAAQY,EAA4BZ,IA2DzF,WACE,MAAM,IAAIhgB,UAAU,wIA5D2EohB,GA0CjG,SAASR,EAA4B3W,EAAGoX,GACtC,GAAKpX,EAAL,CACA,GAAiB,iBAANA,EAAgB,OAAO8W,EAAkB9W,EAAGoX,GACvD,IAAIhD,EAAI9V,OAAOrE,UAAUiI,SAASrL,KAAKmJ,GAAG+D,MAAM,GAAI,GAEpD,MADU,WAANqQ,GAAkBpU,EAAE+J,cAAaqK,EAAIpU,EAAE+J,YAAYG,MAC7C,QAANkK,GAAqB,QAANA,EAAoB7e,MAAM0hB,KAAKjX,GACxC,cAANoU,GAAqB,2CAA2CpM,KAAKoM,GAAW0C,EAAkB9W,EAAGoX,QAAzG,GAGF,SAASN,EAAkBf,EAAKsB,IACnB,MAAPA,GAAeA,EAAMtB,EAAIngB,UAAQyhB,EAAMtB,EAAIngB,QAE/C,IAAK,IAAIE,EAAI,EAAGwhB,EAAO,IAAI/hB,MAAM8hB,GAAMvhB,EAAIuhB,EAAKvhB,IAAKwhB,EAAKxhB,GAAKigB,EAAIjgB,GAEnE,OAAOwhB,EAYT,IAAIzgB,EAAO+d,SAAS3a,UAAUpD,KAAK8C,KAAKib,SAAS3a,UAAUpD,MAEvD0gB,EAAiB,WACnB,OACEnK,cAIAoK,EAAa,SAAoBC,GACnC,IAAIviB,EAAQ8f,EACR0C,EAAYxiB,EAAMwiB,YAClBC,EAAWziB,EAAM0iB,WAAWF,IAAc,GAC1CG,OAA2B5iB,IAATwiB,KACpBliB,MAAMC,QAAQiiB,KAAQA,EAAK7hB,OAAS,GAAK6hB,EAAKK,OAAM,SAAUC,EAAGjiB,GACjE,OAAOiiB,IAAMJ,EAAS7hB,OAErBZ,EAAM8iB,OAOT,YAJa/iB,IAATwiB,IACFviB,EAAM0iB,WAAWF,GAAaD,GAGzBI,GAGLI,EAAS,WACX,IAAIC,EAAU/hB,UAAUP,OAAS,QAAsBX,IAAjBkB,UAAU,IAAmBA,UAAU,GAC7E,OAAO,SAAU4D,EAAI0d,GACnB,IAAIviB,EAAQ8f,EAGZ,GAFsBwC,EAAWC,GAEZ,CACnB,IAAIC,EAAYxiB,EAAMwiB,UAElBS,EAAgB,WAClB,IAAIC,EAAWre,IAES,mBAAbqe,IAETljB,EAAMmjB,UAAU7F,IAAIkF,EAAWU,GAE/BljB,EAAMmjB,UAAU7F,IAAI,IAAK+E,KAKzBa,EAAWljB,EAAMmjB,UAAU5F,IAAIiF,GAEnC,IAC0B,mBAAbU,GACTA,IAFJ,QAKEljB,EAAMmjB,UAAN,OAA0BX,GAG5BxiB,EAAMojB,QAAQhiB,KAAK4hB,EAAU,WAC3B,OAAO,IAAI5c,SAAQ,SAAUZ,GAC3B,OAAOuM,sBAAsBvM,MAC5BpB,KAAK6e,IACNA,MAKNI,EAAc,SAAqBC,EAAcC,GACnD,IAAIvjB,EAAQ8f,EACRlO,EAAQ5R,EAAMwjB,cAMlB,OAJKxjB,EAAM8iB,QACT9iB,EAAMyjB,OAAO7R,GAAS0R,GAGjB,CAACtjB,EAAMyjB,OAAO7R,GAAQ,SAAU1P,GACrC,IAAIwhB,EAAgB1jB,EAAMyjB,OAAO7R,GAC7B+R,EAAWJ,EAAaA,EAAWrhB,EAAO0P,GAAS1P,EACvDlC,EAAMyjB,OAAO7R,GAAS+R,EAElBjO,KAAK4B,UAAUqM,KAAcjO,KAAK4B,UAAUoM,IAC9CrB,KAEDzQ,IAGDgS,EAAW,SAAkBN,GAC/B,IAAItjB,EAAQ8f,EAMZ,OAAOuD,EAAYC,GAJF,SAAoBphB,EAAO0P,GAC1C,MAAwB,mBAAV1P,EAAuBA,EAAMlC,EAAMyjB,OAAO7R,GAAQA,GAAS1P,MAMzE2hB,EAAYd,GAAO,GA2BnBe,GA1BkBf,IA0BT,SAAgBgB,GAQ3B,OAHoBnD,EAHAyC,EAAY,CAC9BW,QAASD,IAEuC,GACxB,KA+OxB9X,EA/IiB,CACnBgY,OAAQ,SACRC,cAAe,gBACfC,UAAW,YACXC,OAAQ,SACRC,gBAAiB,kBACjBC,kBAAmB,oBACnBC,IAAK,MACLnO,MAAO,QACPoO,aAAc,eACdC,UAAW,YACXC,SAAU,WACVC,QAAS,UACTC,YAAa,cACbC,YAAa,cACbC,UAAW,YACXC,QAAS,UACTC,QAAS,UACT,MAAS,YACTC,QAAS,UACTC,UAAW,YAEX5iB,UAAW,YACX6iB,QAAS,UACTC,KAAM,OACNnX,QAAS,UACTF,gBAAiB,kBACjBsX,YAAa,cACbC,SAAU,WACVC,OAAQ,SACRC,YAAa,cACbhR,KAAM,OACNiR,SAAU,WACV,QAAW,UACXC,MAAO,QACPC,IAAK,MACLhI,SAAU,WACViI,SAAU,WACVC,UAAW,YACXC,QAAS,UACTC,KAAM,OACNC,WAAY,aACZC,YAAa,cACbC,WAAY,aACZC,eAAgB,iBAChBC,WAAY,aACZC,YAAa,cACbnR,QAAS,UACToR,OAAQ,SACRC,OAAQ,SACRC,KAAM,OACN3L,KAAM,OACN4L,SAAU,WACVC,QAAS,UACTC,UAAW,YACXC,KAAM,OACNzkB,GAAI,KACJ0kB,UAAW,YACXC,UAAW,YACXte,GAAI,KACJue,UAAW,YACXC,QAAS,UACTC,KAAM,OACNC,MAAO,QACPC,KAAM,OACNljB,KAAM,OACN6Y,KAAM,OACNsK,IAAK,MACLC,SAAU,WACVC,aAAc,eACdC,YAAa,cACbC,IAAK,MACLC,UAAW,YACXC,MAAO,QACPC,WAAY,aACZtS,OAAQ,SACRuS,IAAK,MACLC,UAAW,YACXC,SAAU,WACVC,MAAO,QACP/S,KAAM,OACNgT,WAAY,aACZC,MAAO,QACPC,OAAQ,SACRC,SAAU,WACV1K,QAAS,UACT2K,QAAS,UACTC,QAAS,UACTC,UAAW,YACXC,QAAS,UACTC,YAAa,cACbC,WAAY,aACZC,YAAa,cACbC,UAAW,YACXC,SAAU,WACVC,SAAU,WACVC,WAAY,aACZC,YAAa,cACbC,aAAc,eACd7S,KAAM,OACN8S,QAAS,UACTC,QAAS,UACTC,YAAa,cACbC,OAAQ,SACRC,QAAS,UACTC,WAAY,aACZC,SAAU,WACVC,IAAK,MACLC,SAAU,WACVC,SAAU,WACVC,KAAM,OACNC,QAAS,UACTC,KAAM,OACNC,QAAS,UACTC,MAAO,QACPC,OAAQ,SACRC,UAAW,YACXC,SAAU,WACVC,SAAU,WACVC,MAAO,QACPC,KAAM,OACNC,MAAO,QACPC,KAAM,OACNC,WAAY,aACZ3S,IAAK,MACL4S,OAAQ,SACRC,QAAS,UACTC,OAAQ,SACRxpB,MAAO,QACPypB,KAAM,OACNnb,MAAO,QACPob,QAAS,UACTC,SAAU,WACVvY,OAAQ,SACRgI,MAAO,QACPtY,KAAM,OACN8oB,OAAQ,SACR7oB,MAAO,QACP8oB,MAAO,QACPC,MAAO,QACPtW,KAAM,QAIJuW,EAAIhT,KAAK,GACTjV,EAAQioB,EAAEjoB,MAEdioB,EAAEjoB,MAAQ,SAAUC,EAAMioB,GACxB,OAAOA,EAAUjT,IAAEiT,EAASloB,EAAMC,IAASD,EAAMC,IAGnDgoB,EAAEE,YAAc,UAChBF,EAAE/nB,SAAW+U,aACb,IAAImT,EAAMnT,IACNoT,EAAS,SAAgBzmB,GAC3B,MAAO,CACLsL,SAAU,SAAkB1N,GAC1B,OAAOoC,EAAGpC,EAAM9C,QAIlB4rB,EAtOY,SAAmBC,EAAgBC,GACjD,IAcIvO,EAAS,SAAgBza,GAC3B,IAAIipB,EAAY5L,EAChBA,EAAerd,EAAMzC,MAErB,IACEyC,EAAMzC,MAAMojB,QAAQ3Q,QAAQ9Q,GAD9B,QAGEue,EAASzd,EAAMzC,MAAO,CACpB8iB,OAAO,EACPM,QAAS,GACTZ,UAAW,EACXgB,YAAa,IAGf1D,EAAe4L,IA+BnB,MAAO,CACLxb,OA5DS,SAAczN,GACvByd,EAASzd,EAAMzC,MAAO,CACpB8iB,OAAO,EACPW,OAAQ,GACRD,YAAa,EACbd,WAAY,GACZF,UAAW,EACXY,QAAS,GACTuI,SAAU,IAAIC,IACdzI,UAAW,IAAIyI,OAoDjBzb,SAAU+M,EACV9M,SAAU8M,EACVpa,KA/BW,SAAgBL,GAC3B,IAAIipB,EAAY5L,EAChBA,EAAerd,EAAMzC,MAErB,IACE,OAAOwrB,EAAe/K,EAAeA,EAAeA,EAAe,GAAIgL,GAAehpB,EAAM7C,OAAQ,GAAI,CACtG6C,MAAOA,EACP5C,SAAU4C,EAAM5C,YAElB,MAAO6E,GACPL,QAAQC,MAAMI,GANhB,QAQEob,EAAe4L,IAoBjBnd,SAhBa,SAAkB9L,GAC/B,IAAIipB,EAAY5L,EAChBA,EAAerd,EAAMzC,MAErB,IACE2hB,EAAmBlf,EAAMzC,MAAMmjB,UAAUnd,UAAUyM,QAAQ9Q,GAD7D,QAGEme,EAAe4L,MC3UrB,QAFkBH,GAlBC,SAAC,GAAD,IAAGM,EAAH,EAAGA,OAAQC,EAAX,EAAWA,WAAY7R,EAAvB,EAAuBA,MAAO8R,EAA9B,EAA8BA,OAAQ9d,EAAtC,EAAsCA,QAAS+d,EAA/C,EAA+CA,SAAUC,EAAzD,EAAyDA,MAAzD,OACjBf,EAAEW,EACA,CACE5R,QACA8R,SACAG,WAAYhB,EAAEY,EAAY,CACxBC,SACAhR,YAAad,EAAM7G,KACnB+Y,MAAO,CACL,CAAC,WAAYH,GACb,CAAC,gBAAiBC,OAIxBf,EAAEjd,OCMN,QAFesd,GAlBC,SAAC,GAAD,IAAGW,EAAH,EAAGA,WAAYrsB,EAAf,EAAeA,SAAf,OACdqrB,EAAE,MACA,CACE5oB,UAAW,UAEb,CACE4pB,EACAhB,EAAE,MACA,CAEE5oB,UAAW,aAEbzC,Q,8nDCZR,IAcM2d,EAAO+N,GAdC,SAAC,GAAD,IAAGQ,EAAH,EAAGA,OAAQ/W,EAAX,EAAWA,KAAMkS,EAAjB,EAAiBA,MAAO9T,EAAxB,EAAwBA,KAAM2H,EAA9B,EAA8BA,YAA9B,OACZmQ,EAAE,KACA,GACAA,EAAE,IAAD,GACCrQ,KAAMzH,EACN9Q,UAAW8Q,IAAS2H,EAAc,YAAc,IAC/C9O,EAAEwR,SAAU,SAAA/Y,GAAC,OACZA,EAAEgM,iBACFqb,EAAOK,SAASpX,MAGpBkS,OAyBEmF,EAAWd,GApBC,SAAC,GAA0C,IAAxCQ,EAAwC,EAAxCA,OAAQxR,EAAgC,EAAhCA,MAAO+R,EAAyB,EAAzBA,MAAOvR,EAAkB,EAAlBA,YACzC,MAAO,CACLmQ,EAAE,IACA,CACE3rB,IAAK,QACL+C,UAAW,cAEbiY,GAEF2Q,EAAE,KACA,CACE3rB,IAAK,OACL+C,UAAW,aAEbgqB,EAAM/gB,KAAI,SAAAghB,GAAI,OACZrB,EAAE1N,EAAD,OAAY+O,GAAZ,IAAkBR,SAAQhR,yBAkBnC,QAAewQ,GAXK,SAAC,GAAD,IAAGQ,EAAH,EAAGA,OAAQhR,EAAX,EAAWA,YAAaoR,EAAxB,EAAwBA,MAAxB,OAClBjB,EAAE,QACA,CACE5oB,UAAW,QAEb6pB,EAAM5gB,KAAI,yBAAEgP,EAAF,KAAS+R,EAAT,YACRpB,EAAEmB,EAAU,CAAEN,SAAQxR,QAAO+R,QAAOvR,uB,+jCCpB1C,QAAewQ,GAxBC,WAAM,QACU3H,GAAS,GADnB,GACb4I,EADa,KACJC,EADI,KAEpB,OAAOvB,EAAE,MACP,CACE5oB,UAAW,UAEb,CACE4oB,EAAE,SAAD,GAEG5oB,UAAW,UAAF,OAAYkqB,EAAU,UAAY,KAC1CvgB,EAAEwR,SAAU,kBAAMgP,GAAYD,MAEjC,UAEFtB,EAAE,MACA,CACE5oB,UAAW,QAEbkqB,EAAU,KAAO,Y,6xCClBzB,IAeME,EAAW,WAAuB,IAAtB3I,EAAsB,uDAAP,GAAO,EAChBH,EAASG,GADO,SAC/BlD,EAD+B,KAC1B8L,EAD0B,KAEtC,MAAO,CACL9L,EACA,SAAA+L,GAAG,OAAID,EAAO9L,EAAIjE,OAAOgQ,KACzB,SAAAC,GAAM,OAAIF,EAAO9L,EAAIN,QAAO,SAAAuM,GAAI,OAAIA,IAASD,SAI3CE,EAAiB,SAAC/sB,EAAOokB,GAC7B,OAAQA,EAAOniB,MACb,IAAK,YACH,MAAO,CAAE8D,MAAO/F,EAAM+F,MAAQ,GAChC,IAAK,YACH,MAAO,CAAEA,MAAO/F,EAAM+F,MAAQ,GAChC,QACE,MAAM,IAAIhD,MAAM,oBAAqBqhB,KAuIrC4I,EAAUzB,GAnIC,SAAC,GAAwC,IL2MrB0B,EAAS3J,EAAc4J,EACtDltB,EAEAmtB,EK9MchrB,EAAsC,EAAtCA,GAAIirB,EAAkC,EAAlCA,aAAcC,EAAoB,EAApBA,cAAoB,KL2MrBJ,EK1MOF,EL0MEzJ,EK1Mc,CAAEvd,MAAOqnB,GL6M/DD,IAFAntB,EAAQ8f,GAEWgD,OAASoK,EAASA,EAAO5J,GAAgBA,EAEzC,WACrB,IACIgK,EAAgB1M,EADDyC,EAAY8J,GACkB,GAC7CjrB,EAAQorB,EAAc,GACtBC,EAAWD,EAAc,GACzB1b,EAAQ0b,EAAc,GAQ1B,MAAO,CAACprB,EANO,SAAkBkiB,GAC/B,IAAIV,EAAgB1jB,EAAMyjB,OAAO7R,GACjC,OAAO2b,EACPN,EAAQvJ,EAAeU,MAMpBoJ,IKhOiD,GACjDC,EADiD,KACrCC,EADqC,KAElD3nB,EAAQ0nB,EAAW1nB,MAF+B,IAI5B6d,GAAS,GAJmB,GAIjD+J,EAJiD,KAIzCC,EAJyC,KAKlDC,EAAS/J,IAef,OAJAD,GAAU,WACR+J,GAAU,KACT,IAGD1C,EAAE,M,+VAAD,EAEG5oB,UAAW,WAAF,OAAaqrB,EAAS,SAAW,KACvCrC,GAAO,SAAA3rB,GAAG,OAAIkuB,EAAO7J,QAAU6J,EAAO7J,SAAWrkB,MAEtDurB,EAAE,MACA,CACE5oB,UAAW,iBAEb,CACE4oB,EAAE,MACA,CACE5oB,UAAW,SAEbyD,GAEFmlB,EAAE,SAAD,GAEG5oB,UAAW,SACXqb,SAAoB,IAAV5X,GACTkG,EAAEwR,SAAU,kBAAMiQ,EAAS,CAAEzrB,KAAM,iBAEtCipB,EAAE,OACA,CACE5oB,UAAW,iBAEb4oB,EAAE,IACA,CACE5oB,UAAW,mBAKnB4oB,EAAE,SAAD,GAEG5oB,UAAW,UACV2J,EAAEwR,SAAU,kBAAMiQ,EAAS,CAAEzrB,KAAM,iBAEtCipB,EAAE,OACA,CACE5oB,UAAW,iBAEb4oB,EAAE,IACA,CACE5oB,UAAW,kBAKnB4oB,EAAE,MAAO,CACP5oB,UAAW,WAEb4oB,EAAE,SAAD,GACC5oB,UAAW,mBACV2J,EAAEwR,SAAU,kBA/DrBoQ,EAAO7J,QAAQhU,iBAAiB,iBAJF,SAAxB8d,IAAwB,OAC5BT,EAAclrB,GACd0rB,EAAO7J,QAAQjU,oBAAoB,gBAAiB+d,WAGtDD,EAAO7J,QAAQ+J,UAAUlB,OAAO,aA+DvB,mBA0Db,QAF0BtB,GAjDC,SAAC,GAAgB,IAAdyB,EAAc,EAAdA,QAAc,EAtHzB,WAEjB,IAAMgB,EAAmB,iBAAO,CAC9B7rB,IAAI,IAAI8rB,MAAOC,UACfd,aAAc3V,KAAKC,MAAsB,GAAhBD,KAAKE,YAE1BwW,EAAeH,IANE,IAOuBtB,EAAS,CAACyB,IAPjC,GAOhB1V,EAPgB,KAON2V,EAPM,KAOMf,EAPN,KAQvB,MAAO,CACL5U,EACA,kBAAM2V,EAAWJ,MACjB,SAAAnB,GAAM,OAAIQ,EAAcR,KA4GoBwB,GADJ,SACnC5V,EADmC,KACzB2V,EADyB,KACbf,EADa,KAE1C,MAAO,CACLnC,EAAE,MACA,CACE5oB,UAAW,WACX/C,IAAK,YAEP,CACE2rB,EAAE,SAAD,GAEG5oB,UAAW,kBACV2J,EAAEwR,SAAU,kBAAM2Q,OAErB,eAEFlD,EAAE,MACA,CACE5oB,UAAW,WAGf4oB,EAAE,OACA,CACE5oB,UAAW,QAEb4oB,EAAE,OACA,CACE5oB,UAAW,0BAFd,oBAIcmW,EAAS/X,YAK9BwqB,EAAE/nB,SACA,CAAE5D,IAAK,YACPkZ,EAASlN,KAAI,SAAAgB,GAAC,OACZ2e,EAAE8B,EAAS,CACTztB,IAAKgN,EAAEpK,GACPA,GAAIoK,EAAEpK,GACNirB,aAAc7gB,EAAE6gB,aAChBC,cAAe,kBAAMA,EAAc9gB,aAQM,CAAEygB,YCzKrD,GACE,CACE7qB,GAAI,IACJ6S,KAAM,MACNsZ,OAAQ,yEAEV,CACEnsB,GAAI,IACJ6S,KAAM,OACNsZ,OAAQ,yEAEV,CACEnsB,GAAI,IACJ6S,KAAM,QACNsZ,OAAQ,0ECdZ,IAAMC,EAAc,CAClB,EAAK,CACHxX,OAAQ,CACNyX,UAAU,IAGd,EAAK,CACHzX,OAAQ,CACNyX,UAAU,IAGd,EAAK,CACHzX,OAAQ,CACNyX,UAAU,KAKHC,EACc,SAACC,EAAUC,GAClC,IAAMC,EAASL,EAAYG,GAC3BrqB,QAAQwqB,IAAR,iCAAsCH,IACtCE,EAAO7X,OAAOyX,SAAwB,MAAbE,EAGzB,IAAMI,EAAQ,IAAM,IAAMrX,KAAKE,SAC/B3T,YAAW,kBACT2qB,EAAmBC,EAAO7X,UACzB+X,IAVML,EAYkB,SAACC,EAAUC,GACtC,IAAMC,EAASL,EAAYG,GAC3BE,EAAO7X,OAAOyX,SAAW,KACzBnqB,QAAQwqB,IAAR,mCAAwCH,IACxCC,EAAmBC,EAAO7X,S,u8BCtB9B,SAAewU,GATO,SAAC,GAAiB,IAChCiD,ECDuB,SAAAE,GAAY,QACT9K,EAAS,MADA,GAClC4K,EADkC,KACxBO,EADwB,KAGzC,SAASJ,EAAmB5X,GAC1BgY,EAAYhY,EAAOyX,UAarB,OAVA3K,GACE,WAEE,OADA4K,EAA4BC,EAAUC,GAC/B,WACLF,EAAgCC,EAAUC,MAG9C,IAGKH,EDhBUQ,CADqB,EAAfN,UAEvB,OACIxD,EAAE,MADc,OAAbsD,EACM,CAAElsB,UAAW,sBACtBksB,EACW,CAAElsB,UAAW,qBACb,CAAEA,UAAW,0B,okCE6B9B,SAAeipB,GAlCc,WAAM,WACK3H,EAAS,KADd,GAC1BqL,EAD0B,KACbC,EADa,KAGjC,OAAOhE,EAAE,MACP,CAAE5oB,UAAW,YACb,CACE4oB,EAAEiE,GACA,CAAE5vB,IAAK0vB,EAAaP,SAAUO,IAEhC/D,EAAE,MACA,CACE5oB,UAAW,SACX/C,IAAK,UAEP2rB,EAAE,UAAD,UAEIjf,EAAEkc,UAAW,SAAAzjB,GAAC,OAAIwqB,EAAexqB,EAAE6N,OAAOrQ,UAF9C,aAGU+sB,GAHV,GAKCV,OAAgB,SAAAK,GAAM,OACpB1D,EAAE,SACA,CACEhpB,MAAO0sB,EAAOzsB,GACd5C,IAAKqvB,EAAOzsB,IAEdysB,EAAO5Z,gBCCrB,SAAeuW,GA3BC,SAAC,GAA2B,IAAzBqD,EAAyB,EAAzBA,OAAQQ,EAAiB,EAAjBA,WACzB,OAAOlE,EAAE,MACP,CAAE5oB,UAAW,UACb,CACE4oB,EAAE,MACA,CACE5oB,UAAW,SACXmN,MAAO,CACL4f,gBAAiB,OAAF,OAAST,EAAON,OAAhB,QAIrBpD,EAAE,MAAO,CAAE5oB,UAAW,QAAUssB,EAAO5Z,MACvCkW,EAAE,MAAO,CAAE5oB,UAAW,WACtB8sB,EACIlE,EAAE,MAAO,KACPA,EAAEiE,GACA,CACET,SAAUE,EAAOzsB,MAIrB,U,okCCSZ,SAAeopB,GA7BD,WAAM,SACkB3H,GAAS,GAD3B,GACXwL,EADW,KACCE,EADD,KAElB,OAAOpE,EAAE,MACP,CAAE5oB,UAAW,QACb,CACE4oB,EAAE,MACA,CAAE5oB,UAAW,YACb4oB,EAAE,SAAD,IAEG5oB,UAAW8sB,EAAa,SAAW,kBAClCnjB,EAAEwR,SAAU,kBAAM6R,GAAeF,MAEpCA,EAAa,kBAAoB,kBAGrCA,EAAalE,EAAEqE,IAAuB,KACtCrE,EAAE,MACA,CAAE5oB,UAAW,WACbisB,OAAgB,SAAAK,GAAM,OACpB1D,EAAEsE,GAAQ,CACRZ,SACAQ,wB,okCCxBZ,IAwBM1C,GAAW,WAAuB,IAAtB3I,EAAsB,uDAAP,GAAO,EAChBH,EAASG,GADO,UAC/BlD,EAD+B,KAC1B8L,EAD0B,KAEtC,MAAO,CACL9L,EACA,SAAA+L,GAAG,OAAID,EAAO9L,EAAIjE,OAAOgQ,KACzB,SAAAC,GAAM,OAAIF,EAAO9L,EAAIN,QAAO,SAAAuM,GAAI,OAAIA,IAASD,SAoFjD,SAFoBtB,GA9EC,WAAM,MAjCV,WAAsB,SACX3H,EADW,uDAAN,GAAM,GAC9B7d,EAD8B,KACvB0pB,EADuB,KAErC,MAAO,CACL1pB,EACA,kBAAM0pB,EAAS1pB,EAAQ,IACvB,kBAAM0pB,EAAS1pB,EAAQ,KA6Ba2pB,CAAS,GADtB,UAClB3pB,EADkB,KACX4pB,EADW,KACAC,EADA,OAxBR,WAEjB,IAAM5B,EAAmB,iBAAO,CAC9B7rB,IAAI,IAAI8rB,MAAOC,UACfd,aAAc3V,KAAKC,MAAsB,IAAhBD,KAAKE,YAE1BwW,EAAeH,IANE,KAOuBtB,GAAS,CAACyB,IAPjC,GAOhB1V,EAPgB,KAON2V,EAPM,KAOMf,EAPN,KAQvB,MAAO,CACL5U,EACA,kBAAM2V,EAAWJ,MACjB,SAAAnB,GAAM,OAAIQ,EAAcR,KAeoBwB,GAFrB,UAElB5V,EAFkB,KAER2V,EAFQ,KAEIf,EAFJ,KAGlBwC,EAHkB,GAGJpX,EAASqX,UAHL,MAKzB,MAAO,CACL5E,EAAE,MACA,CACE3rB,IAAK,cACL,eAAgB,eAElB,CACE2rB,EAAE,KACA,eAEFA,EAAE,IACA,CACEA,EAAE,OAAQ,WACVA,EAAE,OACA,CAAE,eAAgB,SAClBnlB,KAINmlB,EAAE,SAAD,IAEG,eAAgB,YAChBvN,SAAoB,IAAV5X,GACTkG,EAAEwR,SAAU,kBAAMmS,OAErB,QAEF1E,EAAE,SAAD,IAEG,eAAgB,aACfjf,EAAEwR,SAAU,kBAAMkS,OAErB,UAINzE,EAAE,MACA,CACE3rB,IAAK,eACL,eAAgB,gBAElB,CACE2rB,EAAE,KACA,gBAEFA,EAAE,IACA,CACEA,EAAE,OAAQ,cACVA,EAAE,OAAQ,CACR,eAAgB,YACfzS,EAAS/X,UAGhBwqB,EAAE,SAAD,IAEG,eAAgB,YAChBvN,SAA8B,IAApBlF,EAAS/X,QAClBuL,EAAEwR,SAAU,kBAAM4P,EAAcwC,MAEnC,UAEF3E,EAAE,SAAD,IAEG,eAAgB,aACfjf,EAAEwR,SAAU,kBAAM2Q,OAErB,aC9EV,SAAe7C,GA1BA,WACb,MAAO,CACLL,EAAE,MACA,CACE3rB,IAAK,MACL,eAAgB,OAElB2rB,EAAEjoB,MAAM,mIAEVioB,EAAE,MACA,CACE3rB,IAAK,OACL,eAAgB,QAElB2rB,EAAEjoB,MAAM,oEAEVioB,EAAE,MACA,CACE3rB,IAAK,UACL,eAAgB,WAElB2rB,EAAEjoB,MAAM,QAAS,aCrBvB,IAqBM8sB,GAAWxE,GArBC,SAAC,GAAwB,IAAtBhR,EAAsB,EAAtBA,MAAO1a,EAAe,EAAfA,SAC1B,OAAOqrB,EAAE,MACP,CACE,eAAgB,YAElB,CACEA,EAAE,KAAM3Q,GACR1a,OAiBN,SAFgB0rB,GAVC,SAAC,GAAD,IAAGhR,EAAH,EAAGA,MAAOwV,EAAV,EAAUA,SAAV,OACf7E,EAAE,MACA,KACAA,EAAE6E,EACA,CAAExV,SACF2Q,EAAE,MAAO,KAAM,uBAKU,CAAE3Q,MAAO,WAAYwV,cCtBpD,IAoBMC,GAAezE,GApBC,SAAC,GAA4B,IAA1BhR,EAA0B,EAA1BA,MAAO0V,EAAmB,EAAnBA,aAC9B,OAAO/E,EAAE,MACP,CACE,eAAgB,gBAElB,CACEA,EAAE,KAAM,KAAM3Q,GAAS0V,OAcY,CAAEA,aAAc,kBAGzD,SAFgB1E,GATC,SAAC,GAAD,IAAGhR,EAAH,EAAGA,MAAOyV,EAAV,EAAUA,aAAV,OACf9E,EAAE,MACA,KACAA,EAAE8E,EACA,CAAEzV,aAKuB,CAAEA,MAAO,QAASyV,kB,4pCCpBjD,IAyBME,GAAS3E,GAzBC,SAAC,GAAc,IAAZhR,EAAY,EAAZA,MAAY,KACCqJ,GAAS,GADV,GACtB4I,EADsB,KACbC,EADa,KAE7B,OACE,SAAKnqB,UAAU,UACb,YAAKiY,GACL,YACEjY,UAAS,iBAAYkqB,EAAU,UAAY,K,sHAD7C,IAGKvgB,EAAEwR,SAAU,kBAAMgP,GAAYD,OAHnC,UAQA,SACElqB,UAAU,QAEC4oB,EAAE,MAAZsB,EAAmB,KAAiB,QAEvC,aACGtB,EAAEjoB,MAAM,uIASjB,SAAesoB,GADE,kBAAM,EAAC2E,GAAD,CAAQ3V,MAAM,e,woDCKrC,SAAegR,GAjCC,WACd,IAAMsC,EAAS/J,IADK,KAEYF,EAAS,GAFrB,GAEbtd,EAFa,KAEL6pB,EAFK,KAIpB,OAAOjF,EAAE,MACP,CACE,eAAgB,iBAElB,CACEA,EAAE,OAAQ,mCACVA,EAAE,OAAD,MAEMI,GAAO,SAAA3rB,GACR,IAAMywB,GAAkBvC,EAAO7J,QAC/B6J,EAAO7J,QAAU6J,EAAO7J,SAAWrkB,EACnCywB,GAAkBD,EAAc7pB,EAAS,OAG7C,UAEF4kB,EAAE,IAAK,CACLA,EAAE,OAAQ,6BACVA,EAAE,OACA,CACE,eAAgB,eAElB2C,EAAO7J,SAAW6J,EAAO7J,QAAQjb,oB,woDC1B3C,IA2FMsnB,GAAQ9E,GA3FC,SAAA+E,GAAS,WACc1M,IADd,GACf2M,EADe,KACHC,EADG,UAEI5M,EAAS,cAFb,GAEf1hB,EAFe,KAERqrB,EAFQ,KAItB,OAAOrC,EAAE,MACP,CACE,eAAgB,mBAElB,CACEA,EAAE,QAAD,OAEG3rB,IAAK,QACL,eAAgB,QAChB2C,SAJH,KAKI+J,EAAEkc,UAAW,SAAAzjB,GAAC,OAAI6oB,EAAS7oB,EAAE6N,OAAOrQ,UALxC,KAMI+J,EAAEoc,SAAU,SAAA3jB,GAAC,OAAI6oB,EAAS7oB,EAAE6N,OAAOrQ,UANvC,GAOMopB,GAAO,SAAA3rB,GAAG,OAAIA,IAAQ4wB,IACvBC,EAAc7wB,GAEd2wB,EAAMG,KAAOH,EAAMG,IAAI9wB,SAG7BurB,EAAE,IACA,CACE3rB,IAAK,QACL,eAAgB,YAElB2C,GAEFgpB,EAAE,IACA,CACE3rB,IAAK,YAEP,CACE2rB,EAAE,OACA,CACE3rB,IAAK,SAEP,eAEF2rB,EAAE,OACA,CACE3rB,IAAK,aACL,eAAgB,cAElBgxB,GAAcA,EAAWG,aAAa,wBAgDlD,SAAenF,GAxCK,SAAC,GAAc,IAAZ8E,EAAY,EAAZA,MAAY,KACGzM,IADH,GAC1B2M,EAD0B,KACdC,EADc,KAGjC,OAAOtF,EAAE,MACP,CACE,eAAgB,oBAElB,CACEA,EAAEmF,EAAO,CACP9wB,IAAK,SACLkxB,IAAK,SAAA9wB,GAAG,OACN6wB,EAAc7wB,MAGlBurB,EAAE,IACA,CACE3rB,IAAK,YAEP,CACE2rB,EAAE,OACA,CACE3rB,IAAK,SAEP,gBAEF2rB,EAAE,OACA,CACE3rB,IAAK,aACL,eAAgB,cAElBgxB,GAAcA,EAAWG,aAAa,uBAUjB,CAAEL,WCvEnC,SAFiB9E,GApBC,kBAChBL,EAAE,cACA,CAAE3rB,IAAK,WAAY,eAAgB,WACnC,CACE2rB,EAAE,YACA,CAAE3rB,IAAK,EAAG,eAAgB,WAC1B,GAEF2rB,EAAE/nB,SACA,CAAE5D,IAAK,WACP,CAAC,EAAE,EAAE,GAAGgM,KAAI,SAAA2T,GAAC,OACXgM,EAAE,MACA,CAAE3rB,IAAK2f,EAAG,+BAAyBA,IACnCA,Y,28BCCZ,IAAMyR,GAAa,SAAC,GAAD,cAAEzJ,EAAF,KAAS9T,EAAT,KAAezB,EAAf,WAA+B,CAChDqD,KAAMkS,EAAM5X,cAAcjN,QAAQ,IAAK,KACvC6kB,QACA9T,OACAzB,cCSK,IAAIif,GAAW,WAQlB,OAPAA,GAAWxnB,OAAOkJ,QAAU,SAAkBue,GAC1C,IAAK,IAAIC,EAAGlwB,EAAI,EAAGse,EAAIje,UAAUP,OAAQE,EAAIse,EAAGte,IAE5C,IAAK,IAAIub,KADT2U,EAAI7vB,UAAUL,GACOwI,OAAOrE,UAAUvD,eAAeG,KAAKmvB,EAAG3U,KAAI0U,EAAE1U,GAAK2U,EAAE3U,IAE9E,OAAO0U,IAEK7tB,MAAM9B,KAAMD,YCrChC,IAAI8vB,GAAc,SAAqBC,GAKrC,YAJa,IAATA,IACFA,EAAO,IAGF,CACLC,YAAaD,EAAKC,aAAe,OACjCC,cAAeF,EAAKE,eAAiB,OACrCC,WAAYH,EAAKG,YAAc,YAI/BC,GAAc,SAAqBlvB,GACrC,OAAOmQ,mBAAmBnQ,IAGxBmvB,GAAc,SAAqBnvB,GACrC,OAAO2W,mBAAmB3W,IAuDxBovB,GAAS,SAAgBtc,EAAM9S,EAAO8uB,GACxC,OAAc,OAAV9uB,EArCW,SAAoB8S,EAAMgc,GACzC,MAAwB,WAApBA,EAAKG,WACA,GAGe,WAApBH,EAAKG,WACAnc,EAAO,QAGTA,EA6BEuc,CAAWvc,EAAMgc,GAGL,kBAAV9uB,EAzDO,SAAuB8S,EAAM9S,EAAO8uB,GACtD,MAA2B,eAAvBA,EAAKE,eAAkChvB,EAClC8S,EAWFA,EAAO,KANa,YAAvBgc,EAAKE,cACQhvB,EAAQ,IAAM,IAEdA,EAAM8K,YAgDdwkB,CAAcxc,EAAM9S,EAAO8uB,GAGhC3wB,MAAMC,QAAQ4B,GAfF,SAAqB8S,EAAM6L,EAAKmQ,GAChD,IAAIS,EAnBe,SAAwBT,GAC3C,MAAyB,UAArBA,EAAKC,YACA,SAAUjc,EAAMpD,GACrB,OAAOoD,EAAO,IAAMpD,EAAQ,KAIP,aAArBof,EAAKC,YACA,SAAUjc,GACf,OAAOA,EAAO,MAIX,SAAUA,GACf,OAAOA,GAKQ0c,CAAeV,GAChC,OAAOnQ,EAAItV,KAAI,SAAU+B,EAAKsE,GAC5B,OAAO6f,EAAWzc,EAAMpD,GAAS,IAAMwf,GAAY9jB,MAClD/K,KAAK,KAYCovB,CAAY3c,EAAM9S,EAAO8uB,GAG3Bhc,EAAO,IAAMoc,GAAYlvB,IAoC9B0vB,GAAY,SAAmBxe,GACjC,IAAIvH,EAAMuH,EAAKhE,QAAQ,KAEvB,OAAa,IAATvD,EACKuH,EAGFA,EAAKvE,MAAMhD,EAAM,IAKtBgmB,GAAY,SAAmB7c,GACjC,IAAI8c,EAAkB9c,EAAK5F,QAAQ,KAC/B2iB,GAAmC,IAArBD,EAClB,MAAO,CACLC,YAAaA,EACb/c,KAAM+c,EAAc/c,EAAKnG,MAAM,EAAGijB,GAAmB9c,IAQrDiC,GAAQ,SAAe7D,EAAM4d,GAC/B,IAAI1W,EAAUyW,GAAYC,GAC1B,OAAOY,GAAUxe,GAAMoF,MAAM,KAAKwZ,QAAO,SAAUnf,EAAQwL,GACzD,IAAI4T,EAAK5T,EAAM7F,MAAM,KACjB0Z,EAAUD,EAAG,GACb/vB,EAAQ+vB,EAAG,GAEXE,EAAKN,GAAUK,GACfH,EAAcI,EAAGJ,YACjB/c,EAAOmd,EAAGnd,KAEVod,EAAevf,EAAOmC,GACtBqd,EAvEK,SAAgBnwB,EAAO8uB,GAClC,QAAcjxB,IAAVmC,EACF,MAA8B,eAAvB8uB,EAAKE,eAAwC,KAGtD,GAA2B,WAAvBF,EAAKE,cAA4B,CACnC,GAAc,SAAVhvB,EACF,OAAO,EAGT,GAAc,UAAVA,EACF,OAAO,EAIX,GAA2B,YAAvB8uB,EAAKE,cAA6B,CACpC,GAA2B,MAAvBG,GAAYnvB,GACd,OAAO,EAGT,GAA2B,MAAvBmvB,GAAYnvB,GACd,OAAO,EAIX,MAAwB,WAApB8uB,EAAKG,YACO,SAAVjvB,EACK,KAIJmvB,GAAYnvB,GAwCEowB,CAAOpwB,EAAOoY,GAQjC,OALEzH,EAAOmC,QADYjV,IAAjBqyB,EACaL,EAAc,CAACM,GAAgBA,GAE9BhyB,MAAMC,QAAQ8xB,GAAgBA,EAAe,CAACA,IAAexV,OAAOyV,GAG/Exf,IACN,KAMD0f,GAAQ,SAAe1f,EAAQme,GACjC,IAAI1W,EAAUyW,GAAYC,GAC1B,OAAO5nB,OAAOoJ,KAAKK,GAAQ0N,QAAO,SAAUiS,GAC1C,YA7CazyB,IA6CS8S,EAAO2f,MAC5BjnB,KAAI,SAAUinB,GACf,OAAOlB,GAAOkB,EAAW3f,EAAO2f,GAAYlY,MAC3CiG,OAAO3C,SAASrb,KAAK,MClKtBkwB,GAAuB,kBACvBC,GAAuC,SAA8CC,GACvF,OAAOA,EAAQtwB,QAAQowB,IAAsB,SAAU3wB,GACrD,OAAOuQ,mBAAmBvQ,OAG1B8wB,GAAkB,CACpB,QAAWF,GACXG,IAAKC,UACLC,aAAc1gB,mBACd2gB,KAAM,SAAc1lB,GAClB,OAAOA,GAET2lB,OAAQH,WAENI,GAAkB,CACpB,QAAWra,mBACXga,IAAKM,UACLJ,aAAcla,mBACdma,KAAM,SAAc1lB,GAClB,OAAOA,GAET2lB,OAAQpa,oBAENua,GAAc,SAAqB/U,EAAOgV,EAAUC,GACtD,IAAIC,EAAUX,GAAgBS,IAAaX,GAE3C,OAAIY,EACK9yB,OAAO6d,GAAO7F,MAAM,KAAKjN,IAAIgoB,GAAShxB,KAAK,KAG7CgxB,EAAQ/yB,OAAO6d,KAMpBmV,GAAuB,SAA8B1xB,GACvD,MAAO,KAAOA,EAAQA,EAAMO,QAAQ,WAAY,IAAM,+BAAiC,KAErFoxB,GAAQ,CAAC,CACXze,KAAM,gBACNkU,QAAS,6CACTwK,MAAO,SAAe5xB,GACpB,OAAO,IAAI6Z,OAAO6X,GAAqB1xB,EAAM,OAE9C,CACDkT,KAAM,sBACNkU,QAAS,oCACTwK,MAAO,WACN,CACD1e,KAAM,uBACNkU,QAAS,6CACTwK,MAAO,SAAe5xB,GACpB,OAAO,IAAI6Z,OAAO,IAAM7Z,EAAM,GAAK,IAAM0xB,GAAqB1xB,EAAM,OAErE,CACDkT,KAAM,kBACNkU,QAAS,iDACR,CACDlU,KAAM,YACNkU,QAAS,WACTwK,MAAO,SAAe5xB,GACpB,OAAO,IAAI6Z,OAAO,KAAO7Z,EAAM,MAEhC,CACDkT,KAAM,gBACNkU,QAAS,kBACTwK,MAAO,SAAe5xB,GACpB,OAAO,IAAI6Z,OAAO7Z,EAAM,MAEzB,CACDkT,KAAM,WACNkU,QAAS,kBACTwK,MAAO,SAAe5xB,GACpB,OAAO,IAAI6Z,OAAO7Z,EAAM,OAIxB6xB,GAAW,SAASA,EAASC,EAAKC,GA4BpC,QA3Be,IAAXA,IACFA,EAAS,KAIGJ,GAAMnX,MAAK,SAAUwX,GACjC,IAAIhyB,EAAQ8xB,EAAI9xB,MAAMgyB,EAAK5K,SAE3B,QAAKpnB,IAIL+xB,EAAOzyB,KAAK,CACVa,KAAM6xB,EAAK9e,KACXlT,MAAOA,EAAM,GACbwL,IAAKxL,EAAM+M,MAAM,EAAG,GACpBklB,SAAUjyB,EAAM+M,MAAM,GACtB6kB,MAAOI,EAAKJ,iBAAiBhU,SAAWoU,EAAKJ,MAAM5xB,GAASgyB,EAAKJ,QAG/D5xB,EAAM,GAAGpB,OAASkzB,EAAIlzB,SACxBmzB,EAASF,EAASC,EAAII,OAAOlyB,EAAM,GAAGpB,QAASmzB,KAG1C,MAIP,MAAM,IAAI9wB,MAAM,yBAA2B6wB,EAAM,KAGnD,OAAOC,GAGLI,GAAS,SAAgB3mB,GAC3B,OAAOA,SAuCL4mB,GAAiB,CACnBC,kBAAmB,WAGjBC,GAIJ,WACE,SAASA,EAAKhhB,EAAMkH,GAClB,IAAKlH,EACH,MAAM,IAAIrQ,MAAM,oCAGlB7B,KAAKkS,KAAOA,EACZlS,KAAKoZ,QAAUsW,GAASA,GAAS,GAAIsD,IAAiB5Z,GACtDpZ,KAAK2yB,OAASF,GAASvgB,GACvBlS,KAAKmzB,aAAenzB,KAAK2yB,OAAOtT,QAAO,SAAUsQ,GAC/C,MAAO,iBAAiB/d,KAAK+d,EAAE5uB,SAC9BvB,OAAS,EACZQ,KAAKozB,aAAepzB,KAAK2yB,OAAOtT,QAAO,SAAUsQ,GAC/C,MAAO,SAAS/d,KAAK+d,EAAE5uB,SACtBvB,OAAS,EACZQ,KAAKqzB,gBAAkBrzB,KAAK2yB,OAAOtT,QAAO,SAAUsQ,GAClD,MAAO,UAAU/d,KAAK+d,EAAE5uB,SACvBvB,OAAS,EACZQ,KAAKszB,eAAiBtzB,KAAK2yB,OAAOtT,QAAO,SAAUsQ,GACjD,MAAO,mBAAmB/d,KAAK+d,EAAE5uB,SAChCvB,OAAS,EAEZQ,KAAKuzB,WAAavzB,KAAKwzB,UAAU,uBACjCxzB,KAAKyzB,UAAYzzB,KAAKwzB,UAAU,kBAEhCxzB,KAAK0zB,YAAc1zB,KAAKwzB,UAAU,mBAElCxzB,KAAK2R,OAAS3R,KAAKyzB,UAAU/X,OAAO1b,KAAK0zB,aAGzC1zB,KAAK+O,OAAS/O,KAAK2yB,OAAOtT,QAAO,SAAUsQ,GACzC,YAAmB9wB,IAAZ8wB,EAAE6C,SACRnoB,KAAI,SAAUslB,GACf,OAAOA,EAAE6C,MAAMzjB,UACd1N,KAAK,IAiMV,OA9LA6xB,EAAKS,WAAa,SAAUzhB,EAAMkH,GAChC,OAAO,IAAI8Z,EAAKhhB,EAAMkH,IAGxB8Z,EAAKrvB,UAAU+vB,aAAe,SAAU9f,GACtC,OAA2C,IAApC9T,KAAK0zB,YAAYxlB,QAAQ4F,IAGlCof,EAAKrvB,UAAUuuB,YAAc,SAAUte,GACrC,OAA0C,IAAnC9T,KAAKuzB,WAAWrlB,QAAQ4F,IAGjCof,EAAKrvB,UAAU+N,KAAO,SAAUM,EAAM4d,GACpC,IAAI+D,EAAQ7zB,KAERoZ,EAAUsW,GAASA,GAAS,CAC9BoE,eAAe,EACfC,qBAAqB,GACpB/zB,KAAKoZ,SAAU0W,GAGd/gB,EAtGe,SAA0BA,EAAQglB,GACvD,OAAIA,GAIW,QAAXhlB,EAHKA,EAOFA,EAAO5N,QAAQ,QAAS,IAAM,WA6FtB6yB,CAAiBh0B,KAAK+O,OAAQqK,EAAQ2a,qBAE/CnzB,EAAQZ,KAAKi0B,QAAQ/hB,EAAMnD,GAAU/O,KAAKszB,eAAiB,aAAe,KAAMla,EAAQ0a,cAAe1a,EAAQ6Z,mBAEnH,IAAKryB,IAAUZ,KAAKszB,eAClB,OAAO1yB,EAIT,IAAI8yB,EAAc3d,GAAM7D,EAAMkH,EAAQsa,aAKtC,OAAqC,IAJTxrB,OAAOoJ,KAAKoiB,GAAarU,QAAO,SAAUpE,GACpE,OAAQ4Y,EAAMD,aAAa3Y,MAGHzb,QAExB0I,OAAOoJ,KAAKoiB,GAAaniB,SACzB,SAAU0J,GACR,OAAOra,EAAMqa,GAAKyY,EAAYzY,MAEzBra,GAGF,MAGTsyB,EAAKrvB,UAAUqwB,YAAc,SAAUhiB,EAAM4d,GAC3C,IAAI+D,EAAQ7zB,KAERoZ,EAAUsW,GAASA,GAAS,CAC9BoE,eAAe,EACfK,WAAW,GACVn0B,KAAKoZ,SAAU0W,GAId/gB,EA9HY,SAAuBA,EAAQqlB,GACjD,OAAKA,EAIE,QAAQxiB,KAAK7C,GAAUA,EAASA,EAAS,oBAHvCA,EA4HMslB,CAAcr0B,KAAK+O,OAAQqK,EAAQ+a,WAC5CvzB,EAAQZ,KAAKi0B,QAAQ/hB,EAAMnD,EAAQqK,EAAQ0a,cAAe1a,EAAQ6Z,mBAEtE,IAAKryB,EACH,OAAOA,EAGT,IAAKZ,KAAKszB,eACR,OAAO1yB,EAGT,IAAI8yB,EAAc3d,GAAM7D,EAAMkH,EAAQsa,aAMtC,OALAxrB,OAAOoJ,KAAKoiB,GAAarU,QAAO,SAAUpE,GACxC,OAAO4Y,EAAMD,aAAa3Y,MACzB1J,SAAQ,SAAU0J,GACnB,OArIiB,SAA0BtJ,EAAQwL,EAAO/Q,QAClD,IAARA,IACFA,EAAM,IAGR,IAAIkoB,EAAc3iB,EAAOwL,GAQzB,OALExL,EAAOwL,QADWte,IAAhBy1B,EACcloB,EAEAjN,MAAMC,QAAQk1B,GAAeA,EAAY5Y,OAAOtP,GAAO,CAACkoB,EAAaloB,GAGhFuF,EAwHI4iB,CAAiB3zB,EAAOqa,EAAGyY,EAAYzY,OAEzCra,GAGTsyB,EAAKrvB,UAAUwtB,MAAQ,SAAU1f,EAAQme,GACvC,IAAI+D,EAAQ7zB,UAEG,IAAX2R,IACFA,EAAS,IAGX,IAAIyH,EAAUsW,GAASA,GAAS,CAC9B8E,mBAAmB,EACnBC,cAAc,EACdf,YAAa,IACZ1zB,KAAKoZ,SAAU0W,GAEd4E,EAAmBxsB,OAAOoJ,KAAKK,GAAQ0N,QAAO,SAAUpE,GAC1D,OAAQ4Y,EAAMD,aAAa3Y,MAC1B6V,QAAO,SAAU6D,EAAKt2B,GACvB,IAAK00B,GAAOphB,EAAOtT,IACjB,OAAOs2B,EAGT,IAAIvoB,EAAMuF,EAAOtT,GAEb+zB,EAAcyB,EAAMzB,YAAY/zB,GAYpC,MAVmB,kBAAR+N,EACTuoB,EAAIt2B,GAAO+N,EACFjN,MAAMC,QAAQgN,GACvBuoB,EAAIt2B,GAAO+N,EAAI/B,KAAI,SAAUR,GAC3B,OAAOqoB,GAAYroB,EAAGuP,EAAQ6Z,kBAAmBb,MAGnDuC,EAAIt2B,GAAO6zB,GAAY9lB,EAAKgN,EAAQ6Z,kBAAmBb,GAGlDuC,IACN,IAEH,GAAI30B,KAAKyzB,UAAUrY,MAAK,SAAUH,GAChC,OAAQ8X,GAAOphB,EAAOsJ,OACpB,CACF,IAAI2Z,EAAoB50B,KAAKyzB,UAAUpU,QAAO,SAAUpE,GACtD,OAAQ8X,GAAOphB,EAAOsJ,OAExB,MAAM,IAAIpZ,MAAM,uBAAyB7B,KAAKkS,KAAO,mCAAqC0iB,EAAkBvzB,KAAK,MAAQ,MAI3H,IAAK+X,EAAQob,oBACax0B,KAAK2yB,OAAOtT,QAAO,SAAUsQ,GACnD,MAAO,iBAAiB/d,KAAK+d,EAAE5uB,QAAU,UAAU6Q,KAAK+d,EAAE5uB,SACzD2gB,OAAM,SAAUiO,GACjB,OAAO,IAAIlV,OAAO,IAAM6X,GAAqB3C,EAAEkD,SAAS,IAAM,KAAKjhB,KAAK8iB,EAAiB/E,EAAEvjB,SAI3F,MAAM,IAAIvK,MAAM,uBAAyB7B,KAAKkS,KAAO,2BAIzD,IAAI2iB,EAAO70B,KAAK2yB,OAAOtT,QAAO,SAAUsQ,GACtC,OAA2C,IAApC,mBAAmB/d,KAAK+d,EAAE5uB,SAChCsJ,KAAI,SAAUslB,GACf,MAAe,yBAAXA,EAAE5uB,KACG,IAAM4uB,EAAEvjB,IAAM,IAAMsoB,EAAiB/E,EAAEvjB,IAAI,IAG7C,iBAAiBwF,KAAK+d,EAAE5uB,MAAQ2zB,EAAiB/E,EAAEvjB,IAAI,IAAMujB,EAAE/uB,SACrES,KAAK,IAER,GAAI+X,EAAQqb,aACV,OAAOI,EAGT,IAAIC,EAAe90B,KAAK0zB,YAAYrU,QAAO,SAAUpE,GACnD,OAA2C,IAApC/S,OAAOoJ,KAAKK,GAAQzD,QAAQ+M,MAClC6V,QAAO,SAAUiE,EAASzD,GAE3B,OADAyD,EAAQzD,GAAa3f,EAAO2f,GACrByD,IACN,IACCC,EAAa3D,GAAMyD,EAAc1b,EAAQsa,aAC7C,OAAOsB,EAAaH,EAAO,IAAMG,EAAaH,GAGhD3B,EAAKrvB,UAAU2vB,UAAY,SAAUzyB,GACnC,IAAIk0B,EAAYl0B,aAAgB0Z,OAAS,SAAUkV,GACjD,OAAO5uB,EAAK6Q,KAAK+d,EAAE5uB,OACjB,SAAU4uB,GACZ,OAAOA,EAAE5uB,OAASA,GAEpB,OAAOf,KAAK2yB,OAAOtT,OAAO4V,GAAW5qB,KAAI,SAAUslB,GACjD,OAAOA,EAAEvjB,IAAI,OAIjB8mB,EAAKrvB,UAAUowB,QAAU,SAAU/hB,EAAMnD,EAAQ+kB,EAAeb,GAC9D,IAAIY,EAAQ7zB,KAERwyB,EAAQ,IAAI/X,OAAO,IAAM1L,EAAQ+kB,EAAgB,GAAK,KACtDlzB,EAAQsR,EAAKtR,MAAM4xB,GAEvB,OAAK5xB,EAEOZ,KAAKyzB,UAAUj0B,OAKpBoB,EAAM+M,MAAM,EAAG3N,KAAKyzB,UAAUj0B,OAAS,GAAGsxB,QAAO,SAAUnf,EAAQqF,EAAGtX,GAE3E,OADAiS,EAAOkiB,EAAMJ,UAAU/zB,KA9VnBsyB,GA8VwCiB,IA9VXtb,oBA8VQX,GAClCrF,IACN,IAPM,GAFA,MAYJuhB,EAnOT,GC/KIgC,GAAsB,SAA6BC,GACrD,IAAIC,EAAU,GACd,OAAOD,EAASrE,QAAO,SAAUuE,EAAM5D,GACrC,IAAIV,EAAIE,EAAIqE,EAAItV,EAEZyT,EAGIxC,OAHSA,EAA+B,QAAzBF,EAAKU,EAAQ8D,cAA2B,IAAPxE,OAAgB,EAASA,EAAG0C,UAAU3C,QAAO,SAAUnf,EAAQsJ,GAErH,OADAtJ,EAAOsJ,GAAK,MACLtJ,IACN,KAAoCsf,EAAK,GACxCuE,EAGWxV,OAHEA,EAA+B,QAAzBsV,EAAK7D,EAAQ8D,cAA2B,IAAPD,OAAgB,EAASA,EAAG5B,YAAY5C,QAAO,SAAUnf,EAAQsJ,GAEvH,OADAtJ,EAAOsJ,GAAK,QACLtJ,IACN8hB,IAA2CzT,EAAK,GAOnD,YALqBnhB,IAAjB4yB,EAAQ3d,OAEVuhB,EADAD,EAAUA,EAAUA,EAAU,IAAM3D,EAAQ3d,KAAO2d,EAAQ3d,MAC3C0hB,GAGXH,IACN,KAgGDI,GAAgB,SAASA,EAAcC,EAAOC,EAAaC,EAAcxc,EAASyc,QACpE,IAAZzc,IACFA,EAAU,IA+GZ,IA5GA,IAAI2X,EAAK3X,EAAQ0c,gBACbA,OAAyB,IAAP/E,EAAgB,UAAYA,EAC9CE,EAAK7X,EAAQ2a,oBACbA,OAA6B,IAAP9C,GAAwBA,EAC9CqE,EAAKlc,EAAQ2c,eACbA,OAAwB,IAAPT,GAAuBA,EACxCtV,EAAK5G,EAAQ0a,cACbA,OAAuB,IAAP9T,GAAwBA,EACxCgW,EAA0B,IAAjBN,EAAMl2B,QAAkC,KAAlBk2B,EAAM,GAAG5hB,KAExCmiB,EAAU,SAAiB7sB,GAE7B,IArB+B8I,EAqB3BtR,EAAQ,KACRs1B,OAAgB,EAChBzE,EAAUkE,EA0Bd,GAxBuB,MAAnBE,GAAyC,MAAfzsB,EAAM8I,OAGlCuf,EAAU,IAAMkE,GAGbvsB,EAAMzK,SAASa,SAClBoB,EAAQwI,EAAMmsB,OAAO3jB,KAAK6f,EAAS,CACjCqC,cAAeA,EACfC,oBAAqBA,EACrBL,YAAata,EAAQsa,YACrBT,kBAAmB7Z,EAAQ6Z,qBAI1BryB,IACHA,EAAQwI,EAAMmsB,OAAOrB,YAAYzC,EAAS,CACxC0C,UAAW4B,EACXjC,cAAeA,EACfJ,YAAata,EAAQsa,YACrBT,kBAAmB7Z,EAAQ6Z,qBAI3BryB,EAAO,CAET,IAAIu1B,EAAe/sB,EAAMmsB,OAAOlE,MAAMzwB,EAAO,CAC3C6zB,cAAc,EACdxB,kBAAmB7Z,EAAQ6Z,oBAGxBc,GAAwB3qB,EAAMzK,SAASa,SAC1C22B,EAAeA,EAAah1B,QAAQ,MAAO,KAM3C+0B,EADgE,IAA9DzE,EAAQrjB,cAAcF,QAAQioB,EAAa/nB,eAC7BqjB,EAAQ9jB,MAAMwoB,EAAa32B,QAE3BiyB,EAGbsC,GAAwB3qB,EAAMzK,SAASa,SAC1C02B,EAAgBA,EAAc/0B,QAAQ,QAAS,MAGjD,IAAI0R,EFHC,SAAcX,EAAMkkB,EAActG,GAC3C,IAAI1W,EAAUyW,GAAYC,GAG1B,GAAmB,KAFFY,GAAUxe,GAGzB,MAAO,CACLW,YAAa,GACbwjB,cAAe,IAInB,IAAItF,EAAK7e,EAAKoF,MAAM,KAAKwZ,QAAO,SAAUC,EAAIuF,GAC5C,IAAIC,EAAOxF,EAAG,GACVyF,EAAQzF,EAAG,GACXC,EAAUsF,EAAMhf,MAAM,KAAK,GAC3BxD,EAAO6c,GAAUK,GAASld,KAC9B,OAAuC,IAAhCsiB,EAAaloB,QAAQ4F,GAAe,CAACyiB,EAAK7a,OAAO4a,GAAQE,GAAS,CAACD,EAAMC,EAAM9a,OAAO4a,MAC5F,CAAC,GAAI,KACJG,EAAO1F,EAAG,GACV2F,EAAU3F,EAAG,GAEjB,MAAO,CACLle,YAAa4jB,EAAKp1B,KAAK,KACvBg1B,cAAetgB,GAAM2gB,EAAQr1B,KAAK,KAAM+X,IEpBpBud,EAxEWzkB,EAwEIuf,EAAQtwB,QAAQg1B,EAAc,IAvE5DjkB,EAAKoF,MAAM,KAAK,IAAM,IAuE4ClO,EAAMmsB,OAAO7B,YAAata,EAAQsa,aAAa7gB,YAYpH,GAXAqjB,EA7EQ,SAAiBhkB,GAC7B,OAAOA,EAAKoF,MAAM,KAAK,GA4EHsf,CAAQV,IAAkBrjB,EAAc,IAAMA,EAAc,IAEvEkhB,GAAwBiC,GAA4B,MAAlBE,GAA0B,MAAMtkB,KAAKukB,KAC1ED,EAAgB,IAGlBN,EAAaT,SAASj1B,KAAKkJ,GAC3BlB,OAAOoJ,KAAK1Q,GAAO2Q,SAAQ,SAAU4L,GACnC,OAAOyY,EAAajkB,OAAOwL,GAASvc,EAAMuc,OAGvC6Y,IAAWE,EAAc12B,OAC5B,MAAO,CACLwB,MAAO40B,GAIX,IAAKI,GAA8B,WAApBF,GAA+D,IAA/BI,EAAchoB,QAAQ,KAAY,CAE/E,IAAI2oB,EAAyB9gB,GAAMmgB,EAAcvoB,MAAM,GAAIyL,EAAQsa,aAInE,OAHAxrB,OAAOoJ,KAAKulB,GAAwBtlB,SAAQ,SAAUuC,GACpD,OAAO8hB,EAAajkB,OAAOmC,GAAQ+iB,EAAuB/iB,MAErD,CACL9S,MAAO40B,GAKX,IAAIj3B,EAAWyK,EAAM0tB,yBAErB,OAAKn4B,EAASa,OAMP,CACLwB,MAAOy0B,EAAc92B,EAAUu3B,EAAeN,EAAcxc,EAAS+c,IAN9D,CACLn1B,MAAO,QAWNmf,EAAK,EAAG4W,EAAUrB,EAAOvV,EAAK4W,EAAQv3B,OAAQ2gB,IAAM,CAC3D,IAEI6W,EAAUf,EAFFc,EAAQ5W,IAIpB,GAAuB,iBAAZ6W,EAAsB,OAAOA,EAAQh2B,MAGlD,OAAO,MAQT,IAAIi2B,GAAgB,SAAuBC,GACzC,OAAO,SAAUX,EAAMC,GACrB,IAAIzF,EAAIE,EAAIqE,EAAItV,EAAIC,EAAIkX,EAEpBC,EAAWb,EAAKrkB,KAAK/Q,QAAQ,SAAU,IAAImW,MAAM,KAAK,GAAGnW,QAAQ,UAAW,MAC5Ek2B,EAAYb,EAAMtkB,KAAK/Q,QAAQ,SAAU,IAAImW,MAAM,KAAK,GAAGnW,QAAQ,UAAW,MAElF,GAAiB,MAAbi2B,EACF,OAAO,EAGT,GAAkB,MAAdC,EACF,OAAQ,EAIV,GAA2B,QAAtBtG,EAAKwF,EAAKhB,cAA2B,IAAPxE,OAAgB,EAASA,EAAGqC,aAC7D,OAAO,EAGT,GAA4B,QAAvBnC,EAAKuF,EAAMjB,cAA2B,IAAPtE,OAAgB,EAASA,EAAGmC,aAC9D,OAAQ,EAIV,IAAIkE,GAAgBF,EAASx2B,MAAM,QAAU,IAAIpB,OAC7C+3B,GAAiBF,EAAUz2B,MAAM,QAAU,IAAIpB,OAEnD,GAAI83B,EAAeC,EACjB,OAAO,EAGT,GAAID,EAAeC,EACjB,OAAQ,EAIV,IAAIC,EAAqGxX,OAAlFA,EAA4B,QAAtBsV,EAAKiB,EAAKhB,cAA2B,IAAPD,OAAgB,EAASA,EAAG7B,UAAUj0B,QAAuCwgB,EAAK,EACzIyX,EAAuGN,OAAnFA,EAA6B,QAAvBlX,EAAKuW,EAAMjB,cAA2B,IAAPtV,OAAgB,EAASA,EAAGwT,UAAUj0B,QAAuC23B,EAAK,EAE/I,GAAIK,EAAkBC,EACpB,OAAQ,EAGV,GAAID,EAAkBC,EACpB,OAAO,EAIT,IAAIC,GAAmBN,EAAS9f,MAAM,KAAK3J,OAAO,GAAG,IAAM,IAAInO,OAC3Dm4B,GAAoBN,EAAU/f,MAAM,KAAK3J,OAAO,GAAG,IAAM,IAAInO,OAEjE,OAAIk4B,EAAkBC,EACb,EAGLD,EAAkBC,GACZ,EAKHT,EAAiBhpB,QAAQqoB,GAAQW,EAAiBhpB,QAAQsoB,KAIjEoB,GAIJ,WACE,SAASA,EAAU9jB,EAAM5B,EAAM2lB,EAAaze,GA8B1C,YA7Ba,IAATtF,IACFA,EAAO,SAGI,IAAT5B,IACFA,EAAO,SAGW,IAAhB2lB,IACFA,EAAc,SAGA,IAAZze,IACFA,EAAU,IAGZpZ,KAAK8T,KAAOA,EACZ9T,KAAK83B,SAAW,KAAKlmB,KAAKM,GAC1BlS,KAAKkS,KAAOlS,KAAK83B,SAAW5lB,EAAKvE,MAAM,GAAKuE,EAC5ClS,KAAKu1B,OAASv1B,KAAKkS,KAAO,IAAIghB,GAAKlzB,KAAKkS,MAAQ,KAChDlS,KAAKrB,SAAW,GAChBqB,KAAKoG,OAASgT,EAAQhT,OACtBpG,KAAK+3B,eACL/3B,KAAK0rB,IAAImM,EAAaze,EAAQ4e,OAAO5e,EAAQ6e,YAAqC,IAAjB7e,EAAQ8e,MAErE9e,EAAQ6e,WACVj4B,KAAKm4B,kBAGAn4B,KAgST,OA7RA43B,EAAU/zB,UAAUu0B,kBAAoB,SAAUjD,GAKhD,YAJiB,IAAbA,IACFA,EAAW,IAGNn1B,KAAKoG,QAAUpG,KAAKoG,OAAOmvB,OAASv1B,KAAKoG,OAAOgyB,kBAAkBjD,EAASzZ,OAAO1b,KAAKoG,SAAW+uB,EAASvG,WAGpHgJ,EAAU/zB,UAAUw0B,UAAY,SAAUjyB,GACxCpG,KAAKoG,OAASA,EACdpG,KAAK+3B,gBAGPH,EAAU/zB,UAAUqV,QAAU,SAAUhH,QACzB,IAATA,IACFA,EAAO,IAGTlS,KAAKkS,KAAOA,EACZlS,KAAKu1B,OAASrjB,EAAO,IAAIghB,GAAKhhB,GAAQ,MAGxC0lB,EAAU/zB,UAAU6nB,IAAM,SAAU3S,EAAOuf,EAAIJ,GAC7C,IAAIrE,EAAQ7zB,KAMZ,QAJa,IAATk4B,IACFA,GAAO,GAGLnf,QACF,OAAO/Y,KAGT,GAAI+Y,aAAiB5Z,MAInB,OAHA4Z,EAAMxH,SAAQ,SAAUuJ,GACtB,OAAO+Y,EAAMnI,IAAI5Q,EAAGwd,EAAIJ,MAEnBl4B,KAGT,KAAM+Y,aAAiB6e,GAAgB7e,aAAiB7Q,QACtD,MAAM,IAAIrG,MAAM,+EACX,GAAIkX,aAAiB6e,EAC1B7e,EAAMsf,UAAUr4B,MAChBA,KAAKu4B,aAAaxf,EAAOmf,OACpB,CACL,IAAKnf,EAAMjF,OAASiF,EAAM7G,KACxB,MAAM,IAAIrQ,MAAM,qEAGlB,IAAI22B,EAAY,IAAIZ,EAAU7e,EAAMjF,KAAMiF,EAAM7G,KAAM6G,EAAMpa,SAAU,CACpEs5B,WAAW,EACXD,MAAOM,EACPlyB,OAAQpG,KACRk4B,KAAMA,IAEJO,EAAWD,EAAUJ,kBAAkB,CAACI,IAAYnuB,KAAI,SAAUuE,GACpE,OAAOA,EAAEkF,QACRzS,KAAK,KAEJi3B,GACFA,EAAG5I,GAASA,GAAS,GAAI3W,GAAQ,CAC/BjF,KAAM2kB,KAIVz4B,KAAKu4B,aAAaC,EAAWN,GAG/B,OAAOl4B,MAGT43B,EAAU/zB,UAAU60B,QAAU,SAAU5kB,EAAM5B,GAE5C,OADAlS,KAAK0rB,IAAI,IAAIkM,EAAU9jB,EAAM5B,IACtBlS,MAGT43B,EAAU/zB,UAAU+yB,QAAU,SAAU+B,GACtC,IArUmDxD,EAqU/CyD,EAAiB54B,KAAK64B,kBAAkBF,GAC5C,OAAOC,GAtU4CzD,EAsUPyD,GArU5BzD,EAAS9qB,KAAI,SAAUonB,GACvC,OAAOA,EAAQvf,QACd7Q,KAAK,IAAM,KAmUkD,MAGhEu2B,EAAU/zB,UAAUizB,uBAAyB,WAC3C,OAAO92B,KAAKrB,SAAS0gB,QAAO,SAAUjW,GACpC,OAAQA,EAAM0uB,aAIlBF,EAAU/zB,UAAUi1B,aAAe,WAC7B94B,KAAKrB,SAASa,QAtMtB,SAAsBb,GACpB,IAAIu4B,EAAmBv4B,EAASgP,MAAM,GAC/BhP,EAASu5B,KAAKjB,GAAcC,IAqM/B4B,CAAa94B,KAAKrB,WAItBi5B,EAAU/zB,UAAUs0B,gBAAkB,WACpCn4B,KAAK84B,eACL94B,KAAKrB,SAAS4S,SAAQ,SAAUnI,GAC9B,OAAOA,EAAM+uB,sBAIjBP,EAAU/zB,UAAUk1B,UAAY,SAAUJ,EAAWhnB,EAAQyH,QAC5C,IAAXzH,IACFA,EAAS,SAGK,IAAZyH,IACFA,EAAU,IAGZ,IAAI+b,EAAWn1B,KAAK64B,kBAAkBF,GAEtC,IAAKxD,EACH,MAAM,IAAItzB,MAAM,wDAGlB,OA1awB,SAA+BszB,EAAUxjB,EAAQyH,QAC5D,IAAXzH,IACFA,EAAS,SAGK,IAAZyH,IACFA,EAAU,IAUZ,IAPA,IAAI2X,EAAK3X,EAAQ0c,gBACbA,OAAyB,IAAP/E,EAAgB,UAAYA,EAC9CE,EAAK7X,EAAQ4f,kBACbA,OAA2B,IAAP/H,EAAgB,UAAYA,EAChD6D,EAAe,GACfmE,EAAkB,GAEb9Y,EAAK,EAAG+Y,EAAa/D,EAAUhV,EAAK+Y,EAAW15B,OAAQ2gB,IAAM,CACpE,IACIoV,EADU2D,EAAW/Y,GACJoV,OAEjBA,IACFT,EAAa50B,KAAK4B,MAAMgzB,EAAcS,EAAO7B,aAC7CuF,EAAgB/4B,KAAK4B,MAAMm3B,EAAiB1D,EAAO9B,WACnDwF,EAAgB/4B,KAAK4B,MAAMm3B,EAAiB1D,EAAOhC,aAIvD,GAAwB,UAApBuC,EAA6B,CAC/B,IAAIqD,EAAcjxB,OAAOoJ,KAAKK,GAAQmf,QAAO,SAAU6D,EAAK1Z,GAC1D,OAAoC,IAA7B6Z,EAAa5mB,QAAQ+M,KAA6C,IAAhCge,EAAgB/qB,QAAQ+M,GAAY0Z,EAAIjZ,OAAOT,GAAK0Z,IAC5F,IACHG,EAAa50B,KAAK4B,MAAMgzB,EAAcqE,GAGxC,IAAIC,EAAqBtE,EAAahE,QAAO,SAAU6D,EAAKrD,GAK1D,OAJgD,IAA5CppB,OAAOoJ,KAAKK,GAAQzD,QAAQojB,KAC9BqD,EAAIrD,GAAa3f,EAAO2f,IAGnBqD,IACN,IACCK,EAAa3D,GAAM+H,EAAoBhgB,EAAQsa,aAC/CxhB,EAAOijB,EAASrE,QAAO,SAAU5e,EAAMuf,GACzC,IAAIV,EAAIE,EAEJoI,EAIApI,OAJeA,EAA+B,QAAzBF,EAAKU,EAAQ8D,cAA2B,IAAPxE,OAAgB,EAASA,EAAGM,MAAM1f,EAAQ,CAClG8iB,cAAc,EACdf,YAAata,EAAQsa,YACrBT,kBAAmB7Z,EAAQ6Z,qBACMhC,EAAK,GACxC,OAAOQ,EAAQqG,SAAWuB,EAAcnnB,EAAOmnB,IAC9C,IACFl4B,QAAQ,YAAa,KAClBm4B,EAAYpnB,EAQhB,MAN0B,WAAtB8mB,EACFM,EAAY,MAAM1nB,KAAKM,GAAQA,EAAOA,EAAO,IACd,UAAtB8mB,GAA0C,MAAT9mB,IAC1ConB,EAAY,MAAM1nB,KAAKM,GAAQA,EAAKvE,MAAM,GAAI,GAAKuE,GAG9ConB,GAAatE,EAAa,IAAMA,EAAa,IA6W3CuE,CAAsBpE,EAAUxjB,EAAQyH,IAGjDwe,EAAU/zB,UAAU21B,WAAa,SAAU1lB,EAAMnC,QAChC,IAAXA,IACFA,EAAS,IAGX,IAAIwjB,EAAWn1B,KAAK64B,kBAAkB/kB,GAEtC,OAAKqhB,GAAaA,EAAS31B,OAIpB,CACLsU,KAAMA,EACNnC,OAAQA,EACR0jB,KAAMH,GAAoBC,IANnB,MAUXyC,EAAU/zB,UAAU41B,UAAY,SAAUvnB,EAAMkH,QAC9B,IAAZA,IACFA,EAAU,IAGC,KAATlH,GAAgBkH,EAAQ2a,sBAC1B7hB,EAAO,KAGT,IAAItR,EAAQZ,KAAK05B,wBAAwBxnB,EAAMkH,GAE/C,IAAKxY,EACH,OAAO,KAGT,IAAI+4B,EAAkB/4B,EAAMu0B,SAE5B,GAAIwE,EAAgB,GAAG7B,SAAU,CAC/B,IAAI8B,EAAqBD,EAAgB,GAAGvB,oBAC5CuB,EAAgB/K,UAChB+K,EAAgBz5B,KAAK4B,MAAM63B,EAAiBC,GAC5CD,EAAgB/K,UAGlB,IACIiL,EADcF,EAAgBA,EAAgBn6B,OAAS,GACnBs6B,iBAMxC,OAJID,GACFF,EAAgBz5B,KAAK25B,GA5eD,SAA6Bj5B,GACrD,OAAKA,GAAUA,EAAMu0B,UAAav0B,EAAMu0B,SAAS31B,OAU1C,CACLsU,KAPSlT,EAAMu0B,SAAS9qB,KAAI,SAAUonB,GACtC,OAAOA,EAAQ3d,QACduL,QAAO,SAAUvL,GAClB,OAAOA,KACNzS,KAAK,KAINsQ,OAHW/Q,EAAM+Q,OAIjB0jB,KAAMH,GAAoBt0B,EAAMu0B,WAZzB,KA6eA4E,CAAoBn5B,IAG7Bg3B,EAAU/zB,UAAU00B,aAAe,SAAUxf,EAAOmf,QACrC,IAATA,IACFA,GAAO,GAGT,IAAI8B,EAAQjhB,EAAMjF,KAAKwD,MAAM,KAE7B,GAAqB,IAAjB0iB,EAAMx6B,OAAc,CAEtB,IAE4B,IAFxBQ,KAAKrB,SAAS0L,KAAI,SAAUjB,GAC9B,OAAOA,EAAM0K,QACZ5F,QAAQ6K,EAAMjF,MACf,MAAM,IAAIjS,MAAM,UAAakX,EAAMjF,KAAO,sCAI5C,IAE4B,IAFxB9T,KAAKrB,SAAS0L,KAAI,SAAUjB,GAC9B,OAAOA,EAAM8I,QACZhE,QAAQ6K,EAAM7G,MACf,MAAM,IAAIrQ,MAAM,SAAYkX,EAAM7G,KAAO,sCAG3ClS,KAAKrB,SAASuB,KAAK6Y,GAEfmf,GACFl4B,KAAK84B,mBAEF,CAEL,IAAI3D,EAAWn1B,KAAK64B,kBAAkBmB,EAAMrsB,MAAM,GAAI,GAAGtM,KAAK,MAE9D,IAAI8zB,EAIF,MAAM,IAAItzB,MAAM,8BAAgCkX,EAAMjF,KAAO,yBAH7DiF,EAAMjF,KAAOkmB,EAAMA,EAAMx6B,OAAS,GAClC21B,EAASA,EAAS31B,OAAS,GAAGksB,IAAI3S,GAMtC,OAAO/Y,MAGT43B,EAAU/zB,UAAUk0B,aAAe,WACjC,GAAI/3B,KAAK83B,UAAY93B,KAAKi6B,mBACxB,MAAM,IAAIp4B,MAAM,2FAIpB+1B,EAAU/zB,UAAUo2B,iBAAmB,WACrC,GAAIj6B,KAAKoG,QAAUpG,KAAKoG,OAAOmvB,OAAQ,CACrC,IAAIA,EAASv1B,KAAKoG,OAAOmvB,OAEzB,OADgBA,EAAOpC,cAAgBoC,EAAOnC,cAAgBmC,EAAOlC,iBAAmBkC,EAAOjC,gBAC3EtzB,KAAKoG,OAAO6zB,mBAGlC,OAAO,GAGTrC,EAAU/zB,UAAUq2B,qBAAuB,WACzC,OAAOl6B,KAAKrB,SAASmyB,QAAO,SAAUqJ,EAAkB/wB,GACtD,OAAO+wB,EAAiBze,OAAOtS,EAAM0uB,SAAW1uB,EAAQ,IAAIsS,OAAOtS,EAAM8wB,0BACxE,KAGLtC,EAAU/zB,UAAUi2B,eAAiB,WAInC,OAHoB95B,KAAK82B,yBAAyBzX,QAAO,SAAUjW,GACjE,OAAOA,EAAMmsB,QAAU,YAAY3jB,KAAKxI,EAAMmsB,OAAOrjB,SAElC,IAGvB0lB,EAAU/zB,UAAUg1B,kBAAoB,SAAUF,GAChD,IAOIxD,EAAW,GACXjb,EAASla,KAAKu1B,OAAS,CAACv1B,MAAQA,KAAKrB,SAazC,OAZaqB,KAAKu1B,OAAS,CAAC,IAAM,IAAI7Z,OAAOid,EAAUrhB,MAAM,MACzCoK,OAAM,SAAU5N,GAClC,IAAI2d,EAXkB,SAA2B3d,EAAMoG,GACvD,IAAIkgB,EAAiBlgB,EAAOmF,QAAO,SAAUvE,GAC3C,OAAOA,EAAEhH,OAASA,KAEpB,OAAOsmB,EAAe56B,OAAS46B,EAAe,QAAKv7B,EAOrCw7B,CAAkBvmB,EAAMoG,GAEtC,QAAIuX,IACFvX,EAASuX,EAAQ9yB,SACjBw2B,EAASj1B,KAAKuxB,IACP,MAKM0D,EAAW,MAG9ByC,EAAU/zB,UAAU61B,wBAA0B,SAAUxnB,EAAMkH,GAC5D,IACIkhB,GADgBt6B,KAAKu1B,OAAS,CAACv1B,MAAQA,KAAKrB,UACdmyB,QAAO,SAAU4E,EAAOx2B,GACxD,OAAOw2B,EAAMha,OAAOxc,EAAMA,EAAKg7B,0BAC9B,IAKCK,EAAa9E,GAAc6E,EAAepoB,EAJ3B,CACjBijB,SAAU,GACVxjB,OAAQ,IAEwDyH,GAElE,OAAImhB,GAA6C,IAA/BA,EAAWpF,SAAS31B,QAAgD,KAAhC+6B,EAAWpF,SAAS,GAAGrhB,KACpE,KAGFymB,GAGF3C,EA/TT,G,UC/TI4C,GAAY,SAAU1mB,GACtB,OAAOA,EACFwD,MAAM,KACNwZ,QAAO,SAAU2J,EAAK3mB,GACvB,OAAO2mB,EAAI/e,OAAO+e,EAAIj7B,OAASi7B,EAAIA,EAAIj7B,OAAS,GAAK,IAAMsU,EAAOA,KACnE,KAGH4mB,GAAgB,SAAU57B,GAAS,OAAOA,GAASA,EAAMu2B,MAAQv2B,EAAMu2B,KAAK1jB,QAC5EgpB,GAAuB,SAAU7mB,EAAMhV,GACvC,OAAK47B,GAAc57B,IAHcsN,MAGItN,EAAMu2B,KAAK1jB,OAAOmC,GAEhD5L,OAAOoJ,KAAKxS,EAAMu2B,KAAK1jB,OAAOmC,IAAOgd,QAAO,SAAUnf,EAAQsJ,GAEjE,OADAtJ,EAAOsJ,GAAKnc,EAAM6S,OAAOsJ,GAClBtJ,IACR,IAJQ,IAMf,SAASipB,GAAeC,EAASC,GAC7B,IA8BIp7B,EA9BAq7B,EAAkBF,EAAQxF,MAAQwF,EAAQxF,MAAQwF,EAAQxF,KAAKjc,SAAY,GAC3E4hB,EAAeF,EAAYN,GAAUM,EAAUhnB,MAAQ,GACvDmnB,EAAaT,GAAUK,EAAQ/mB,MAC/BonB,EAAO3kB,KAAKmQ,IAAIsU,EAAax7B,OAAQy7B,EAAWz7B,QA6BhDE,GADCo7B,GAAaC,EAAeI,OACzB,EAEET,GAAcI,IAAeJ,GAAcG,GA9BrD,WACI,IAAIn7B,EACAu2B,EAAU,WACV,IAAIM,EAAOyE,EAAat7B,GACpB82B,EAAQyE,EAAWv7B,GACvB,GAAI62B,IAASC,EACT,MAAO,CAAEx1B,MAAOtB,GACpB,IAAI07B,EAAaT,GAAqBpE,EAAMsE,GACxCQ,EAAcV,GAAqBnE,EAAOsE,GAC9C,OAAI5yB,OAAOoJ,KAAK8pB,GAAY57B,SACxB0I,OAAOoJ,KAAK+pB,GAAa77B,OAClB,CAAEwB,MAAOtB,GACmB,IAAnCwI,OAAOoJ,KAAK8pB,GAAY57B,OACjB,WACK0I,OAAOoJ,KAAK8pB,GAAYhgB,MAAK,SAAUH,GAAK,OAAOogB,EAAYpgB,KAAOmgB,EAAWngB,MAEtF,CAAEja,MAAOtB,QADpB,GAIJ,IAAKA,EAAI,EAAGA,EAAIw7B,EAAMx7B,GAAK,EAAG,CAC1B,IAAIs3B,EAAUf,IACd,GAAuB,iBAAZe,EACP,OAAOA,EAAQh2B,MAEvB,OAAOtB,EAUH47B,GAHA,EAKR,IAAIC,EAAeP,EAAartB,MAAMjO,GAAGkvB,UACrC4M,EAAaP,EAAWttB,MAAMjO,GAElC,MAAO,CACH+7B,aAFeX,GAAap7B,EAAI,EAAIs7B,EAAat7B,EAAI,GAAK,GAG1D67B,aAAcA,EACdC,WAAYA,GAwDpB,YCnGA,IAAI,GAAW,WAQX,OAPA,GAAWtzB,OAAOkJ,QAAU,SAAkBue,GAC1C,IAAK,IAAIC,EAAGlwB,EAAI,EAAGse,EAAIje,UAAUP,OAAQE,EAAIse,EAAGte,IAE5C,IAAK,IAAIub,KADT2U,EAAI7vB,UAAUL,GACOwI,OAAOrE,UAAUvD,eAAeG,KAAKmvB,EAAG3U,KAAI0U,EAAE1U,GAAK2U,EAAE3U,IAE9E,OAAO0U,IAEK7tB,MAAM9B,KAAMD,YAG5B,GAAiB,CACjBi5B,kBAAmB,UACnBlD,gBAAiB,UACjB/B,qBAAqB,EACrB2H,aAAa,EACbC,eAAe,EACf5F,gBAAgB,EAChB6F,oBAAoB,EACpB9H,eAAe,EACfb,kBAAmB,WAcvB,IAAI4I,GACoB,cADpBA,GAEwB,yBAFxBA,GAGwB,kBAHxBA,GAIiB,kBAJjBA,GAKa,cALbA,GAMmB,oBANnBA,GAOiB,kBAPjBA,GAQgB,iBARhBA,GASsB,YAEtBC,GACe,0BADfA,GAEc,SAFdA,GAGa,QAHbA,GAIkB,UAJlBA,GAKmB,WALnBA,GAMoB,YANpBA,GAOkB,UAkHtB,SAASC,GAAUlR,GACf,IAAImR,EAAU,EACVC,EAAc,KAyDlB,OAxDApR,EAAOqR,SAAW,WAAc,OAAOD,GACvCpR,EAAOsR,SAAW,SAAUr9B,GACxBm9B,EAAcn9B,GAElB+rB,EAAOuR,UAAY,SAAUtoB,EAAMnC,EAAQO,EAAMmjB,EAAMgH,GAAW,MAAO,CACrEvoB,KAAMA,EACNnC,OAAQ,GAAS,GAAS,GAAIkZ,EAAO3U,OAAOomB,cAAcxoB,IAAQnC,GAClEO,KAAMA,EACNmjB,KAAMA,EACA,GAAS,GAAS,GAAIA,GAAO,CAAEp0B,QAAgBpC,IAAZw9B,IAA0BL,EAAUK,SAAax9B,IAE9FgsB,EAAO0R,kBAAoB,SAAUrqB,EAAMkH,GACvC,OAAOyR,EAAOuR,UAAUN,GAAyB,CAAE5pB,KAAMA,GAAQA,EAAM,CACnEkH,QAASA,KAGjByR,EAAO2R,eAAiB,SAAUC,EAAQC,EAAQC,GAE9C,QAD0B,IAAtBA,IAAgCA,GAAoB,GACpDF,EAAO3oB,OAAS4oB,EAAO5oB,KACvB,OAAO,EACX,IAAI8oB,EAAe,SAAU9oB,GACzB,OAAO+W,EAAOgS,SAEThE,kBAAkB/kB,GAClBzJ,KAAI,SAAUonB,GAAW,OAAOA,EAAQ8D,OAAkB,aAC1DzE,QAAO,SAAUnf,EAAQsJ,GAAK,OAAOtJ,EAAO+J,OAAOT,KAAO,KAE/D6hB,EAAeH,EACbC,EAAaH,EAAO3oB,MACpB5L,OAAOoJ,KAAKmrB,EAAO9qB,QACrBorB,EAAeJ,EACbC,EAAaF,EAAO5oB,MACpB5L,OAAOoJ,KAAKorB,EAAO/qB,QACzB,OAAQmrB,EAAat9B,SAAWu9B,EAAav9B,QACzCs9B,EAAapb,OAAM,SAAUzG,GAAK,OAAOwhB,EAAO9qB,OAAOsJ,KAAOyhB,EAAO/qB,OAAOsJ,OAEpF4P,EAAOmS,qBAAuB,SAAUC,EAAaC,GAEjD,QADY,IAAIziB,OAAO,IAAMwiB,EAAYnpB,KAAO,YACrClC,KAAKsrB,EAAWppB,OAIpB5L,OAAOoJ,KAAK2rB,EAAYtrB,QAAQ+P,OAAM,SAAUzG,GAAK,OAAOgiB,EAAYtrB,OAAOsJ,KAAOiiB,EAAWvrB,OAAOsJ,OAEnH4P,EAAOsS,aAAe,SAAUxE,EAAWyE,GACvC,IAAItpB,EAAO+W,EAAO3U,OAAOmnB,WAAW1E,IAAcA,EAElD,MAAO,CACH7kB,KAAMA,EACNnC,OAHS,GAAS,GAAS,GAAS,GAAIkZ,EAAO3U,OAAOomB,cAAc3D,IAAa9N,EAAO3U,OAAOomB,cAAcxoB,IAAQspB,KAM7HvS,EAAO2O,WAAa,SAAUb,EAAWyE,GACrC,IAAIrM,EAAKlG,EAAOsS,aAAaxE,EAAWyE,GAActpB,EAAOid,EAAGjd,KAAMnC,EAASof,EAAGpf,OAClF,OAAOkZ,EAAOgS,SAASrD,WAAW1lB,EAAMnC,IAErCkZ,EAGX,IAAIyS,GAAY,CACZC,QAASzB,GACT0B,OAAQ1B,GACR2B,oBAAqB3B,GACrB4B,kBAAmB5B,GACnB6B,kBAAmB7B,GACnB8B,mBAAoB9B,IAExB,SAAS+B,GAAYhT,GACjB,IAAIiT,EAAgB,GAgBpB,SAASC,EAAYC,GACjB,IAAIC,EAAgBpT,EAAOqT,eAAeF,GACtCG,EAAuBj2B,OAAOoJ,KAAKgsB,IAClCjzB,KAAI,SAAU+zB,GACf,GAAIH,EAAcG,GACd,OAAOvT,EAAO/b,iBAAiBwuB,GAAUc,GAAaH,EAAcG,OAGvE/e,OAAO3C,SACZ,OAAO,WACHyhB,EAAqB5sB,SAAQ,SAAU8sB,GAAkB,OAAOA,OAC5DJ,EAAcjc,UACdic,EAAcjc,YAI1B,OA/BA6I,EAAOyT,WAAa,WAAc,OAAOR,GACzCjT,EAAO0T,UAAY,WAEf,IADA,IAAIC,EAAU,GACLre,EAAK,EAAGA,EAAKpgB,UAAUP,OAAQ2gB,IACpCqe,EAAQre,GAAMpgB,UAAUogB,GAE5B,IAAIse,EAAkBD,EAAQn0B,KAAI,SAAU2zB,GAExC,OADAF,EAAc59B,KAAK89B,GACZD,EAAYC,MAEvB,OAAO,WACHF,EAAgBA,EAAcze,QAAO,SAAU2e,GAAU,OAAoC,IAA7BQ,EAAQtwB,QAAQ8vB,MAChFS,EAAgBltB,SAAQ,SAAUmtB,GAAgB,OAAOA,SAmB1D7T,EAGX,SAAS8T,GAAe9T,GACpB,IAAI+T,EAAsB,GACtBC,EAAsB,GAwB1B,OAvBAhU,EAAOiU,cAAgB,WAEnB,IADA,IAAIC,EAAc,GACT5e,EAAK,EAAGA,EAAKpgB,UAAUP,OAAQ2gB,IACpC4e,EAAY5e,GAAMpgB,UAAUogB,GAEhC,IAAIse,EAAkBM,EAAY10B,KAAI,SAAU20B,GAC5C,IAAIC,EAAqBpU,EAAOqT,eAAec,GAG/C,OAFAJ,EAAoB1+B,KAAK8+B,GACzBH,EAAoB3+B,KAAK++B,GAClB,WACHL,EAAsBA,EAAoBvf,QAAO,SAAUrI,GAAK,OAAOA,IAAMgoB,KAC7EH,EAAsBA,EAAoBxf,QAAO,SAAUrI,GAAK,OAAOA,IAAMioB,SAGrF,OAAO,WAAc,OAAOR,EAAgBltB,SAAQ,SAAU5N,GAAM,OAAOA,SAE/EknB,EAAOqU,gBAAkB,WAGrB,OAFAN,EAAsB,GACtBC,EAAsB,GACfhU,GAEXA,EAAOsU,uBAAyB,WAAc,OAAOP,GACrD/T,EAAOuU,uBAAyB,WAAc,OAAOP,GAC9ChU,EAGX,SAASwU,GAAkBxU,GACvB,IAAIyU,EAAY,GAehB,SAASC,EAAUC,GACf,IAAIC,EAA+B,iBAAbD,EAClBE,EAAgBD,EAAWD,EAASp7B,KAAKb,KAAKi8B,GAAYA,EAC1DG,EAAqB9U,EAAO/b,iBAAiBgtB,IAA8B,SAAUjB,EAASC,GAC9F4E,EAAc,CACV3mB,MAAO8hB,EACP+E,cAAe9E,OAGvB,OAAO2E,EACD,CAAEI,YAAaF,GACfA,EAEV,SAASniB,IACL,IAAIuT,EACJ,OAAOA,EAAK,CACJwO,UAAW,SAAUO,GACjB,GAAwB,iBAAbA,GAAsC,OAAbA,EAChC,MAAM,IAAIngC,UAAU,0CAExB,OAAO4/B,EAAUO,MAGtB,MAAgB,WACf,OAAO9/B,MAEX+wB,EAOR,OA/CAlG,EAAOkV,qBAAuB,SAAUC,GAEpC,IADA,IAAIjvB,EAAO,GACFoP,EAAK,EAAGA,EAAKpgB,UAAUP,OAAQ2gB,IACpCpP,EAAKoP,EAAK,GAAKpgB,UAAUogB,IAE5Bmf,EAAUU,IAAc,IAAIzuB,SAAQ,SAAU+mB,GAAM,OAAOA,EAAGx2B,WAAM,EAAQiP,OAEjF8Z,EAAOhc,oBAAsB,SAAUmxB,EAAW1H,GAC9CgH,EAAUU,GAAaV,EAAUU,GAAW3gB,QAAO,SAAU4gB,GAAO,OAAOA,IAAQ3H,MAEvFzN,EAAO/b,iBAAmB,SAAUkxB,EAAW1H,GAE3C,OADAgH,EAAUU,IAAcV,EAAUU,IAAc,IAAItkB,OAAO4c,GACpD,WAAc,OAAOzN,EAAOhc,oBAAoBmxB,EAAW1H,KA8BtEzN,EAAO0U,UAAYA,EAEnB1U,EAAO,MAAgBrN,EAEvBqN,EAAO,gBAAkBrN,EAClBqN,EAGX,SAASvmB,GAAQ47B,EAAWnP,EAAI5sB,GAC5B,IAAIg8B,EAAcpP,EAAGoP,YAAatF,EAAU9J,EAAG8J,QAASC,EAAY/J,EAAG+J,UAAW7J,EAAKF,EAAGqP,SAAUA,OAAkB,IAAPnP,OAAgBpyB,EAAYoyB,EACvIoP,EAAqBlhC,MAAMC,QAAQ8gC,GACjCA,EACAh4B,OAAOoJ,KAAK4uB,GACdI,EAAU,SAAU5hB,GACpB,MAAsB,iBAARA,QACG7f,IAAb6f,EAAI5K,WACWjV,IAAf6f,EAAI/M,aACS9S,IAAb6f,EAAIxM,MAQRquB,EAAY,SAAUC,EAAQC,EAAS3hC,EAAO4hC,GAC9C,IAAItgB,EAAO,SAAUC,EAAKsgB,GAClBtgB,EACAqgB,EAAMrgB,GAEDsgB,GAAYA,IAAa7hC,GAASwhC,EAAQK,IAXrC,SAAU9F,EAASC,GACrC,OAAOA,EAAUhnB,OAAS+mB,EAAQ/mB,MAC9BgnB,EAAUnpB,SAAWkpB,EAAQlpB,QAC7BmpB,EAAU5oB,OAAS2oB,EAAQ3oB,KASnB0uB,CAAgBD,EAAU7hC,IAC1BqE,QAAQC,MAAM,4GAElBs9B,EAAM,KAVA,SAAU7F,EAASC,GAAa,OAAQ,GAAS,GAAS,GAAS,GAAIA,GAAYD,GAAU,CAAExF,KAAM,GAAS,GAAS,GAAIyF,EAAUzF,MAAOwF,EAAQxF,QAU9IwL,CAAYF,EAAU7hC,KAGlC4hC,EAAM,KAAM5hC,IAGhBgiC,EAAMN,EAAO//B,KAAK,KAAM3B,EAAOg8B,EAAW1a,GAC1C+f,IACA/f,EAAK,MAEe,kBAAR0gB,EACZ1gB,EAAK0gB,EAAM,KAAOL,GAEbH,EAAQQ,GACb1gB,EAAK,KAAM0gB,GAENA,GAA2B,mBAAbA,EAAI59B,MACvB49B,EAAI59B,MAAK,SAAU69B,GACXA,aAAkBl/B,MAClBue,EAAK,CAAEhd,MAAO29B,GAAU,MAExB3gB,EAAK,KAAM2gB,MAChB,SAAU1gB,GACLA,aAAexe,OACfsB,QAAQC,MAAMid,EAAI2gB,OAAS3gB,GAC3BD,EAAK,GAAS,GAAS,GAAIqgB,GAAU,CAAEQ,aAAc5gB,IAAQ,OAG7DD,EAAoB,iBAARC,EACN,GAAS,GAAS,GAAIogB,GAAUpgB,GAAOogB,EAAS,UAMlEr8B,EAAO,SAAUic,EAAKvhB,GACtB,IAAIiyB,EACJ,GAAIoP,IACAh8B,SAEC,GAAIkc,EACLlc,EAASkc,QAGT,GAAKggB,EAAmB7gC,OAGnB,CACD,IAAI0hC,EAA4C,iBAA1Bb,EAAmB,GACrCI,EAAUL,GAAYc,IACnBnQ,EAAK,IAAOqP,GAAYC,EAAmB,GAAItP,GAAM,GACxDyP,EAASU,EACPhB,EAAUG,EAAmB,IAC7BA,EAAmB,GACzBA,EAAqBA,EAAmB1yB,MAAM,GAC9C4yB,EAAUC,EAAQC,EAAS3hC,EAAOsF,QAVlCD,EAAS,KAAMrF,IAc3BsF,EAAK,KAAMy2B,GAiFf,IAAIsG,GAAO,aACX,SAASC,GAAevW,GACpB,IAAIwW,EA2BJ,SAASnW,IAEL,IADA,IAAIna,EAAO,GACFoP,EAAK,EAAGA,EAAKpgB,UAAUP,OAAQ2gB,IACpCpP,EAAKoP,GAAMpgB,UAAUogB,GAEzB,IAAIrM,EAAO/C,EAAK,GACZuwB,EAAUvwB,EAAKA,EAAKvR,OAAS,GAC7B4gB,EAA0B,mBAAZkhB,EAAyBA,EAAUH,GACjDxvB,EAA4B,iBAAZZ,EAAK,GAAkBA,EAAK,GAAK,GACjD+e,EAA0B,iBAAZ/e,EAAK,GAAkBA,EAAK,GAAK,GACnD,GAAK8Z,EAAO0W,YAAZ,CAIA,IAAIxoB,EAAQ8R,EAAO2O,WAAW1lB,EAAMnC,GACpC,IAAKoH,EAID,OAFAqH,EADIC,EAAM,CAAEpK,KAAM4lB,UAElBhR,EAAOkV,qBAAqBjE,GAA4B,KAAMjR,EAAOqR,WAAY7b,GAGrF,IAOQA,EAPJwa,EAAUhQ,EAAOuR,UAAUrjB,EAAMjF,KAAMiF,EAAMpH,OAAQkZ,EAAOkO,UAAUhgB,EAAMjF,KAAMiF,EAAMpH,QAAS,CAAEA,OAAQoH,EAAMsc,KAAMjc,QAAS0W,IAChI0R,IAAa3W,EAAOqR,YAClBrR,EAAO2R,eAAe3R,EAAOqR,WAAYrB,GAAS,GAIxD,GAAI2G,IAAe1R,EAAKqL,SAAWrL,EAAKpkB,MAIpC,OAFA0U,EADIC,EAAM,CAAEpK,KAAM4lB,UAElBhR,EAAOkV,qBAAqBjE,GAA4BjB,EAAShQ,EAAOqR,WAAY7b,GAGxF,IAAIya,EAAYjQ,EAAOqR,WACvB,OAAIpM,EAAK2R,gBACLrhB,EAAK,KAAMya,GACJsG,IAGJtW,EAAO6W,kBAAkB7G,EAASC,EAAWhL,GAAM,SAAUzP,EAAKvhB,GACrE,GAAIuhB,EACA,GAAIA,EAAIshB,SAAU,CACd,IAAI5Q,EAAK1Q,EAAIshB,SACbzW,EADgC6F,EAAGjd,KAAiBid,EAAGpf,OAC5B,GAAS,GAAS,GAAIme,GAAO,CAAEpkB,OAAO,EAAMk2B,YAAY,IAASxhB,QAG5FA,EAAKC,QAITwK,EAAOkV,qBAAqBjE,GAA8Bh9B,EAAOg8B,EAAWhL,GAC5E1P,EAAK,KAAMthB,MAxCfshB,EAAK,CAAEnK,KAAM4lB,KAoErB,OAzGAhR,EAAOK,SAAWA,EAClBL,EAAOK,SAAWA,EAClBL,EAAOgX,kBAAoB,WAEvB,IADA,IAAI9wB,EAAO,GACFoP,EAAK,EAAGA,EAAKpgB,UAAUP,OAAQ2gB,IACpCpP,EAAKoP,GAAMpgB,UAAUogB,GAEzB,IAAI2P,EAA0B,iBAAZ/e,EAAK,GAAkBA,EAAK,GAAK,GAC/CqP,EAAuB,IAAhBrP,EAAKvR,OACVuR,EAAK,GACc,mBAAZA,EAAK,GACRA,EAAK,GACLowB,GACN/nB,EAAUyR,EAAOiX,aACrB,OAAI1oB,EAAQa,aACDiR,EAAS9R,EAAQa,aAAcb,EAAQkjB,cAAexM,EAAM1P,GAEhE,cAEXyK,EAAOkX,OAAS,WAKZ,OAJIV,IACAA,EAAwB,YACxBA,EAA0B,MAEvBxW,GAyDXA,EAAO6W,kBAAoB,SAAU7G,EAASC,EAAW1hB,EAASgH,GAsB9D,YArBgB,IAAZhH,IAAsBA,EAAU,SACvB,IAATgH,IAAmBA,EAAO+gB,IAC9BtW,EAAOkX,SACPlX,EAAOkV,qBAAqBjE,GAA4BjB,EAASC,GACjEuG,EAvKR,SAAoBxW,EAAQgQ,EAASC,EAAWhL,EAAM3rB,GAClD,IAAI69B,GAAY,EACZC,GAAY,EACZ7oB,EAAUyR,EAAOiX,aACjB/Q,EAAKlG,EAAOqX,wBAAyBC,EAAyBpR,EAAG,GAAIqR,EAAuBrR,EAAG,GAC/F8N,EAAsBhU,EAAOuU,yBAC7Be,EAAc,WAAc,OAAO6B,GAqBnCK,EAAY,SAAUxN,EAAMxU,GAAO,OAAQ,GAAS,GAAS,GAAIwU,GAAQxU,aAAenY,OAASmY,EAAM,CAAEjd,MAAOid,KAChHiiB,EAAiBzH,EAAQ/mB,OAASgoB,GAClCyG,EAAY,CAAEpC,YAAaA,EAAatF,QAASA,EAASC,UAAWA,GACrE7J,EAAK,GAAe4J,EAASC,GAAYS,EAAetK,EAAGsK,aAAcC,EAAavK,EAAGuK,WACzFgH,GAAiB1H,GAAahL,EAAK2S,gBACjC,GACA,SAAU5H,EAASC,EAAWxC,GAO5Bh0B,GAN+Bi3B,EAC1Blc,QAAO,SAAUvL,GAAQ,OAAOquB,EAAuBruB,MACvDgd,QAAO,SAAU4R,EAAO5uB,GACzB,IAAIid,EACJ,OAAQ,GAAS,GAAS,GAAI2R,KAAS3R,EAAK,IAAOjd,GAAQquB,EAAuBruB,GAAOid,MAC1F,IAC+B,GAAS,GAAS,GAAIwR,GAAY,CAAEnC,SAAU,aAAc,SAAU/f,GACpG,OAAOiY,EAAGjY,EACJgiB,EAAU,CAAEpsB,KAAM4lB,IAAgCxb,GAClD,UAGdsiB,EAAcL,EACZ,GACA,SAAUzH,EAASC,EAAWxC,GAO5Bh0B,GAN6Bk3B,EACxBnc,QAAO,SAAUvL,GAAQ,OAAOsuB,EAAqBtuB,MACrDgd,QAAO,SAAU4R,EAAO5uB,GACzB,IAAIid,EACJ,OAAQ,GAAS,GAAS,GAAI2R,KAAS3R,EAAK,IAAOjd,GAAQsuB,EAAqBtuB,GAAOid,MACxF,IAC6B,GAAS,GAAS,GAAIwR,GAAY,CAAEnC,SAAU,aAAc,SAAU/f,GAClG,OAAOiY,EAAGjY,EACJgiB,EAAU,CAAEpsB,KAAM4lB,IAA8Bxb,GAChD,UAGd2e,EAAcH,EAAoBr/B,OAEhC,SAAUq7B,EAASC,EAAWxC,GAC5B,OAAOh0B,GAAQu6B,EAAqB,GAAS,GAAI0D,IAAY,SAAUliB,EAAKvhB,GACxE,OAAOw5B,EAAGjY,EACJgiB,EAAU,CAAEpsB,KAAM4lB,IAA6Bxb,GAC/C,KAAMvhB,GAAS+7B,OAL3B,GAaN,OADAv2B,GAJe,GACVoX,OAAO8mB,GACP9mB,OAAOinB,GACPjnB,OAAOsjB,GACMuD,GA7DP,SAAUliB,EAAKvhB,GAEtB,GADAmjC,GAAY,GACR9B,IAAJ,CAGA,IAAK9f,GAAOjH,EAAQsiB,YAAa,CAC7B,IAAIkH,EAAmBpI,GAAUK,EAAQ/mB,MACzC5L,OAAOoJ,KAAK6wB,GAAwB5wB,SAAQ,SAAUuC,IACV,IAApC8uB,EAAiB10B,QAAQ4F,IACzB+W,EAAOgY,mBAAmB/uB,MAGtC3P,EAASkc,EAAKvhB,GAAS+7B,OAlBd,WACJmH,GAAcC,IACfD,GAAY,EACZ79B,EAAS,CAAE8R,KAAM4lB,IAAmC,QA6J9BiH,CAAWjY,EAAQgQ,EAASC,EAAW1hB,GAAS,SAAUiH,EAAKvhB,GACrFuiC,EAA0B,KAC1BviC,EAAQA,GAAS+7B,EACbxa,GACIA,EAAIpK,OAAS4lB,GACbhR,EAAOkV,qBAAqBjE,GAA6BjB,EAASC,GAGlEjQ,EAAOkV,qBAAqBjE,GAA4BjB,EAASC,EAAWza,GAEhFD,EAAKC,KAGLwK,EAAOsR,SAASr9B,GAChBshB,EAAK,KAAMthB,QAKhB+rB,EAGX,IAAIkY,GAAS,aACb,SAASC,GAAoBnY,GACzB,IAAIoY,GAAU,EA2Fd,OA1FApY,EAAO0W,UAAY,WAAc,OAAO0B,GAExCpY,EAAO5qB,MAAQ,WAEX,IADA,IAAI8Q,EAAO,GACFoP,EAAK,EAAGA,EAAKpgB,UAAUP,OAAQ2gB,IACpCpP,EAAKoP,GAAMpgB,UAAUogB,GAEzB,IAQI+iB,EAAWC,EARX/pB,EAAUyR,EAAOiX,aACjBR,EAAUvwB,EAAKA,EAAKvR,OAAS,GAC7B4gB,EAA0B,mBAAZkhB,EAAyBA,EAAUyB,GACjDK,EAAsC,mBAAZryB,EAAK,GAAoBA,EAAK,QAAKlS,EACjE,GAAIokC,EAEA,OADA7iB,EAAK,CAAEnK,KAAM4lB,KACNhR,EAGXoY,GAAU,EACVpY,EAAOkV,qBAAqBjE,IAE5B,IAAIxD,EAAK,SAAUjY,EAAKvhB,EAAOukC,QACP,IAAhBA,IAA0BA,GAAc,GACvChjB,GACDwK,EAAOkV,qBAAqBjE,GAA8Bh9B,EAAO,KAAM,CAAEqC,SAAS,IAClFkf,GAAOgjB,GACPxY,EAAOkV,qBAAqBjE,GAA4Bh9B,EAAO,KAAMuhB,GACzED,EAAKC,EAAKvhB,IAEd,QAAyBD,IAArBukC,IAAmChqB,EAAQa,aAC3C,OAAOqe,EAAG,CAAEriB,KAAM4lB,KAQtB,GANgC,iBAArBuH,EACPF,EAAYE,EAEqB,iBAArBA,IACZD,EAAaC,GAEZD,EAyCDtY,EAAOsR,SAASgH,GAChB7K,EAAG,KAAM6K,OA1CI,CAEbA,OACkBtkC,IAAdqkC,EAA0B,KAAOrY,EAAO4O,UAAUyJ,GAEtD,IAAII,EAAsB,WACtB,OAAOzY,EAAOgX,kBAAkB,CAAE1gC,SAAS,GAAQif,IAEnDmjB,EAAa,SAAUxqB,GACvB,OAAO8R,EAAOK,SAASnS,EAAMjF,KAAMiF,EAAMpH,OAAQ,CAAExQ,SAAS,EAAMg6B,QAAQ,EAAMyG,YAAY,GAAQxhB,IAEpGshB,EAAoB,SAAU5iC,GAC9B+rB,EAAO6W,kBAAkB5iC,EAAO+rB,EAAOqR,WAAY,IAAI,SAAU7b,EAAKvhB,GAC7DuhB,EAEIA,EAAIshB,SACT4B,EAAWljB,EAAIshB,UACVvoB,EAAQa,aACbqpB,IAEAhL,EAAGjY,EAAK,MAAM,GANdiY,EAAG,KAAMx5B,OAUjBqkC,EACAzB,EAAkByB,GAEb/pB,EAAQa,aAEbqpB,IAEKlqB,EAAQuiB,cACb+F,EAAkB7W,EAAO0R,kBAAkB2G,EAAW,CAAE/hC,SAAS,KAIjEm3B,EAAG,CAAEriB,KAAM4lB,GAA4B3pB,KAAMgxB,GAAa,MAQlE,OAAOrY,GAEXA,EAAO2Y,KAAO,WAMV,OALIP,IACApY,EAAOsR,SAAS,MAChB8G,GAAU,EACVpY,EAAOkV,qBAAqBjE,KAEzBjR,GAEJA,EAGX,IAAI4Y,GAAa,SAAUr3B,GAAO,MAAuB,mBAARA,EAAqBA,EAAM,WAAc,OAAO,WAAc,OAAOA,KACtH,SAASs3B,GAAmB7Y,GACxB,IAAI8Y,EAAyB,GACzBC,EAAuB,GACvBzB,EAAyB,GACzBC,EAAuB,GAwB3B,OAvBAvX,EAAOgZ,sBAAwB,WAC3B,MAAO,CAACF,EAAwBC,IAEpC/Y,EAAOqX,sBAAwB,WAC3B,MAAO,CAACC,EAAwBC,IAEpCvX,EAAO2X,cAAgB,SAAU1uB,EAAMgwB,GACnC,IAAI3wB,EAAUswB,GAAWK,GAGzB,OAFAH,EAAuB7vB,GAAQX,EAC/BgvB,EAAuBruB,GAAQ+W,EAAOqT,eAAe/qB,GAC9C0X,GAEXA,EAAOgY,mBAAqB,SAAU/uB,GAGlC,OAFA6vB,EAAuB7vB,QAAQjV,EAC/BsjC,EAAuBruB,QAAQjV,EACxBgsB,GAEXA,EAAO8X,YAAc,SAAU7uB,EAAMiwB,GACjC,IAAI5wB,EAAUswB,GAAWM,GAGzB,OAFAH,EAAqB9vB,GAAQX,EAC7BivB,EAAqBtuB,GAAQ+W,EAAOqT,eAAe/qB,GAC5C0X,GAEJA,EAGX,IASImZ,GAAe,SAAU9pB,EAAQd,EAAS6qB,QAC3B,IAAX/pB,IAAqBA,EAAS,SAClB,IAAZd,IAAsBA,EAAU,SACf,IAAjB6qB,IAA2BA,EAAe,IAO9C,OAnBO,WAEP,IADA,IAAIC,EAAM,GACD/jB,EAAK,EAAGA,EAAKpgB,UAAUP,OAAQ2gB,IACpC+jB,EAAI/jB,GAAMpgB,UAAUogB,GAExB,OAAO,SAAUgkB,GACb,OAAOD,EAAIpT,QAAO,SAAUsT,EAAMzgC,GAAM,OAAOA,EAAGygC,KAAUD,IAazDE,CAnvBX,SAAqBjrB,GACjB,OAAO,SAAUyR,GACb,IAAIyZ,EAAgB,GAAS,GAAS,GAAI,IAAiBlrB,GAM3D,OALAyR,EAAOiX,WAAa,WAAc,OAAOwC,GACzCzZ,EAAO0Z,UAAY,SAAUC,EAAQxjC,GAEjC,OADAsjC,EAAcE,GAAUxjC,EACjB6pB,GAEJA,GA2uBC4Z,CAAYrrB,GAznB5B,SAA0B6qB,GACtB,OAAO,SAAUpZ,GACb,IAAI6Z,EAAqBT,EAgBzB,OAfApZ,EAAO8Z,cAAgB,SAAUC,EAAgBC,GAE7C,OADAH,EAAmBE,GAAkBC,EAC9Bha,GAEXA,EAAOia,gBAAkB,SAAUzjB,GAI/B,OAHAnZ,OAAOoJ,KAAK+P,GAAM9P,SAAQ,SAAUuC,GAChC,OAAO+W,EAAO8Z,cAAc7wB,EAAMuN,EAAKvN,OAEpC+W,GAEXA,EAAOka,gBAAkB,WAAc,OAAOL,GAC9C7Z,EAAOma,eAAiB,WAAc,MAAO,CAACna,EAAQA,EAAOka,oBAC7Dla,EAAOqT,eAAiB,SAAU+G,GAC9B,OAAOA,EAAgBnjC,WAAM,EAAQ+oB,EAAOma,mBAEzCna,GAumBuBqa,CAAiBjB,GAAe5E,GAAmBtD,GAAWiH,GAAqBU,GAAoBtC,GAAgBvD,GAAac,GAltB1K,SAAoBzkB,GAChB,OAAO,SAAU2Q,GACbA,EAAOsa,QAAU,SAAUC,EAAWC,GAElC,OADAxa,EAAO3U,OAAOmnB,WAAW+H,GAAaC,EAC/Bxa,GAEX,IAAIgS,EAAW3iB,aAAkB0d,GAC3B1d,EACA,IAAI0d,GAAU,GAAI,GAAI1d,EAAQ,CAAE8d,MAAOsN,IAC7C,SAASA,EAAavsB,GACdA,EAAM4pB,aACN9X,EAAO8X,YAAY5pB,EAAMjF,KAAMiF,EAAM4pB,aACrC5pB,EAAMwsB,WACN1a,EAAOsa,QAAQpsB,EAAMjF,KAAMiF,EAAMwsB,WACjCxsB,EAAMysB,eACN3a,EAAO3U,OAAOuvB,SAAS1sB,EAAMjF,MAAQiF,EAAMysB,cAC3CzsB,EAAM2sB,eACN7a,EAAO3U,OAAOyvB,SAAS5sB,EAAMjF,MAAQiF,EAAM2sB,cAC3C3sB,EAAMujB,gBACNzR,EAAO3U,OAAOomB,cAAcvjB,EAAMjF,MAAQiF,EAAMujB,eAkExD,OAhEAzR,EAAOgS,SAAWA,EAClBhS,EAAOa,IAAM,SAAUxR,EAAQ+d,GAK3B,OAJA4E,EAASnR,IAAIxR,EAAQorB,GAAerN,GAChCA,GACA4E,EAAS1E,kBAENtN,GAEXA,EAAO6N,QAAU,SAAU5kB,EAAM5B,EAAM6xB,GAInC,OAHAlH,EAASnE,QAAQ5kB,EAAM5B,GACnB6xB,GACAlZ,EAAO8X,YAAY7uB,EAAMiwB,GACtBlZ,GAEXA,EAAO+a,SAAW,SAAU9xB,EAAMnC,EAAQk0B,EAAgBlJ,QACvC,IAAXhrB,IAAqBA,EAAS,SACX,IAAnBk0B,IAA6BA,GAAiB,QACxB,IAAtBlJ,IAAgCA,GAAoB,GACxD,IAAImJ,EAAcjb,EAAOqR,WACzB,QAAK4J,IAEDD,GAAkBC,EAAYhyB,OAASA,EAChC+W,EAAO2R,eAAe3R,EAAOuR,UAAUtoB,EAAMnC,GAASm0B,EAAanJ,GAEvE9R,EAAOmS,qBAAqBnS,EAAOuR,UAAUtoB,EAAMnC,GAASm0B,KAEvEjb,EAAOkO,UAAY,SAAUhgB,EAAOpH,GAChC,GAAIoH,IAAU+iB,GACV,OAAOnqB,EAAOO,KAElB,IAAI6zB,EAAoB,GAAS,GAAS,GAAIlb,EAAO3U,OAAOomB,cAAcvjB,IAASpH,GAC/Eof,EAAKlG,EAAOiX,aAAc9I,EAAoBjI,EAAGiI,kBAAmBlD,EAAkB/E,EAAG+E,gBAAiBpC,EAAc3C,EAAG2C,YAC3HsS,EAAgBnb,EAAO3U,OAAOyvB,SAAS5sB,GACrC8R,EAAO3U,OAAOyvB,SAAS5sB,GAAOgtB,GAC9BA,EACN,OAAOlb,EAAOgS,SAAS9D,UAAUhgB,EAAOitB,EAAe,CACnDhN,kBAAmBA,EACnBlD,gBAAiBA,EACjBpC,YAAaA,EACbT,kBAAmBpI,EAAOiX,aAAa7O,qBAG/CpI,EAAO4O,UAAY,SAAUvnB,EAAMnD,GAC/B,IAAIqK,EAAUyR,EAAOiX,aACjBlhC,EAAQiqB,EAAOgS,SAASpD,UAAUvnB,EAAMkH,GAC5C,GAAIxY,EAAO,CACP,IAAIqlC,EAASrlC,EAAMkT,KAAMnC,EAAS/Q,EAAM+Q,OAAQ0jB,EAAOz0B,EAAMy0B,KACzD6Q,EAAgBrb,EAAO3U,OAAOuvB,SAASQ,GACrCpb,EAAO3U,OAAOuvB,SAASQ,GAAQt0B,GAC/BA,EACFof,EAAKlG,EAAOsS,aAAa8I,EAAQC,GAAgBvN,EAAY5H,EAAGjd,KAAMspB,EAAcrM,EAAGpf,OACvFw0B,GAA2C,IAA/B/sB,EAAQwiB,mBAClB1pB,EACA2Y,EAAOkO,UAAUJ,EAAWyE,GAClC,OAAOvS,EAAOuR,UAAUzD,EAAWyE,EAAa+I,EAAW,CACvDx0B,OAAQ0jB,EACRtmB,OAAQA,IAGhB,OAAO,MAEX8b,EAAOub,YAAc,SAAUC,GAC3Bxb,EAAOgS,SAAS3jB,QAAQmtB,IAErBxb,GA6nB2Kyb,CAAWpsB,GAA1LmqB,CAAmM,CAAEnuB,OAN/L,CACTuvB,SAAU,GACVE,SAAU,GACVrJ,cAAe,GACfe,WAAY,OAoBpB,YC/xBA,IAAI,GAAW,WAQX,OAPA,GAAWn1B,OAAOkJ,QAAU,SAAkBue,GAC1C,IAAK,IAAIC,EAAGlwB,EAAI,EAAGse,EAAIje,UAAUP,OAAQE,EAAIse,EAAGte,IAE5C,IAAK,IAAIub,KADT2U,EAAI7vB,UAAUL,GACOwI,OAAOrE,UAAUvD,eAAeG,KAAKmvB,EAAG3U,KAAI0U,EAAE1U,GAAK2U,EAAE3U,IAE9E,OAAO0U,IAEK7tB,MAAM9B,KAAMD,YAGhC,SAAS,KACL,IAAK,IAAI6vB,EAAI,EAAGlwB,EAAI,EAAGwL,EAAKnL,UAAUP,OAAQE,EAAIwL,EAAIxL,IAAKkwB,GAAK7vB,UAAUL,GAAGF,OACxE,IAAIsb,EAAI3b,MAAMywB,GAAI/U,EAAI,EAA3B,IAA8Bnb,EAAI,EAAGA,EAAIwL,EAAIxL,IACzC,IAAK,IAAIqL,EAAIhL,UAAUL,GAAI0L,EAAI,EAAGm7B,EAAKx7B,EAAEvL,OAAQ4L,EAAIm7B,EAAIn7B,IAAKyP,IAC1DC,EAAED,GAAK9P,EAAEK,GACjB,OAAO0P,EAGX,IAAI9Z,GAAQ,SAAUmjC,GAAO,OAAO,WAAc,OAAOA,IACrD,GAAO,aACPqC,GAA8B,oBAAXvhC,QAA0BA,OAAOqU,QAgCpDmtB,GAAmB,SAAUv0B,GAC7B,IACI,OAAO0f,UAAUK,UAAU/f,IAE/B,MAAOtD,GACH,OAAOsD,IA4BXw0B,GAtBAF,GACU,CACNG,QA5CM,WAAc,OAAO1hC,OAAOyU,SAAS+B,UA6C3ChC,UAzCQ,SAAU3a,EAAOua,EAAOnH,GACpC,OAAOjN,OAAOqU,QAAQG,UAAU3a,EAAOua,EAAOnH,IAyC1CqH,aAvCW,SAAUza,EAAOua,EAAOnH,GACvC,OAAOjN,OAAOqU,QAAQC,aAAaza,EAAOua,EAAOnH,IAuC7C00B,oBArCkB,SAAUjjC,EAAImsB,GACpC,IAAI+W,EAA8B/W,EAAKgX,YATmB,IAAnD7hC,OAAO8hC,UAAUC,UAAU94B,QAAQ,YAc1C,OAJAjJ,OAAO6J,iBAAiB,WAAYnL,GAChCkjC,GACA5hC,OAAO6J,iBAAiB,aAAcnL,GAEnC,WACHsB,OAAO4J,oBAAoB,WAAYlL,GACnCkjC,GACA5hC,OAAO4J,oBAAoB,aAAclL,KA6B7CsjC,YAzBU,SAAUnX,GACxB,IAAI5d,EAAO4d,EAAKgX,QACV7hC,OAAOyU,SAAS6B,KAAKpa,QAAQ,IAAIsZ,OAAO,KAAOqV,EAAKoX,YAAa,IACjEjiC,OAAOyU,SAAS+B,SAASta,QAAQ,IAAIsZ,OAAO,IAAMqV,EAAK+E,MAAO,IAGpE,OADoB4R,GAAiBv0B,IACZ,KAAOjN,OAAOyU,SAAS8B,QAoB5C0gB,SAVO,WAAc,OAAOj3B,OAAOqU,QAAQxa,OAW3CqoC,QAVM,WAAc,OAAOliC,OAAOyU,SAAS6B,OAcrC,CACNorB,QAAS3lC,GAAM,IACfyY,UAAW,GACXF,aAAc,GACdqtB,oBAAqB,GACrBK,YAAajmC,GAAM,IACnBk7B,SAAUl7B,GAAM,MAChBmmC,QAASnmC,GAAM,KAKnB,GAAiB,CACjByhC,iBAAiB,EACjBqE,SAAS,EACTI,WAAY,GACZrS,KAAM,GACNuS,YAAY,EACZC,cAAc,GAEdt4B,GAAS,WA4Jb,SA3JA,SAA8B+gB,EAAMwX,QAChB,IAAZA,IAAsBA,EAAUZ,IACpC,IAKIa,EALAnuB,EAAU,GAAS,GAAS,GAAI,IAAiB0W,GACjD0X,EAAoB,CACpB/E,gBAAiBrpB,EAAQqpB,gBACzB1zB,OAAQA,IAGZ,OAAO,SAAuB8b,GAC1B,IAAIyZ,EAAgBzZ,EAAOiX,aACvB2F,EAAc5c,EAAO5qB,MACzB4qB,EAAO6c,SAAW,SAAU3uB,EAAOpH,GAI/B,OAHWyH,EAAQyb,MAAQ,KACdzb,EAAQ0tB,QAAU,IAAM1tB,EAAQ8tB,WAAa,IAC/Crc,EAAOkO,UAAUhgB,EAAOpH,IAyCvC,SAASg2B,EAAmB7oC,EAAOsU,EAAKjS,GACpC,IAAIymC,EAAe9oC,EACb,CACEu2B,KAAMv2B,EAAMu2B,KACZvhB,KAAMhV,EAAMgV,KACZnC,OAAQ7S,EAAM6S,OACdO,KAAMpT,EAAMoT,MAEdpT,EACF+oC,GAAoC,IAAvBzuB,EAAQguB,WACnB,GAAS,GAAS,GAAIE,EAAQpL,YAAa0L,GAAgBA,EAC7DzmC,EACAmmC,EAAQ/tB,aAAasuB,EAAY,GAAIz0B,GAErCk0B,EAAQ7tB,UAAUouB,EAAY,GAAIz0B,GAE1C,SAAS00B,EAAWC,GAChB,IAAI9L,EAAcpR,EAAOqR,WAErByE,GAAYoH,EAAIjpC,QAAUipC,EAAIjpC,MAAMgV,KACpChV,EAAQ6hC,EACN9V,EAAO4O,UAAU6N,EAAQL,YAAY7tB,GAAUrK,IAC/C8b,EAAOuR,UAAU2L,EAAIjpC,MAAMgV,KAAMi0B,EAAIjpC,MAAM6S,OAAQo2B,EAAIjpC,MAAMoT,KAAM,GAAS,GAAS,GAAI61B,EAAIjpC,MAAMu2B,MAAO,CAAEtmB,OAAQA,KAAWg5B,EAAIjpC,MAAMu2B,KAAKp0B,IAChJgZ,EAAeqqB,EAAcrqB,aAAcqiB,EAAgBgI,EAAchI,cACxEx9B,EAODm9B,GACApR,EAAO2R,eAAe19B,EAAOm9B,GAAa,IAG9CpR,EAAO6W,kBAAkB5iC,EAAOm9B,EAAauL,GAAmB,SAAUnnB,EAAKwa,GAC3E,GAAIxa,EACA,GAAIA,EAAIshB,SAAU,CACd,IAAI5Q,EAAK1Q,EAAIshB,SAAUsE,EAASlV,EAAGjd,KAAMnC,EAASof,EAAGpf,OACrDkZ,EAAOK,SAAS+a,EAAQt0B,EAAQ,GAAS,GAAS,GAAI61B,GAAoB,CAAErmC,SAAS,EAAMuK,OAAO,EAAMk2B,YAAY,UAEnH,GAAIvhB,EAAIpK,OAAS4lB,GAA8B,CAChD,IAAIzoB,EAAMyX,EAAO6c,SAASzL,EAAYnoB,KAAMmoB,EAAYtqB,QACnDgvB,GAEDgH,EAAmB7oC,EAAOsU,GAAK,QAOnC6G,GACI4Q,EAAOK,SAASjR,EAAcqiB,EAAe,GAAS,GAAS,GAAIkL,GAAoB,CAAErM,QAAQ,EAAMh6B,SAAS,UAIxH0pB,EAAOkV,qBAAqBjE,GAA8BjB,EAASoB,EAAa,CAAE96B,SAAS,OA9B/F8Y,GACI4Q,EAAOgX,kBAAkB,GAAS,GAAS,GAAI2F,GAAoB,CAAErM,QAAQ,EAAMh6B,SAAS,KAwCxG,SAAS6gB,IACDulB,IACAA,IACAA,OAAyB1oC,GAmBjC,OAjHAgsB,EAAOmd,SAAW,SAAU50B,GAAO,OAAOyX,EAAO4O,UAfjC,SAAUrmB,GACtB,IAAIxS,EAAQwS,EAAIxS,MAAM,sDAElBqnC,GADOrnC,EAAQA,EAAM,GAAKwS,GACTxS,MAAM,yBAC3B,IAAKqnC,EACD,MAAM,IAAIpmC,MAAM,iCAAmCuR,GACvD,IAAIqI,EAAWwsB,EAAU,GACrB1sB,EAAO0sB,EAAU,IAAM,GACvBzsB,EAASysB,EAAU,IAAM,GAC7B,OAAS7uB,EAAQ0tB,QACXvrB,EAAKpa,QAAQ,IAAIsZ,OAAO,KAAOrB,EAAQ8tB,YAAa,IACpD9tB,EAAQyb,KACJpZ,EAASta,QAAQ,IAAIsZ,OAAO,IAAMrB,EAAQyb,MAAO,IACjDpZ,GAAYD,EAEiC0sB,CAAU90B,KACrEyX,EAAO5qB,MAAQ,WAEX,IADA,IAAI8Q,EAAO,GACFoP,EAAK,EAAGA,EAAKpgB,UAAUP,OAAQ2gB,IACpCpP,EAAKoP,GAAMpgB,UAAUogB,GAQzB,OANoB,IAAhBpP,EAAKvR,QAAmC,mBAAZuR,EAAK,GACjC02B,EAAY3lC,WAAM,EAAQ,GAAe,CAACwlC,EAAQL,YAAY7tB,IAAWrI,IAGzE02B,EAAY3lC,WAAM,EAAQiP,GAEvB8Z,GAEXA,EAAOsd,oBAAsB,SAAUr0B,EAAMnC,EAAQ0H,QAClC,IAAX1H,IAAqBA,EAAS,SACpB,IAAV0H,IAAoBA,EAAQ,IAChC,IAAIN,EAAQ8R,EAAO2O,WAAW1lB,EAAMnC,GAChC7S,EAAQ+rB,EAAOuR,UAAUrjB,EAAMjF,KAAMiF,EAAMpH,OAAQkZ,EAAOkO,UAAUhgB,EAAMjF,KAAMiF,EAAMpH,QAAS,CAAEA,OAAQoH,EAAMsc,OAC/GjiB,EAAMyX,EAAO6c,SAAS5zB,EAAMnC,GAChCkZ,EAAOud,eAAiBtpC,EACxBwoC,EAAQ/tB,aAAaza,EAAOua,EAAOjG,IA4FhC,CACHmqB,QA9BJ,WACQnkB,EAAQ0tB,UAAY1tB,EAAQyb,OAE5Bzb,EAAQyb,KAAOyS,EAAQX,WAE3BY,EAAyBD,EAAQV,oBAAoBkB,EAAY1uB,IA0BjEokB,OAAQxb,EACRA,SAAUA,EACVyb,oBApBJ,SAA6B5C,EAASC,EAAWhL,GAC7C,IAAIuY,EAAef,EAAQpL,WACvBoM,EAAWD,GACXA,EAAahT,MACbgT,EAAav0B,MACbu0B,EAAa12B,OACb42B,EAAiBzN,GAAajQ,EAAO2R,eAAe1B,EAAWD,GAAS,GACxE15B,EAAU2uB,EAAK3uB,UAAYmnC,GAAYC,EACvCn1B,EAAMyX,EAAO6c,SAAS7M,EAAQ/mB,KAAM+mB,EAAQlpB,QAC9B,OAAdmpB,IACoB,IAApB1hB,EAAQ0tB,UACiB,IAAzB1tB,EAAQiuB,eACRj0B,GAAOk0B,EAAQH,WAEnBQ,EAAmB9M,EAASznB,EAAKjS,IAOjC2mC,WAAYA,KCrQxB,IAAMxD,GAAgB,CACpBwC,SAAS,EACTI,WAAY,K,qXCDd,ICE0B,GAAEsB,GAAuB,GACzC1d,GAAUC,GACZ7Q,GDJFuuB,GAAYjjC,SAASkjC,cAAc,SCEbF,IAAF,GDOhB,CACRA,WARiB,SAAC,GAA4B,IAA1BG,EAA0B,EAA1BA,UAAcvZ,EAAY,oBAC9CpY,UAAQyxB,GAAW,CACjB7mC,KAAM,kBACJoV,IAAE2xB,EAAWvZ,OAMjB/E,SCT0Bme,WAAuB,GAAXne,KAAW,GVoC1C,CACLS,SAlBe,CACf,CAAC,gBAAiB,UAAWkE,GAC7B,CAAC,+BAAgC,2BAA4B4Z,GAC7D,CAAC,4BAA6B,qBAAsBC,KACpDx+B,IAAIolB,IAeJ1E,MAbY,CACZ,CAAC,oBAAqB,mBAAoB+d,IAC1C,CAAC,qBAAsB,oBAAqBha,IAC5C,CAAC,cAAe,UAAWia,IAC3B,CAAC,aAAc,aAAcC,IAC7B,CAAC,gBAAiB,gBAAiBna,IACnC,CAAC,mBAAoB,cAAeoa,IACpC,CAAC,kBAAmB,aAAcC,IAClC,CAAC,gBAAiB,YAAaC,KAC/B9+B,IAAIolB,KUjCY1E,GAD+B,GAC/BA,MFCO,SAAC,GAA2B,IAAzB7Q,EAAyB,EAAzBA,OAAQsuB,EAAiB,EAAjBA,WAEtBvuB,EAAiBC,EAAO,GAA9BpG,KACF+W,EAASmZ,GAAa9pB,EAAQ,CAClCD,iBAGF4Q,EAAO0T,UAAU6K,GAAc9E,KAE/BzZ,EAAO0U,WAAU,YAAe,IAAZxmB,EAAY,EAAZA,MACZswB,EAAYnvB,EAAOovB,MAAK,qBAAGp3B,OAAoB6G,EAAM7G,QAC3D,GAAIm3B,EAAW,KACL54B,EAAc44B,EAAd54B,UACR+3B,EAAW,CAAEz7B,QAAS0D,EAAWsI,QAAO8R,eAI5CA,EAAO5qB,QEfPspC,CAAY,CACVrvB,OAHIA,IADE4Q,GADyC,GACzCA,UACgBpP,OAAOqP,IAI7Byd,WAAY,gBAAGz7B,EAAH,EAAGA,QAASgM,EAAZ,EAAYA,MAAO8R,EAAnB,EAAmBA,OAAnB,OAAgC2d,GAAW,CACrDG,YACAhe,SACAC,aACA1Q,UACA4Q,YACAC,SACAhe,UACAgM,QACA8R,e","file":"js/index.js","sourcesContent":[";(function() {\n\"use strict\"\nfunction Vnode(tag, key, attrs0, children0, text, dom) {\n\treturn {tag: tag, key: key, attrs: attrs0, children: children0, text: text, dom: dom, domSize: undefined, state: undefined, events: undefined, instance: undefined}\n}\nVnode.normalize = function(node) {\n\tif (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined)\n\tif (node == null || typeof node === \"boolean\") return null\n\tif (typeof node === \"object\") return node\n\treturn Vnode(\"#\", undefined, undefined, String(node), undefined, undefined)\n}\nVnode.normalizeChildren = function(input) {\n\tvar children0 = []\n\tif (input.length) {\n\t\tvar isKeyed = input[0] != null && input[0].key != null\n\t\t// Note: this is a *very* perf-sensitive check.\n\t\t// Fun fact: merging the loop like this is somehow faster than splitting\n\t\t// it, noticeably so.\n\t\tfor (var i = 1; i < input.length; i++) {\n\t\t\tif ((input[i] != null && input[i].key != null) !== isKeyed) {\n\t\t\t\tthrow new TypeError(\"Vnodes must either always have keys or never have keys!\")\n\t\t\t}\n\t\t}\n\t\tfor (var i = 0; i < input.length; i++) {\n\t\t\tchildren0[i] = Vnode.normalize(input[i])\n\t\t}\n\t}\n\treturn children0\n}\n// Call via `hyperscriptVnode0.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript0` and `fragment` factories and define this as\n// `hyperscriptVnode0(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// var hyperscriptVnode = function(attrs1, ...children1) {\n//     if (attrs1 == null || typeof attrs1 === \"object\" && attrs1.tag == null && !Array.isArray(attrs1)) {\n//         if (children1.length === 1 && Array.isArray(children1[0])) children1 = children1[0]\n//     } else {\n//         children1 = children1.length === 0 && Array.isArray(attrs1) ? attrs1 : [attrs1, ...children1]\n//         attrs1 = undefined\n//     }\n//\n//     if (attrs1 == null) attrs1 = {}\n//     return Vnode(\"\", attrs1.key, attrs1, children1)\n// }\nvar hyperscriptVnode = function() {\n\tvar attrs1 = arguments[this], start = this + 1, children1\n\tif (attrs1 == null) {\n\t\tattrs1 = {}\n\t} else if (typeof attrs1 !== \"object\" || attrs1.tag != null || Array.isArray(attrs1)) {\n\t\tattrs1 = {}\n\t\tstart = this\n\t}\n\tif (arguments.length === start + 1) {\n\t\tchildren1 = arguments[start]\n\t\tif (!Array.isArray(children1)) children1 = [children1]\n\t} else {\n\t\tchildren1 = []\n\t\twhile (start < arguments.length) children1.push(arguments[start++])\n\t}\n\treturn Vnode(\"\", attrs1.key, attrs1, children1)\n}\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g\nvar selectorCache = {}\nvar hasOwn = {}.hasOwnProperty\nfunction isEmpty(object) {\n\tfor (var key in object) if (hasOwn.call(object, key)) return false\n\treturn true\n}\nfunction compileSelector(selector) {\n\tvar match, tag = \"div\", classes = [], attrs = {}\n\twhile (match = selectorParser.exec(selector)) {\n\t\tvar type = match[1], value = match[2]\n\t\tif (type === \"\" && value !== \"\") tag = value\n\t\telse if (type === \"#\") attrs.id = value\n\t\telse if (type === \".\") classes.push(value)\n\t\telse if (match[3][0] === \"[\") {\n\t\t\tvar attrValue = match[6]\n\t\t\tif (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\")\n\t\t\tif (match[4] === \"class\") classes.push(attrValue)\n\t\t\telse attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true\n\t\t}\n\t}\n\tif (classes.length > 0) attrs.className = classes.join(\" \")\n\treturn selectorCache[selector] = {tag: tag, attrs: attrs}\n}\nfunction execSelector(state, vnode) {\n\tvar attrs = vnode.attrs\n\tvar children = Vnode.normalizeChildren(vnode.children)\n\tvar hasClass = hasOwn.call(attrs, \"class\")\n\tvar className = hasClass ? attrs.class : attrs.className\n\tvnode.tag = state.tag\n\tvnode.attrs = null\n\tvnode.children = undefined\n\tif (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n\t\tvar newAttrs = {}\n\t\tfor (var key in attrs) {\n\t\t\tif (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key]\n\t\t}\n\t\tattrs = newAttrs\n\t}\n\tfor (var key in state.attrs) {\n\t\tif (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)){\n\t\t\tattrs[key] = state.attrs[key]\n\t\t}\n\t}\n\tif (className != null || state.attrs.className != null) attrs.className =\n\t\tclassName != null\n\t\t\t? state.attrs.className != null\n\t\t\t\t? String(state.attrs.className) + \" \" + String(className)\n\t\t\t\t: className\n\t\t\t: state.attrs.className != null\n\t\t\t\t? state.attrs.className\n\t\t\t\t: null\n\tif (hasClass) attrs.class = null\n\tfor (var key in attrs) {\n\t\tif (hasOwn.call(attrs, key) && key !== \"key\") {\n\t\t\tvnode.attrs = attrs\n\t\t\tbreak\n\t\t}\n\t}\n\tif (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n\t\tvnode.text = children[0].children\n\t} else {\n\t\tvnode.children = children\n\t}\n\treturn vnode\n}\nfunction hyperscript(selector) {\n\tif (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n\t\tthrow Error(\"The selector must be either a string or a component.\");\n\t}\n\tvar vnode = hyperscriptVnode.apply(1, arguments)\n\tif (typeof selector === \"string\") {\n\t\tvnode.children = Vnode.normalizeChildren(vnode.children)\n\t\tif (selector !== \"[\") return execSelector(selectorCache[selector] || compileSelector(selector), vnode)\n\t}\n\tvnode.tag = selector\n\treturn vnode\n}\nhyperscript.trust = function(html) {\n\tif (html == null) html = \"\"\n\treturn Vnode(\"<\", undefined, undefined, html, undefined, undefined)\n}\nhyperscript.fragment = function() {\n\tvar vnode2 = hyperscriptVnode.apply(0, arguments)\n\tvnode2.tag = \"[\"\n\tvnode2.children = Vnode.normalizeChildren(vnode2.children)\n\treturn vnode2\n}\n/** @constructor */\nvar PromisePolyfill = function(executor) {\n\tif (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\")\n\tif (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\")\n\tvar self = this, resolvers = [], rejectors = [], resolveCurrent = handler(resolvers, true), rejectCurrent = handler(rejectors, false)\n\tvar instance = self._instance = {resolvers: resolvers, rejectors: rejectors}\n\tvar callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\tfunction handler(list, shouldAbsorb) {\n\t\treturn function execute(value) {\n\t\t\tvar then\n\t\t\ttry {\n\t\t\t\tif (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n\t\t\t\t\tif (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\")\n\t\t\t\t\texecuteOnce(then.bind(value))\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcallAsync(function() {\n\t\t\t\t\t\tif (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value)\n\t\t\t\t\t\tfor (var i = 0; i < list.length; i++) list[i](value)\n\t\t\t\t\t\tresolvers.length = 0, rejectors.length = 0\n\t\t\t\t\t\tinstance.state = shouldAbsorb\n\t\t\t\t\t\tinstance.retry = function() {execute(value)}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\trejectCurrent(e)\n\t\t\t}\n\t\t}\n\t}\n\tfunction executeOnce(then) {\n\t\tvar runs = 0\n\t\tfunction run(fn) {\n\t\t\treturn function(value) {\n\t\t\t\tif (runs++ > 0) return\n\t\t\t\tfn(value)\n\t\t\t}\n\t\t}\n\t\tvar onerror = run(rejectCurrent)\n\t\ttry {then(run(resolveCurrent), onerror)} catch (e) {onerror(e)}\n\t}\n\texecuteOnce(executor)\n}\nPromisePolyfill.prototype.then = function(onFulfilled, onRejection) {\n\tvar self = this, instance = self._instance\n\tfunction handle(callback, list, next, state) {\n\t\tlist.push(function(value) {\n\t\t\tif (typeof callback !== \"function\") next(value)\n\t\t\telse try {resolveNext(callback(value))} catch (e) {if (rejectNext) rejectNext(e)}\n\t\t})\n\t\tif (typeof instance.retry === \"function\" && state === instance.state) instance.retry()\n\t}\n\tvar resolveNext, rejectNext\n\tvar promise = new PromisePolyfill(function(resolve, reject) {resolveNext = resolve, rejectNext = reject})\n\thandle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false)\n\treturn promise\n}\nPromisePolyfill.prototype.catch = function(onRejection) {\n\treturn this.then(null, onRejection)\n}\nPromisePolyfill.prototype.finally = function(callback) {\n\treturn this.then(\n\t\tfunction(value) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn value\n\t\t\t})\n\t\t},\n\t\tfunction(reason) {\n\t\t\treturn PromisePolyfill.resolve(callback()).then(function() {\n\t\t\t\treturn PromisePolyfill.reject(reason);\n\t\t\t})\n\t\t}\n\t)\n}\nPromisePolyfill.resolve = function(value) {\n\tif (value instanceof PromisePolyfill) return value\n\treturn new PromisePolyfill(function(resolve) {resolve(value)})\n}\nPromisePolyfill.reject = function(value) {\n\treturn new PromisePolyfill(function(resolve, reject) {reject(value)})\n}\nPromisePolyfill.all = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tvar total = list.length, count = 0, values = []\n\t\tif (list.length === 0) resolve([])\n\t\telse for (var i = 0; i < list.length; i++) {\n\t\t\t(function(i) {\n\t\t\t\tfunction consume(value) {\n\t\t\t\t\tcount++\n\t\t\t\t\tvalues[i] = value\n\t\t\t\t\tif (count === total) resolve(values)\n\t\t\t\t}\n\t\t\t\tif (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n\t\t\t\t\tlist[i].then(consume, reject)\n\t\t\t\t}\n\t\t\t\telse consume(list[i])\n\t\t\t})(i)\n\t\t}\n\t})\n}\nPromisePolyfill.race = function(list) {\n\treturn new PromisePolyfill(function(resolve, reject) {\n\t\tfor (var i = 0; i < list.length; i++) {\n\t\t\tlist[i].then(resolve, reject)\n\t\t}\n\t})\n}\nif (typeof window !== \"undefined\") {\n\tif (typeof window.Promise === \"undefined\") {\n\t\twindow.Promise = PromisePolyfill\n\t} else if (!window.Promise.prototype.finally) {\n\t\twindow.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tvar PromisePolyfill = window.Promise\n} else if (typeof global !== \"undefined\") {\n\tif (typeof global.Promise === \"undefined\") {\n\t\tglobal.Promise = PromisePolyfill\n\t} else if (!global.Promise.prototype.finally) {\n\t\tglobal.Promise.prototype.finally = PromisePolyfill.prototype.finally\n\t}\n\tvar PromisePolyfill = global.Promise\n} else {\n}\nvar _12 = function($window) {\n\tvar $doc = $window && $window.document\n\tvar currentRedraw\n\tvar nameSpace = {\n\t\tsvg: \"http://www.w3.org/2000/svg\",\n\t\tmath: \"http://www.w3.org/1998/Math/MathML\"\n\t}\n\tfunction getNameSpace(vnode3) {\n\t\treturn vnode3.attrs && vnode3.attrs.xmlns || nameSpace[vnode3.tag]\n\t}\n\t//sanity check to discourage people from doing `vnode3.state = ...`\n\tfunction checkState(vnode3, original) {\n\t\tif (vnode3.state !== original) throw new Error(\"`vnode.state` must not be modified\")\n\t}\n\t//Note: the hook is passed as the `this` argument to allow proxying the\n\t//arguments without requiring a full array allocation to do so. It also\n\t//takes advantage of the fact the current `vnode3` is the first argument in\n\t//all lifecycle methods.\n\tfunction callHook(vnode3) {\n\t\tvar original = vnode3.state\n\t\ttry {\n\t\t\treturn this.apply(original, arguments)\n\t\t} finally {\n\t\t\tcheckState(vnode3, original)\n\t\t}\n\t}\n\t// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n\t// inside an iframe. Catch and swallow this error, and heavy-handidly return null.\n\tfunction activeElement() {\n\t\ttry {\n\t\t\treturn $doc.activeElement\n\t\t} catch (e) {\n\t\t\treturn null\n\t\t}\n\t}\n\t//create\n\tfunction createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode3 = vnodes[i]\n\t\t\tif (vnode3 != null) {\n\t\t\t\tcreateNode(parent, vnode3, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t}\n\tfunction createNode(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar tag = vnode3.tag\n\t\tif (typeof tag === \"string\") {\n\t\t\tvnode3.state = {}\n\t\t\tif (vnode3.attrs != null) initLifecycle(vnode3.attrs, vnode3, hooks)\n\t\t\tswitch (tag) {\n\t\t\t\tcase \"#\": createText(parent, vnode3, nextSibling); break\n\t\t\t\tcase \"<\": createHTML(parent, vnode3, ns, nextSibling); break\n\t\t\t\tcase \"[\": createFragment(parent, vnode3, hooks, ns, nextSibling); break\n\t\t\t\tdefault: createElement(parent, vnode3, hooks, ns, nextSibling)\n\t\t\t}\n\t\t}\n\t\telse createComponent(parent, vnode3, hooks, ns, nextSibling)\n\t}\n\tfunction createText(parent, vnode3, nextSibling) {\n\t\tvnode3.dom = $doc.createTextNode(vnode3.children)\n\t\tinsertNode(parent, vnode3.dom, nextSibling)\n\t}\n\tvar possibleParents = {caption: \"table\", thead: \"table\", tbody: \"table\", tfoot: \"table\", tr: \"tbody\", th: \"tr\", td: \"tr\", colgroup: \"table\", col: \"colgroup\"}\n\tfunction createHTML(parent, vnode3, ns, nextSibling) {\n\t\tvar match0 = vnode3.children.match(/^\\s*?<(\\w+)/im) || []\n\t\t// not using the proper parent makes the child element(s) vanish.\n\t\t//     var div = document.createElement(\"div\")\n\t\t//     div.innerHTML = \"<td>i</td><td>j</td>\"\n\t\t//     console.log(div.innerHTML)\n\t\t// --> \"ij\", no <td> in sight.\n\t\tvar temp = $doc.createElement(possibleParents[match0[1]] || \"div\")\n\t\tif (ns === \"http://www.w3.org/2000/svg\") {\n\t\t\ttemp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode3.children + \"</svg>\"\n\t\t\ttemp = temp.firstChild\n\t\t} else {\n\t\t\ttemp.innerHTML = vnode3.children\n\t\t}\n\t\tvnode3.dom = temp.firstChild\n\t\tvnode3.domSize = temp.childNodes.length\n\t\t// Capture nodes to remove, so we don't confuse them.\n\t\tvnode3.instance = []\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tvar child\n\t\twhile (child = temp.firstChild) {\n\t\t\tvnode3.instance.push(child)\n\t\t\tfragment.appendChild(child)\n\t\t}\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createFragment(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar fragment = $doc.createDocumentFragment()\n\t\tif (vnode3.children != null) {\n\t\t\tvar children3 = vnode3.children\n\t\t\tcreateNodes(fragment, children3, 0, children3.length, hooks, null, ns)\n\t\t}\n\t\tvnode3.dom = fragment.firstChild\n\t\tvnode3.domSize = fragment.childNodes.length\n\t\tinsertNode(parent, fragment, nextSibling)\n\t}\n\tfunction createElement(parent, vnode3, hooks, ns, nextSibling) {\n\t\tvar tag = vnode3.tag\n\t\tvar attrs2 = vnode3.attrs\n\t\tvar is = attrs2 && attrs2.is\n\t\tns = getNameSpace(vnode3) || ns\n\t\tvar element = ns ?\n\t\t\tis ? $doc.createElementNS(ns, tag, {is: is}) : $doc.createElementNS(ns, tag) :\n\t\t\tis ? $doc.createElement(tag, {is: is}) : $doc.createElement(tag)\n\t\tvnode3.dom = element\n\t\tif (attrs2 != null) {\n\t\t\tsetAttrs(vnode3, attrs2, ns)\n\t\t}\n\t\tinsertNode(parent, element, nextSibling)\n\t\tif (!maybeSetContentEditable(vnode3)) {\n\t\t\tif (vnode3.text != null) {\n\t\t\t\tif (vnode3.text !== \"\") element.textContent = vnode3.text\n\t\t\t\telse vnode3.children = [Vnode(\"#\", undefined, undefined, vnode3.text, undefined, undefined)]\n\t\t\t}\n\t\t\tif (vnode3.children != null) {\n\t\t\t\tvar children3 = vnode3.children\n\t\t\t\tcreateNodes(element, children3, 0, children3.length, hooks, null, ns)\n\t\t\t\tif (vnode3.tag === \"select\" && attrs2 != null) setLateSelectAttrs(vnode3, attrs2)\n\t\t\t}\n\t\t}\n\t}\n\tfunction initComponent(vnode3, hooks) {\n\t\tvar sentinel\n\t\tif (typeof vnode3.tag.view === \"function\") {\n\t\t\tvnode3.state = Object.create(vnode3.tag)\n\t\t\tsentinel = vnode3.state.view\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t} else {\n\t\t\tvnode3.state = void 0\n\t\t\tsentinel = vnode3.tag\n\t\t\tif (sentinel.$$reentrantLock$$ != null) return\n\t\t\tsentinel.$$reentrantLock$$ = true\n\t\t\tvnode3.state = (vnode3.tag.prototype != null && typeof vnode3.tag.prototype.view === \"function\") ? new vnode3.tag(vnode3) : vnode3.tag(vnode3)\n\t\t}\n\t\tinitLifecycle(vnode3.state, vnode3, hooks)\n\t\tif (vnode3.attrs != null) initLifecycle(vnode3.attrs, vnode3, hooks)\n\t\tvnode3.instance = Vnode.normalize(callHook.call(vnode3.state.view, vnode3))\n\t\tif (vnode3.instance === vnode3) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tsentinel.$$reentrantLock$$ = null\n\t}\n\tfunction createComponent(parent, vnode3, hooks, ns, nextSibling) {\n\t\tinitComponent(vnode3, hooks)\n\t\tif (vnode3.instance != null) {\n\t\t\tcreateNode(parent, vnode3.instance, hooks, ns, nextSibling)\n\t\t\tvnode3.dom = vnode3.instance.dom\n\t\t\tvnode3.domSize = vnode3.dom != null ? vnode3.instance.domSize : 0\n\t\t}\n\t\telse {\n\t\t\tvnode3.domSize = 0\n\t\t}\n\t}\n\t//update\n\t/**\n\t * @param {Element|Fragment} parent - the parent element\n\t * @param {Vnode[] | null} old - the list of vnodes of the last `render0()` call for\n\t *                               this part of the tree\n\t * @param {Vnode[] | null} vnodes - as above, but for the current `render0()` call.\n\t * @param {Function[]} hooks - an accumulator of post-render0 hooks (oncreate/onupdate)\n\t * @param {Element | null} nextSibling - the next DOM node if we're dealing with a\n\t *                                       fragment that is not the last item in its\n\t *                                       parent\n\t * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n\t * @returns void\n\t */\n\t// This function diffs and patches lists of vnodes, both keyed and unkeyed.\n\t//\n\t// We will:\n\t//\n\t// 1. describe its general structure\n\t// 2. focus on the diff algorithm optimizations\n\t// 3. discuss DOM node operations.\n\t// ## Overview:\n\t//\n\t// The updateNodes() function:\n\t// - deals with trivial cases\n\t// - determines whether the lists are keyed or unkeyed based on the first non-null node\n\t//   of each list.\n\t// - diffs them and patches the DOM if needed (that's the brunt of the code)\n\t// - manages the leftovers: after diffing, are there:\n\t//   - old nodes left to remove?\n\t// \t - new nodes to insert?\n\t// \t deal with them!\n\t//\n\t// The lists are only iterated over once, with an exception for the nodes in `old` that\n\t// are visited in the fourth part of the diff and in the `removeNodes` loop.\n\t// ## Diffing\n\t//\n\t// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n\t// may be good for context on longest increasing subsequence-based logic for moving nodes.\n\t//\n\t// In order to diff keyed lists, one has to\n\t//\n\t// 1) match0 nodes in both lists, per key, and update them accordingly\n\t// 2) create the nodes present in the new list, but absent in the old one\n\t// 3) remove the nodes present in the old list, but absent in the new one\n\t// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n\t//\n\t// To achieve 1) one can create a dictionary of keys => index (for the old list), then0 iterate\n\t// over the new list and for each new vnode3, find the corresponding vnode3 in the old list using\n\t// the map.\n\t// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n\t// and must be created.\n\t// For the removals, we actually remove the nodes that have been updated from the old list.\n\t// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n\t// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n\t// algorithm.\n\t//\n\t// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n\t// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n\t// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n\t//  match0 the above lists, for example).\n\t//\n\t// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n\t// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n\t//\n\t// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n\t// the longest increasing subsequence *of old nodes still present in the new list*).\n\t//\n\t// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n\t// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n\t// the `LIS` and a temporary one to create the LIS).\n\t//\n\t// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n\t// the LIS and can be updated without moving them.\n\t//\n\t// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n\t// the exception of the last node if the list is fully reversed).\n\t//\n\t// ## Finding the next sibling.\n\t//\n\t// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n\t// When the list is being traversed top-down, at any index, the DOM nodes up to the previous\n\t// vnode3 reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n\t// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n\t//\n\t// In the other scenarios (swaps, upwards traversal, map-based diff),\n\t// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n\t// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n\t// as the next sibling (cached in the `nextSibling` variable).\n\t// ## DOM node moves\n\t//\n\t// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n\t// this is not the case if the node moved (second and fourth part of the diff algo). We move\n\t// the old DOM nodes before updateNode runs0 because it enables us to use the cached `nextSibling`\n\t// variable rather than fetching it using `getNextSibling()`.\n\t//\n\t// The fourth part of the diff currently inserts nodes unconditionally, leading to issues\n\t// like #1791 and #1999. We need to be smarter about those situations where adjascent old\n\t// nodes remain together in the new list in a way that isn't covered by parts one and\n\t// three of the diff algo.\n\tfunction updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n\t\tif (old === vnodes || old == null && vnodes == null) return\n\t\telse if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns)\n\t\telse if (vnodes == null || vnodes.length === 0) removeNodes(parent, old, 0, old.length)\n\t\telse {\n\t\t\tvar isOldKeyed = old[0] != null && old[0].key != null\n\t\t\tvar isKeyed0 = vnodes[0] != null && vnodes[0].key != null\n\t\t\tvar start = 0, oldStart = 0\n\t\t\tif (!isOldKeyed) while (oldStart < old.length && old[oldStart] == null) oldStart++\n\t\t\tif (!isKeyed0) while (start < vnodes.length && vnodes[start] == null) start++\n\t\t\tif (isKeyed0 === null && isOldKeyed == null) return // both lists are full of nulls\n\t\t\tif (isOldKeyed !== isKeyed0) {\n\t\t\t\tremoveNodes(parent, old, oldStart, old.length)\n\t\t\t\tcreateNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else if (!isKeyed0) {\n\t\t\t\t// Don't index past the end of either list (causes deopts).\n\t\t\t\tvar commonLength = old.length < vnodes.length ? old.length : vnodes.length\n\t\t\t\t// Rewind if necessary to the first non-null index on either side.\n\t\t\t\t// We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n\t\t\t\t// but that would be optimizing for sparse lists which are more rare than dense ones.\n\t\t\t\tstart = start < oldStart ? start : oldStart\n\t\t\t\tfor (; start < commonLength; start++) {\n\t\t\t\t\to = old[start]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o === v || o == null && v == null) continue\n\t\t\t\t\telse if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling))\n\t\t\t\t\telse if (v == null) removeNode(parent, o)\n\t\t\t\t\telse updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\tif (old.length > commonLength) removeNodes(parent, old, start, old.length)\n\t\t\t\tif (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns)\n\t\t\t} else {\n\t\t\t\t// keyed diff\n\t\t\t\tvar oldEnd = old.length - 1, end = vnodes.length - 1, map, o, v, oe, ve, topSibling\n\t\t\t\t// bottom-up\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t}\n\t\t\t\t// top-down\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t\tif (o.key !== v.key) break\n\t\t\t\t\toldStart++, start++\n\t\t\t\t\tif (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns)\n\t\t\t\t}\n\t\t\t\t// swaps and list reversals\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (start === end) break\n\t\t\t\t\tif (o.key !== ve.key || oe.key !== v.key) break\n\t\t\t\t\ttopSibling = getNextSibling(old, oldStart, nextSibling)\n\t\t\t\t\tmoveNodes(parent, oe, topSibling)\n\t\t\t\t\tif (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns)\n\t\t\t\t\tif (++start <= --end) moveNodes(parent, o, nextSibling)\n\t\t\t\t\tif (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldStart++; oldEnd--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t\to = old[oldStart]\n\t\t\t\t\tv = vnodes[start]\n\t\t\t\t}\n\t\t\t\t// bottom up once again\n\t\t\t\twhile (oldEnd >= oldStart && end >= start) {\n\t\t\t\t\tif (oe.key !== ve.key) break\n\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\toldEnd--, end--\n\t\t\t\t\toe = old[oldEnd]\n\t\t\t\t\tve = vnodes[end]\n\t\t\t\t}\n\t\t\t\tif (start > end) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\telse if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\telse {\n\t\t\t\t\t// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n\t\t\t\t\tvar originalNextSibling = nextSibling, vnodesLength = end - start + 1, oldIndices = new Array(vnodesLength), li=0, i=0, pos = 2147483647, matched = 0, map, lisIndices\n\t\t\t\t\tfor (i = 0; i < vnodesLength; i++) oldIndices[i] = -1\n\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\tif (map == null) map = getKeyMap(old, oldStart, oldEnd + 1)\n\t\t\t\t\t\tve = vnodes[i]\n\t\t\t\t\t\tvar oldIndex = map[ve.key]\n\t\t\t\t\t\tif (oldIndex != null) {\n\t\t\t\t\t\t\tpos = (oldIndex < pos) ? oldIndex : -1 // becomes -1 if nodes were re-ordered\n\t\t\t\t\t\t\toldIndices[i-start] = oldIndex\n\t\t\t\t\t\t\toe = old[oldIndex]\n\t\t\t\t\t\t\told[oldIndex] = null\n\t\t\t\t\t\t\tif (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns)\n\t\t\t\t\t\t\tif (ve.dom != null) nextSibling = ve.dom\n\t\t\t\t\t\t\tmatched++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tnextSibling = originalNextSibling\n\t\t\t\t\tif (matched !== oldEnd - oldStart + 1) removeNodes(parent, old, oldStart, oldEnd + 1)\n\t\t\t\t\tif (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns)\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (pos === -1) {\n\t\t\t\t\t\t\t// the indices of the indices of the items that are part of the\n\t\t\t\t\t\t\t// longest increasing subsequence in the oldIndices list\n\t\t\t\t\t\t\tlisIndices = makeLisIndices(oldIndices)\n\t\t\t\t\t\t\tli = lisIndices.length - 1\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tif (lisIndices[li] === i - start) li--\n\t\t\t\t\t\t\t\t\telse moveNodes(parent, v, nextSibling)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor (i = end; i >= start; i--) {\n\t\t\t\t\t\t\t\tv = vnodes[i]\n\t\t\t\t\t\t\t\tif (oldIndices[i-start] === -1) createNode(parent, v, hooks, ns, nextSibling)\n\t\t\t\t\t\t\t\tif (v.dom != null) nextSibling = vnodes[i].dom\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateNode(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tvar oldTag = old.tag, tag = vnode3.tag\n\t\tif (oldTag === tag) {\n\t\t\tvnode3.state = old.state\n\t\t\tvnode3.events = old.events\n\t\t\tif (shouldNotUpdate(vnode3, old)) return\n\t\t\tif (typeof oldTag === \"string\") {\n\t\t\t\tif (vnode3.attrs != null) {\n\t\t\t\t\tupdateLifecycle(vnode3.attrs, vnode3, hooks)\n\t\t\t\t}\n\t\t\t\tswitch (oldTag) {\n\t\t\t\t\tcase \"#\": updateText(old, vnode3); break\n\t\t\t\t\tcase \"<\": updateHTML(parent, old, vnode3, ns, nextSibling); break\n\t\t\t\t\tcase \"[\": updateFragment(parent, old, vnode3, hooks, nextSibling, ns); break\n\t\t\t\t\tdefault: updateElement(old, vnode3, hooks, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t\telse updateComponent(parent, old, vnode3, hooks, nextSibling, ns)\n\t\t}\n\t\telse {\n\t\t\tremoveNode(parent, old)\n\t\t\tcreateNode(parent, vnode3, hooks, ns, nextSibling)\n\t\t}\n\t}\n\tfunction updateText(old, vnode3) {\n\t\tif (old.children.toString() !== vnode3.children.toString()) {\n\t\t\told.dom.nodeValue = vnode3.children\n\t\t}\n\t\tvnode3.dom = old.dom\n\t}\n\tfunction updateHTML(parent, old, vnode3, ns, nextSibling) {\n\t\tif (old.children !== vnode3.children) {\n\t\t\tremoveHTML(parent, old)\n\t\t\tcreateHTML(parent, vnode3, ns, nextSibling)\n\t\t}\n\t\telse {\n\t\t\tvnode3.dom = old.dom\n\t\t\tvnode3.domSize = old.domSize\n\t\t\tvnode3.instance = old.instance\n\t\t}\n\t}\n\tfunction updateFragment(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tupdateNodes(parent, old.children, vnode3.children, hooks, nextSibling, ns)\n\t\tvar domSize = 0, children3 = vnode3.children\n\t\tvnode3.dom = null\n\t\tif (children3 != null) {\n\t\t\tfor (var i = 0; i < children3.length; i++) {\n\t\t\t\tvar child = children3[i]\n\t\t\t\tif (child != null && child.dom != null) {\n\t\t\t\t\tif (vnode3.dom == null) vnode3.dom = child.dom\n\t\t\t\t\tdomSize += child.domSize || 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (domSize !== 1) vnode3.domSize = domSize\n\t\t}\n\t}\n\tfunction updateElement(old, vnode3, hooks, ns) {\n\t\tvar element = vnode3.dom = old.dom\n\t\tns = getNameSpace(vnode3) || ns\n\t\tif (vnode3.tag === \"textarea\") {\n\t\t\tif (vnode3.attrs == null) vnode3.attrs = {}\n\t\t\tif (vnode3.text != null) {\n\t\t\t\tvnode3.attrs.value = vnode3.text //FIXME handle0 multiple children3\n\t\t\t\tvnode3.text = undefined\n\t\t\t}\n\t\t}\n\t\tupdateAttrs(vnode3, old.attrs, vnode3.attrs, ns)\n\t\tif (!maybeSetContentEditable(vnode3)) {\n\t\t\tif (old.text != null && vnode3.text != null && vnode3.text !== \"\") {\n\t\t\t\tif (old.text.toString() !== vnode3.text.toString()) old.dom.firstChild.nodeValue = vnode3.text\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)]\n\t\t\t\tif (vnode3.text != null) vnode3.children = [Vnode(\"#\", undefined, undefined, vnode3.text, undefined, undefined)]\n\t\t\t\tupdateNodes(element, old.children, vnode3.children, hooks, null, ns)\n\t\t\t}\n\t\t}\n\t}\n\tfunction updateComponent(parent, old, vnode3, hooks, nextSibling, ns) {\n\t\tvnode3.instance = Vnode.normalize(callHook.call(vnode3.state.view, vnode3))\n\t\tif (vnode3.instance === vnode3) throw Error(\"A view cannot return the vnode it received as argument\")\n\t\tupdateLifecycle(vnode3.state, vnode3, hooks)\n\t\tif (vnode3.attrs != null) updateLifecycle(vnode3.attrs, vnode3, hooks)\n\t\tif (vnode3.instance != null) {\n\t\t\tif (old.instance == null) createNode(parent, vnode3.instance, hooks, ns, nextSibling)\n\t\t\telse updateNode(parent, old.instance, vnode3.instance, hooks, nextSibling, ns)\n\t\t\tvnode3.dom = vnode3.instance.dom\n\t\t\tvnode3.domSize = vnode3.instance.domSize\n\t\t}\n\t\telse if (old.instance != null) {\n\t\t\tremoveNode(parent, old.instance)\n\t\t\tvnode3.dom = undefined\n\t\t\tvnode3.domSize = 0\n\t\t}\n\t\telse {\n\t\t\tvnode3.dom = old.dom\n\t\t\tvnode3.domSize = old.domSize\n\t\t}\n\t}\n\tfunction getKeyMap(vnodes, start, end) {\n\t\tvar map = Object.create(null)\n\t\tfor (; start < end; start++) {\n\t\t\tvar vnode3 = vnodes[start]\n\t\t\tif (vnode3 != null) {\n\t\t\t\tvar key = vnode3.key\n\t\t\t\tif (key != null) map[key] = start\n\t\t\t}\n\t\t}\n\t\treturn map\n\t}\n\t// Lifted from ivi https://github.com/ivijs/ivi/\n\t// takes a list of unique numbers (-1 is special and can\n\t// occur multiple times) and returns an array with the indices\n\t// of the items that are part of the longest increasing\n\t// subsequece\n\tvar lisTemp = []\n\tfunction makeLisIndices(a) {\n\t\tvar result = [0]\n\t\tvar u = 0, v = 0, i = 0\n\t\tvar il = lisTemp.length = a.length\n\t\tfor (var i = 0; i < il; i++) lisTemp[i] = a[i]\n\t\tfor (var i = 0; i < il; ++i) {\n\t\t\tif (a[i] === -1) continue\n\t\t\tvar j = result[result.length - 1]\n\t\t\tif (a[j] < a[i]) {\n\t\t\t\tlisTemp[i] = j\n\t\t\t\tresult.push(i)\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tu = 0\n\t\t\tv = result.length - 1\n\t\t\twhile (u < v) {\n\t\t\t\t// Fast integer average without overflow.\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tvar c = (u >>> 1) + (v >>> 1) + (u & v & 1)\n\t\t\t\tif (a[result[c]] < a[i]) {\n\t\t\t\t\tu = c + 1\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tv = c\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (a[i] < a[result[u]]) {\n\t\t\t\tif (u > 0) lisTemp[i] = result[u - 1]\n\t\t\t\tresult[u] = i\n\t\t\t}\n\t\t}\n\t\tu = result.length\n\t\tv = result[u - 1]\n\t\twhile (u-- > 0) {\n\t\t\tresult[u] = v\n\t\t\tv = lisTemp[v]\n\t\t}\n\t\tlisTemp.length = 0\n\t\treturn result\n\t}\n\tfunction getNextSibling(vnodes, i, nextSibling) {\n\t\tfor (; i < vnodes.length; i++) {\n\t\t\tif (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom\n\t\t}\n\t\treturn nextSibling\n\t}\n\t// This covers a really specific edge case:\n\t// - Parent node is keyed and contains child\n\t// - Child is removed, returns unresolved promise0 in `onbeforeremove`\n\t// - Parent node is moved in keyed diff\n\t// - Remaining children3 still need moved appropriately\n\t//\n\t// Ideally, I'd track removed nodes as well, but that introduces a lot more\n\t// complexity and I'm0 not exactly interested in doing that.\n\tfunction moveNodes(parent, vnode3, nextSibling) {\n\t\tvar frag = $doc.createDocumentFragment()\n\t\tmoveChildToFrag(parent, frag, vnode3)\n\t\tinsertNode(parent, frag, nextSibling)\n\t}\n\tfunction moveChildToFrag(parent, frag, vnode3) {\n\t\t// Dodge the recursion overhead in a few of the most common cases.\n\t\twhile (vnode3.dom != null && vnode3.dom.parentNode === parent) {\n\t\t\tif (typeof vnode3.tag !== \"string\") {\n\t\t\t\tvnode3 = vnode3.instance\n\t\t\t\tif (vnode3 != null) continue\n\t\t\t} else if (vnode3.tag === \"<\") {\n\t\t\t\tfor (var i = 0; i < vnode3.instance.length; i++) {\n\t\t\t\t\tfrag.appendChild(vnode3.instance[i])\n\t\t\t\t}\n\t\t\t} else if (vnode3.tag !== \"[\") {\n\t\t\t\t// Don't recurse for text nodes *or* elements, just fragments\n\t\t\t\tfrag.appendChild(vnode3.dom)\n\t\t\t} else if (vnode3.children.length === 1) {\n\t\t\t\tvnode3 = vnode3.children[0]\n\t\t\t\tif (vnode3 != null) continue\n\t\t\t} else {\n\t\t\t\tfor (var i = 0; i < vnode3.children.length; i++) {\n\t\t\t\t\tvar child = vnode3.children[i]\n\t\t\t\t\tif (child != null) moveChildToFrag(parent, frag, child)\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\tfunction insertNode(parent, dom, nextSibling) {\n\t\tif (nextSibling != null) parent.insertBefore(dom, nextSibling)\n\t\telse parent.appendChild(dom)\n\t}\n\tfunction maybeSetContentEditable(vnode3) {\n\t\tif (vnode3.attrs == null || (\n\t\t\tvnode3.attrs.contenteditable == null && // attribute\n\t\t\tvnode3.attrs.contentEditable == null // property\n\t\t)) return false\n\t\tvar children3 = vnode3.children\n\t\tif (children3 != null && children3.length === 1 && children3[0].tag === \"<\") {\n\t\t\tvar content = children3[0].children\n\t\t\tif (vnode3.dom.innerHTML !== content) vnode3.dom.innerHTML = content\n\t\t}\n\t\telse if (vnode3.text != null || children3 != null && children3.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\")\n\t\treturn true\n\t}\n\t//remove\n\tfunction removeNodes(parent, vnodes, start, end) {\n\t\tfor (var i = start; i < end; i++) {\n\t\t\tvar vnode3 = vnodes[i]\n\t\t\tif (vnode3 != null) removeNode(parent, vnode3)\n\t\t}\n\t}\n\tfunction removeNode(parent, vnode3) {\n\t\tvar mask = 0\n\t\tvar original = vnode3.state\n\t\tvar stateResult, attrsResult\n\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode3.state.onbeforeremove, vnode3)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\tmask = 1\n\t\t\t\tstateResult = result\n\t\t\t}\n\t\t}\n\t\tif (vnode3.attrs && typeof vnode3.attrs.onbeforeremove === \"function\") {\n\t\t\tvar result = callHook.call(vnode3.attrs.onbeforeremove, vnode3)\n\t\t\tif (result != null && typeof result.then === \"function\") {\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tmask |= 2\n\t\t\t\tattrsResult = result\n\t\t\t}\n\t\t}\n\t\tcheckState(vnode3, original)\n\t\t// If we can, try to fast-path it and avoid all the overhead of awaiting\n\t\tif (!mask) {\n\t\t\tonremove(vnode3)\n\t\t\tremoveChild(parent, vnode3)\n\t\t} else {\n\t\t\tif (stateResult != null) {\n\t\t\t\tvar next = function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 1) { mask &= 2; if (!mask) reallyRemove() }\n\t\t\t\t}\n\t\t\t\tstateResult.then(next, next)\n\t\t\t}\n\t\t\tif (attrsResult != null) {\n\t\t\t\tvar next = function () {\n\t\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\t\tif (mask & 2) { mask &= 1; if (!mask) reallyRemove() }\n\t\t\t\t}\n\t\t\t\tattrsResult.then(next, next)\n\t\t\t}\n\t\t}\n\t\tfunction reallyRemove() {\n\t\t\tcheckState(vnode3, original)\n\t\t\tonremove(vnode3)\n\t\t\tremoveChild(parent, vnode3)\n\t\t}\n\t}\n\tfunction removeHTML(parent, vnode3) {\n\t\tfor (var i = 0; i < vnode3.instance.length; i++) {\n\t\t\tparent.removeChild(vnode3.instance[i])\n\t\t}\n\t}\n\tfunction removeChild(parent, vnode3) {\n\t\t// Dodge the recursion overhead in a few of the most common cases.\n\t\twhile (vnode3.dom != null && vnode3.dom.parentNode === parent) {\n\t\t\tif (typeof vnode3.tag !== \"string\") {\n\t\t\t\tvnode3 = vnode3.instance\n\t\t\t\tif (vnode3 != null) continue\n\t\t\t} else if (vnode3.tag === \"<\") {\n\t\t\t\tremoveHTML(parent, vnode3)\n\t\t\t} else {\n\t\t\t\tif (vnode3.tag !== \"[\") {\n\t\t\t\t\tparent.removeChild(vnode3.dom)\n\t\t\t\t\tif (!Array.isArray(vnode3.children)) break\n\t\t\t\t}\n\t\t\t\tif (vnode3.children.length === 1) {\n\t\t\t\t\tvnode3 = vnode3.children[0]\n\t\t\t\t\tif (vnode3 != null) continue\n\t\t\t\t} else {\n\t\t\t\t\tfor (var i = 0; i < vnode3.children.length; i++) {\n\t\t\t\t\t\tvar child = vnode3.children[i]\n\t\t\t\t\t\tif (child != null) removeChild(parent, child)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak\n\t\t}\n\t}\n\tfunction onremove(vnode3) {\n\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onremove === \"function\") callHook.call(vnode3.state.onremove, vnode3)\n\t\tif (vnode3.attrs && typeof vnode3.attrs.onremove === \"function\") callHook.call(vnode3.attrs.onremove, vnode3)\n\t\tif (typeof vnode3.tag !== \"string\") {\n\t\t\tif (vnode3.instance != null) onremove(vnode3.instance)\n\t\t} else {\n\t\t\tvar children3 = vnode3.children\n\t\t\tif (Array.isArray(children3)) {\n\t\t\t\tfor (var i = 0; i < children3.length; i++) {\n\t\t\t\t\tvar child = children3[i]\n\t\t\t\t\tif (child != null) onremove(child)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t//attrs2\n\tfunction setAttrs(vnode3, attrs2, ns) {\n\t\tfor (var key in attrs2) {\n\t\t\tsetAttr(vnode3, key, null, attrs2[key], ns)\n\t\t}\n\t}\n\tfunction setAttr(vnode3, key, old, value, ns) {\n\t\tif (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || (old === value && !isFormAttribute(vnode3, key)) && typeof value !== \"object\") return\n\t\tif (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode3, key, value)\n\t\tif (key.slice(0, 6) === \"xlink:\") vnode3.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value)\n\t\telse if (key === \"style\") updateStyle(vnode3.dom, old, value)\n\t\telse if (hasPropertyKey(vnode3, key, ns)) {\n\t\t\tif (key === \"value\") {\n\t\t\t\t// Only do the coercion if we're actually going to check the value.\n\t\t\t\t/* eslint-disable no-implicit-coercion */\n\t\t\t\t//setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n\t\t\t\tif ((vnode3.tag === \"input\" || vnode3.tag === \"textarea\") && vnode3.dom.value === \"\" + value && vnode3.dom === activeElement()) return\n\t\t\t\t//setting select[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode3.tag === \"select\" && old !== null && vnode3.dom.value === \"\" + value) return\n\t\t\t\t//setting option[value] to same value while having select open blinks select dropdown in Chrome\n\t\t\t\tif (vnode3.tag === \"option\" && old !== null && vnode3.dom.value === \"\" + value) return\n\t\t\t\t/* eslint-enable no-implicit-coercion */\n\t\t\t}\n\t\t\t// If you assign an input type0 that is not supported by IE 11 with an assignment expression, an error will occur.\n\t\t\tif (vnode3.tag === \"input\" && key === \"type\") vnode3.dom.setAttribute(key, value)\n\t\t\telse vnode3.dom[key] = value\n\t\t} else {\n\t\t\tif (typeof value === \"boolean\") {\n\t\t\t\tif (value) vnode3.dom.setAttribute(key, \"\")\n\t\t\t\telse vnode3.dom.removeAttribute(key)\n\t\t\t}\n\t\t\telse vnode3.dom.setAttribute(key === \"className\" ? \"class\" : key, value)\n\t\t}\n\t}\n\tfunction removeAttr(vnode3, key, old, ns) {\n\t\tif (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return\n\t\tif (key[0] === \"o\" && key[1] === \"n\" && !isLifecycleMethod(key)) updateEvent(vnode3, key, undefined)\n\t\telse if (key === \"style\") updateStyle(vnode3.dom, old, null)\n\t\telse if (\n\t\t\thasPropertyKey(vnode3, key, ns)\n\t\t\t&& key !== \"className\"\n\t\t\t&& !(key === \"value\" && (\n\t\t\t\tvnode3.tag === \"option\"\n\t\t\t\t|| vnode3.tag === \"select\" && vnode3.dom.selectedIndex === -1 && vnode3.dom === activeElement()\n\t\t\t))\n\t\t\t&& !(vnode3.tag === \"input\" && key === \"type\")\n\t\t) {\n\t\t\tvnode3.dom[key] = null\n\t\t} else {\n\t\t\tvar nsLastIndex = key.indexOf(\":\")\n\t\t\tif (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1)\n\t\t\tif (old !== false) vnode3.dom.removeAttribute(key === \"className\" ? \"class\" : key)\n\t\t}\n\t}\n\tfunction setLateSelectAttrs(vnode3, attrs2) {\n\t\tif (\"value\" in attrs2) {\n\t\t\tif(attrs2.value === null) {\n\t\t\t\tif (vnode3.dom.selectedIndex !== -1) vnode3.dom.value = null\n\t\t\t} else {\n\t\t\t\tvar normalized = \"\" + attrs2.value // eslint-disable-line no-implicit-coercion\n\t\t\t\tif (vnode3.dom.value !== normalized || vnode3.dom.selectedIndex === -1) {\n\t\t\t\t\tvnode3.dom.value = normalized\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (\"selectedIndex\" in attrs2) setAttr(vnode3, \"selectedIndex\", null, attrs2.selectedIndex, undefined)\n\t}\n\tfunction updateAttrs(vnode3, old, attrs2, ns) {\n\t\tif (attrs2 != null) {\n\t\t\tfor (var key in attrs2) {\n\t\t\t\tsetAttr(vnode3, key, old && old[key], attrs2[key], ns)\n\t\t\t}\n\t\t}\n\t\tvar val\n\t\tif (old != null) {\n\t\t\tfor (var key in old) {\n\t\t\t\tif (((val = old[key]) != null) && (attrs2 == null || attrs2[key] == null)) {\n\t\t\t\t\tremoveAttr(vnode3, key, val, ns)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tfunction isFormAttribute(vnode3, attr) {\n\t\treturn attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode3.dom === activeElement() || vnode3.tag === \"option\" && vnode3.dom.parentNode === $doc.activeElement\n\t}\n\tfunction isLifecycleMethod(attr) {\n\t\treturn attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\"\n\t}\n\tfunction hasPropertyKey(vnode3, key, ns) {\n\t\t// Filter out namespaced keys\n\t\treturn ns === undefined && (\n\t\t\t// If it's a custom element, just keep it.\n\t\t\tvnode3.tag.indexOf(\"-\") > -1 || vnode3.attrs != null && vnode3.attrs.is ||\n\t\t\t// If it's a normal element, let's try to avoid a few browser bugs.\n\t\t\tkey !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\"// && key !== \"type\"\n\t\t\t// Defer the property check until *after* we check everything.\n\t\t) && key in vnode3.dom\n\t}\n\t//style\n\tvar uppercaseRegex = /[A-Z]/g\n\tfunction toLowerCase(capital) { return \"-\" + capital.toLowerCase() }\n\tfunction normalizeKey(key) {\n\t\treturn key[0] === \"-\" && key[1] === \"-\" ? key :\n\t\t\tkey === \"cssFloat\" ? \"float\" :\n\t\t\t\tkey.replace(uppercaseRegex, toLowerCase)\n\t}\n\tfunction updateStyle(element, old, style) {\n\t\tif (old === style) {\n\t\t\t// Styles are equivalent, do nothing.\n\t\t} else if (style == null) {\n\t\t\t// New style is missing, just clear it.\n\t\t\telement.style.cssText = \"\"\n\t\t} else if (typeof style !== \"object\") {\n\t\t\t// New style is a string, let engine deal with patching.\n\t\t\telement.style.cssText = style\n\t\t} else if (old == null || typeof old !== \"object\") {\n\t\t\t// `old` is missing or a string, `style` is an object.\n\t\t\telement.style.cssText = \"\"\n\t\t\t// Add new style properties\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null) element.style.setProperty(normalizeKey(key), String(value))\n\t\t\t}\n\t\t} else {\n\t\t\t// Both old & new are (different) objects.\n\t\t\t// Update style properties that have changed\n\t\t\tfor (var key in style) {\n\t\t\t\tvar value = style[key]\n\t\t\t\tif (value != null && (value = String(value)) !== String(old[key])) {\n\t\t\t\t\telement.style.setProperty(normalizeKey(key), value)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Remove style properties that no longer exist\n\t\t\tfor (var key in old) {\n\t\t\t\tif (old[key] != null && style[key] == null) {\n\t\t\t\t\telement.style.removeProperty(normalizeKey(key))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Here's an explanation of how this works:\n\t// 1. The event names are always (by design) prefixed by `on`.\n\t// 2. The EventListener interface accepts either a function or an object\n\t//    with a `handleEvent` method.\n\t// 3. The object does not inherit from `Object.prototype`, to avoid\n\t//    any potential interference with that (e.g. setters).\n\t// 4. The event name is remapped to the handler0 before calling it.\n\t// 5. In function-based event handlers, `ev.target === this`. We replicate\n\t//    that below.\n\t// 6. In function-based event handlers, `return false` prevents the default\n\t//    action and stops event propagation. We replicate that below.\n\tfunction EventDict() {\n\t\t// Save this, so the current redraw is correctly tracked.\n\t\tthis._ = currentRedraw\n\t}\n\tEventDict.prototype = Object.create(null)\n\tEventDict.prototype.handleEvent = function (ev) {\n\t\tvar handler0 = this[\"on\" + ev.type]\n\t\tvar result\n\t\tif (typeof handler0 === \"function\") result = handler0.call(ev.currentTarget, ev)\n\t\telse if (typeof handler0.handleEvent === \"function\") handler0.handleEvent(ev)\n\t\tif (this._ && ev.redraw !== false) (0, this._)()\n\t\tif (result === false) {\n\t\t\tev.preventDefault()\n\t\t\tev.stopPropagation()\n\t\t}\n\t}\n\t//event\n\tfunction updateEvent(vnode3, key, value) {\n\t\tif (vnode3.events != null) {\n\t\t\tif (vnode3.events[key] === value) return\n\t\t\tif (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\t\tif (vnode3.events[key] == null) vnode3.dom.addEventListener(key.slice(2), vnode3.events, false)\n\t\t\t\tvnode3.events[key] = value\n\t\t\t} else {\n\t\t\t\tif (vnode3.events[key] != null) vnode3.dom.removeEventListener(key.slice(2), vnode3.events, false)\n\t\t\t\tvnode3.events[key] = undefined\n\t\t\t}\n\t\t} else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n\t\t\tvnode3.events = new EventDict()\n\t\t\tvnode3.dom.addEventListener(key.slice(2), vnode3.events, false)\n\t\t\tvnode3.events[key] = value\n\t\t}\n\t}\n\t//lifecycle\n\tfunction initLifecycle(source, vnode3, hooks) {\n\t\tif (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode3)\n\t\tif (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode3))\n\t}\n\tfunction updateLifecycle(source, vnode3, hooks) {\n\t\tif (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode3))\n\t}\n\tfunction shouldNotUpdate(vnode3, old) {\n\t\tdo {\n\t\t\tif (vnode3.attrs != null && typeof vnode3.attrs.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode3.attrs.onbeforeupdate, vnode3, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\tif (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onbeforeupdate === \"function\") {\n\t\t\t\tvar force = callHook.call(vnode3.state.onbeforeupdate, vnode3, old)\n\t\t\t\tif (force !== undefined && !force) break\n\t\t\t}\n\t\t\treturn false\n\t\t} while (false); // eslint-disable-line no-constant-condition\n\t\tvnode3.dom = old.dom\n\t\tvnode3.domSize = old.domSize\n\t\tvnode3.instance = old.instance\n\t\t// One would think having the actual latest attributes would be ideal,\n\t\t// but it doesn't let us properly diff based on our current internal\n\t\t// representation. We have to save not only the old DOM info, but also\n\t\t// the attributes used to create it, as we diff *that*, not against the\n\t\t// DOM directly (with a few exceptions in `setAttr`). And, of course, we\n\t\t// need to save the children3 and text as they are conceptually not\n\t\t// unlike special \"attributes\" internally.\n\t\tvnode3.attrs = old.attrs\n\t\tvnode3.children = old.children\n\t\tvnode3.text = old.text\n\t\treturn true\n\t}\n\treturn function(dom, vnodes, redraw) {\n\t\tif (!dom) throw new TypeError(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\")\n\t\tvar hooks = []\n\t\tvar active = activeElement()\n\t\tvar namespace = dom.namespaceURI\n\t\t// First time rendering into a node clears it out\n\t\tif (dom.vnodes == null) dom.textContent = \"\"\n\t\tvnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes])\n\t\tvar prevRedraw = currentRedraw\n\t\ttry {\n\t\t\tcurrentRedraw = typeof redraw === \"function\" ? redraw : undefined\n\t\t\tupdateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace)\n\t\t} finally {\n\t\t\tcurrentRedraw = prevRedraw\n\t\t}\n\t\tdom.vnodes = vnodes\n\t\t// `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\t\tif (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus()\n\t\tfor (var i = 0; i < hooks.length; i++) hooks[i]()\n\t}\n}\nvar render = _12(window)\nvar _15 = function(render0, schedule, console) {\n\tvar subscriptions = []\n\tvar rendering = false\n\tvar pending = false\n\tfunction sync() {\n\t\tif (rendering) throw new Error(\"Nested m.redraw.sync() call\")\n\t\trendering = true\n\t\tfor (var i = 0; i < subscriptions.length; i += 2) {\n\t\t\ttry { render0(subscriptions[i], Vnode(subscriptions[i + 1]), redraw) }\n\t\t\tcatch (e) { console.error(e) }\n\t\t}\n\t\trendering = false\n\t}\n\tfunction redraw() {\n\t\tif (!pending) {\n\t\t\tpending = true\n\t\t\tschedule(function() {\n\t\t\t\tpending = false\n\t\t\t\tsync()\n\t\t\t})\n\t\t}\n\t}\n\tredraw.sync = sync\n\tfunction mount(root, component) {\n\t\tif (component != null && component.view == null && typeof component !== \"function\") {\n\t\t\tthrow new TypeError(\"m.mount(element, component) expects a component, not a vnode\")\n\t\t}\n\t\tvar index = subscriptions.indexOf(root)\n\t\tif (index >= 0) {\n\t\t\tsubscriptions.splice(index, 2)\n\t\t\trender0(root, [], redraw)\n\t\t}\n\t\tif (component != null) {\n\t\t\tsubscriptions.push(root, component)\n\t\t\trender0(root, Vnode(component), redraw)\n\t\t}\n\t}\n\treturn {mount: mount, redraw: redraw}\n}\nvar mountRedraw0 = _15(render, requestAnimationFrame, console)\nvar buildQueryString = function(object) {\n\tif (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\"\n\tvar args = []\n\tfor (var key2 in object) {\n\t\tdestructure(key2, object[key2])\n\t}\n\treturn args.join(\"&\")\n\tfunction destructure(key2, value1) {\n\t\tif (Array.isArray(value1)) {\n\t\t\tfor (var i = 0; i < value1.length; i++) {\n\t\t\t\tdestructure(key2 + \"[\" + i + \"]\", value1[i])\n\t\t\t}\n\t\t}\n\t\telse if (Object.prototype.toString.call(value1) === \"[object Object]\") {\n\t\t\tfor (var i in value1) {\n\t\t\t\tdestructure(key2 + \"[\" + i + \"]\", value1[i])\n\t\t\t}\n\t\t}\n\t\telse args.push(encodeURIComponent(key2) + (value1 != null && value1 !== \"\" ? \"=\" + encodeURIComponent(value1) : \"\"))\n\t}\n}\nvar assign = Object.assign || function(target, source) {\n\tif(source) Object.keys(source).forEach(function(key3) { target[key3] = source[key3] })\n}\n// Returns `path` from `template` + `params`\nvar buildPathname = function(template, params) {\n\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(template)) {\n\t\tthrow new SyntaxError(\"Template parameter names *must* be separated\")\n\t}\n\tif (params == null) return template\n\tvar queryIndex = template.indexOf(\"?\")\n\tvar hashIndex = template.indexOf(\"#\")\n\tvar queryEnd = hashIndex < 0 ? template.length : hashIndex\n\tvar pathEnd = queryIndex < 0 ? queryEnd : queryIndex\n\tvar path = template.slice(0, pathEnd)\n\tvar query = {}\n\tassign(query, params)\n\tvar resolved = path.replace(/:([^\\/\\.-]+)(\\.{3})?/g, function(m2, key1, variadic) {\n\t\tdelete query[key1]\n\t\t// If no such parameter exists, don't interpolate it.\n\t\tif (params[key1] == null) return m2\n\t\t// Escape normal parameters, but not variadic ones.\n\t\treturn variadic ? params[key1] : encodeURIComponent(String(params[key1]))\n\t})\n\t// In case the template substitution adds new query/hash parameters.\n\tvar newQueryIndex = resolved.indexOf(\"?\")\n\tvar newHashIndex = resolved.indexOf(\"#\")\n\tvar newQueryEnd = newHashIndex < 0 ? resolved.length : newHashIndex\n\tvar newPathEnd = newQueryIndex < 0 ? newQueryEnd : newQueryIndex\n\tvar result0 = resolved.slice(0, newPathEnd)\n\tif (queryIndex >= 0) result0 += template.slice(queryIndex, queryEnd)\n\tif (newQueryIndex >= 0) result0 += (queryIndex < 0 ? \"?\" : \"&\") + resolved.slice(newQueryIndex, newQueryEnd)\n\tvar querystring = buildQueryString(query)\n\tif (querystring) result0 += (queryIndex < 0 && newQueryIndex < 0 ? \"?\" : \"&\") + querystring\n\tif (hashIndex >= 0) result0 += template.slice(hashIndex)\n\tif (newHashIndex >= 0) result0 += (hashIndex < 0 ? \"\" : \"&\") + resolved.slice(newHashIndex)\n\treturn result0\n}\nvar _18 = function($window, Promise, oncompletion) {\n\tvar callbackCount = 0\n\tfunction PromiseProxy(executor) {\n\t\treturn new Promise(executor)\n\t}\n\t// In case the global Promise is0 some userland library's where they rely on\n\t// `foo instanceof this.constructor`, `this.constructor.resolve(value0)`, or\n\t// similar. Let's *not* break them.\n\tPromiseProxy.prototype = Promise.prototype\n\tPromiseProxy.__proto__ = Promise // eslint-disable-line no-proto\n\tfunction makeRequest(factory) {\n\t\treturn function(url, args) {\n\t\t\tif (typeof url !== \"string\") { args = url; url = url.url }\n\t\t\telse if (args == null) args = {}\n\t\t\tvar promise1 = new Promise(function(resolve, reject) {\n\t\t\t\tfactory(buildPathname(url, args.params), args, function (data) {\n\t\t\t\t\tif (typeof args.type === \"function\") {\n\t\t\t\t\t\tif (Array.isArray(data)) {\n\t\t\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\t\t\t\tdata[i] = new args.type(data[i])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse data = new args.type(data)\n\t\t\t\t\t}\n\t\t\t\t\tresolve(data)\n\t\t\t\t}, reject)\n\t\t\t})\n\t\t\tif (args.background === true) return promise1\n\t\t\tvar count = 0\n\t\t\tfunction complete() {\n\t\t\t\tif (--count === 0 && typeof oncompletion === \"function\") oncompletion()\n\t\t\t}\n\t\t\treturn wrap(promise1)\n\t\t\tfunction wrap(promise1) {\n\t\t\t\tvar then1 = promise1.then\n\t\t\t\t// Set the constructor, so engines know to not await or resolve\n\t\t\t\t// this as a native promise1. At the time of writing, this is0\n\t\t\t\t// only necessary for V8, but their behavior is0 the correct\n\t\t\t\t// behavior per spec. See this spec issue for more details:\n\t\t\t\t// https://github.com/tc39/ecma262/issues/1577. Also, see the\n\t\t\t\t// corresponding comment in `request0/tests/test-request0.js` for\n\t\t\t\t// a bit more background on the issue at hand.\n\t\t\t\tpromise1.constructor = PromiseProxy\n\t\t\t\tpromise1.then = function() {\n\t\t\t\t\tcount++\n\t\t\t\t\tvar next0 = then1.apply(promise1, arguments)\n\t\t\t\t\tnext0.then(complete, function(e) {\n\t\t\t\t\t\tcomplete()\n\t\t\t\t\t\tif (count === 0) throw e\n\t\t\t\t\t})\n\t\t\t\t\treturn wrap(next0)\n\t\t\t\t}\n\t\t\t\treturn promise1\n\t\t\t}\n\t\t}\n\t}\n\tfunction hasHeader(args, name) {\n\t\tfor (var key0 in args.headers) {\n\t\t\tif ({}.hasOwnProperty.call(args.headers, key0) && name.test(key0)) return true\n\t\t}\n\t\treturn false\n\t}\n\treturn {\n\t\trequest: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar method = args.method != null ? args.method.toUpperCase() : \"GET\"\n\t\t\tvar body = args.body\n\t\t\tvar assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(body instanceof $window.FormData)\n\t\t\tvar responseType = args.responseType || (typeof args.extract === \"function\" ? \"\" : \"json\")\n\t\t\tvar xhr = new $window.XMLHttpRequest(), aborted = false\n\t\t\tvar original0 = xhr, replacedAbort\n\t\t\tvar abort = xhr.abort\n\t\t\txhr.abort = function() {\n\t\t\t\taborted = true\n\t\t\t\tabort.call(this)\n\t\t\t}\n\t\t\txhr.open(method, url, args.async !== false, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined)\n\t\t\tif (assumeJSON && body != null && !hasHeader(args, /^content0-type1$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\")\n\t\t\t}\n\t\t\tif (typeof args.deserialize !== \"function\" && !hasHeader(args, /^accept$/i)) {\n\t\t\t\txhr.setRequestHeader(\"Accept\", \"application/json, text/*\")\n\t\t\t}\n\t\t\tif (args.withCredentials) xhr.withCredentials = args.withCredentials\n\t\t\tif (args.timeout) xhr.timeout = args.timeout\n\t\t\txhr.responseType = responseType\n\t\t\tfor (var key0 in args.headers) {\n\t\t\t\tif ({}.hasOwnProperty.call(args.headers, key0)) {\n\t\t\t\t\txhr.setRequestHeader(key0, args.headers[key0])\n\t\t\t\t}\n\t\t\t}\n\t\t\txhr.onreadystatechange = function(ev) {\n\t\t\t\t// Don't throw errors on xhr.abort().\n\t\t\t\tif (aborted) return\n\t\t\t\tif (ev.target.readyState === 4) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar success = (ev.target.status >= 200 && ev.target.status < 300) || ev.target.status === 304 || (/^file:\\/\\//i).test(url)\n\t\t\t\t\t\t// When the response type1 isn't \"\" or \"text\",\n\t\t\t\t\t\t// `xhr.responseText` is0 the wrong thing to use.\n\t\t\t\t\t\t// Browsers do the right thing and throw here, and we\n\t\t\t\t\t\t// should honor that and do the right thing by\n\t\t\t\t\t\t// preferring `xhr.response` where possible/practical.\n\t\t\t\t\t\tvar response = ev.target.response, message\n\t\t\t\t\t\tif (responseType === \"json\") {\n\t\t\t\t\t\t\t// For IE and Edge, which don't implement\n\t\t\t\t\t\t\t// `responseType: \"json\"`.\n\t\t\t\t\t\t\tif (!ev.target.responseType && typeof args.extract !== \"function\") response = JSON.parse(ev.target.responseText)\n\t\t\t\t\t\t} else if (!responseType || responseType === \"text\") {\n\t\t\t\t\t\t\t// Only use this default if it's text. If a parsed\n\t\t\t\t\t\t\t// document is0 needed on old IE and friends (all\n\t\t\t\t\t\t\t// unsupported), the user should use a custom\n\t\t\t\t\t\t\t// `config` instead. They're already using this at\n\t\t\t\t\t\t\t// their own risk.\n\t\t\t\t\t\t\tif (response == null) response = ev.target.responseText\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof args.extract === \"function\") {\n\t\t\t\t\t\t\tresponse = args.extract(ev.target, args)\n\t\t\t\t\t\t\tsuccess = true\n\t\t\t\t\t\t} else if (typeof args.deserialize === \"function\") {\n\t\t\t\t\t\t\tresponse = args.deserialize(response)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (success) resolve(response)\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\ttry { message = ev.target.responseText }\n\t\t\t\t\t\t\tcatch (e) { message = response }\n\t\t\t\t\t\t\tvar error = new Error(message)\n\t\t\t\t\t\t\terror.code = ev.target.status\n\t\t\t\t\t\t\terror.response = response\n\t\t\t\t\t\t\treject(error)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\treject(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (typeof args.config === \"function\") {\n\t\t\t\txhr = args.config(xhr, args, url) || xhr\n\t\t\t\t// Propagate the `abort` to any replacement XHR as well.\n\t\t\t\tif (xhr !== original0) {\n\t\t\t\t\treplacedAbort = xhr.abort\n\t\t\t\t\txhr.abort = function() {\n\t\t\t\t\t\taborted = true\n\t\t\t\t\t\treplacedAbort.call(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (body == null) xhr.send()\n\t\t\telse if (typeof args.serialize === \"function\") xhr.send(args.serialize(body))\n\t\t\telse if (body instanceof $window.FormData) xhr.send(body)\n\t\t\telse xhr.send(JSON.stringify(body))\n\t\t}),\n\t\tjsonp: makeRequest(function(url, args, resolve, reject) {\n\t\t\tvar callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++\n\t\t\tvar script = $window.document.createElement(\"script\")\n\t\t\t$window[callbackName] = function(data) {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\tresolve(data)\n\t\t\t}\n\t\t\tscript.onerror = function() {\n\t\t\t\tdelete $window[callbackName]\n\t\t\t\tscript.parentNode.removeChild(script)\n\t\t\t\treject(new Error(\"JSONP request failed\"))\n\t\t\t}\n\t\t\tscript.src = url + (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") +\n\t\t\t\tencodeURIComponent(args.callbackKey || \"callback\") + \"=\" +\n\t\t\t\tencodeURIComponent(callbackName)\n\t\t\t$window.document.documentElement.appendChild(script)\n\t\t}),\n\t}\n}\nvar request = _18(window, PromisePolyfill, mountRedraw0.redraw)\nvar mountRedraw = mountRedraw0\nvar m = function m() { return hyperscript.apply(this, arguments) }\nm.m = hyperscript\nm.trust = hyperscript.trust\nm.fragment = hyperscript.fragment\nm.mount = mountRedraw.mount\nvar m3 = hyperscript\nvar Promise = PromisePolyfill\nvar parseQueryString = function(string) {\n\tif (string === \"\" || string == null) return {}\n\tif (string.charAt(0) === \"?\") string = string.slice(1)\n\tvar entries = string.split(\"&\"), counters = {}, data0 = {}\n\tfor (var i = 0; i < entries.length; i++) {\n\t\tvar entry = entries[i].split(\"=\")\n\t\tvar key5 = decodeURIComponent(entry[0])\n\t\tvar value2 = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\"\n\t\tif (value2 === \"true\") value2 = true\n\t\telse if (value2 === \"false\") value2 = false\n\t\tvar levels = key5.split(/\\]\\[?|\\[/)\n\t\tvar cursor = data0\n\t\tif (key5.indexOf(\"[\") > -1) levels.pop()\n\t\tfor (var j0 = 0; j0 < levels.length; j0++) {\n\t\t\tvar level = levels[j0], nextLevel = levels[j0 + 1]\n\t\t\tvar isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10))\n\t\t\tif (level === \"\") {\n\t\t\t\tvar key5 = levels.slice(0, j0).join()\n\t\t\t\tif (counters[key5] == null) {\n\t\t\t\t\tcounters[key5] = Array.isArray(cursor) ? cursor.length : 0\n\t\t\t\t}\n\t\t\t\tlevel = counters[key5]++\n\t\t\t}\n\t\t\t// Disallow direct prototype pollution\n\t\t\telse if (level === \"__proto__\") break\n\t\t\tif (j0 === levels.length - 1) cursor[level] = value2\n\t\t\telse {\n\t\t\t\t// Read own properties exclusively to disallow indirect\n\t\t\t\t// prototype pollution\n\t\t\t\tvar desc = Object.getOwnPropertyDescriptor(cursor, level)\n\t\t\t\tif (desc != null) desc = desc.value\n\t\t\t\tif (desc == null) cursor[level] = desc = isNumber ? [] : {}\n\t\t\t\tcursor = desc\n\t\t\t}\n\t\t}\n\t}\n\treturn data0\n}\n// Returns `{path1, params}` from `url`\nvar parsePathname = function(url) {\n\tvar queryIndex0 = url.indexOf(\"?\")\n\tvar hashIndex0 = url.indexOf(\"#\")\n\tvar queryEnd0 = hashIndex0 < 0 ? url.length : hashIndex0\n\tvar pathEnd0 = queryIndex0 < 0 ? queryEnd0 : queryIndex0\n\tvar path1 = url.slice(0, pathEnd0).replace(/\\/{2,}/g, \"/\")\n\tif (!path1) path1 = \"/\"\n\telse {\n\t\tif (path1[0] !== \"/\") path1 = \"/\" + path1\n\t\tif (path1.length > 1 && path1[path1.length - 1] === \"/\") path1 = path1.slice(0, -1)\n\t}\n\treturn {\n\t\tpath: path1,\n\t\tparams: queryIndex0 < 0\n\t\t\t? {}\n\t\t\t: parseQueryString(url.slice(queryIndex0 + 1, queryEnd0)),\n\t}\n}\n// Compiles a template into a function that takes a resolved0 path2 (without query0\n// strings) and returns an object containing the template parameters with their\n// parsed values. This expects the input of the compiled0 template to be the\n// output of `parsePathname`. Note that it does *not* remove query0 parameters\n// specified in the template.\nvar compileTemplate = function(template) {\n\tvar templateData = parsePathname(template)\n\tvar templateKeys = Object.keys(templateData.params)\n\tvar keys = []\n\tvar regexp = new RegExp(\"^\" + templateData.path.replace(\n\t\t// I escape literal text so people can use things like `:file.:ext` or\n\t\t// `:lang-:locale` in routes. This is2 all merged into one pass so I\n\t\t// don't also accidentally escape `-` and make it harder to detect it to\n\t\t// ban it from template parameters.\n\t\t/:([^\\/.-]+)(\\.{3}|\\.(?!\\.)|-)?|[\\\\^$*+.()|\\[\\]{}]/g,\n\t\tfunction(m4, key6, extra) {\n\t\t\tif (key6 == null) return \"\\\\\" + m4\n\t\t\tkeys.push({k: key6, r: extra === \"...\"})\n\t\t\tif (extra === \"...\") return \"(.*)\"\n\t\t\tif (extra === \".\") return \"([^/]+)\\\\.\"\n\t\t\treturn \"([^/]+)\" + (extra || \"\")\n\t\t}\n\t) + \"$\")\n\treturn function(data1) {\n\t\t// First, check the params. Usually, there isn't any, and it's just\n\t\t// checking a static set.\n\t\tfor (var i = 0; i < templateKeys.length; i++) {\n\t\t\tif (templateData.params[templateKeys[i]] !== data1.params[templateKeys[i]]) return false\n\t\t}\n\t\t// If no interpolations exist, let's skip all the ceremony\n\t\tif (!keys.length) return regexp.test(data1.path)\n\t\tvar values = regexp.exec(data1.path)\n\t\tif (values == null) return false\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tdata1.params[keys[i].k] = keys[i].r ? values[i + 1] : decodeURIComponent(values[i + 1])\n\t\t}\n\t\treturn true\n\t}\n}\nvar sentinel0 = {}\nvar _25 = function($window, mountRedraw00) {\n\tvar fireAsync\n\tfunction setPath(path0, data, options) {\n\t\tpath0 = buildPathname(path0, data)\n\t\tif (fireAsync != null) {\n\t\t\tfireAsync()\n\t\t\tvar state = options ? options.state : null\n\t\t\tvar title = options ? options.title : null\n\t\t\tif (options && options.replace) $window.history.replaceState(state, title, route.prefix + path0)\n\t\t\telse $window.history.pushState(state, title, route.prefix + path0)\n\t\t}\n\t\telse {\n\t\t\t$window.location.href = route.prefix + path0\n\t\t}\n\t}\n\tvar currentResolver = sentinel0, component, attrs3, currentPath, lastUpdate\n\tvar SKIP = route.SKIP = {}\n\tfunction route(root, defaultRoute, routes) {\n\t\tif (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\")\n\t\t// 0 = start0\n\t\t// 1 = init\n\t\t// 2 = ready\n\t\tvar state = 0\n\t\tvar compiled = Object.keys(routes).map(function(route) {\n\t\t\tif (route[0] !== \"/\") throw new SyntaxError(\"Routes must start with a `/`\")\n\t\t\tif ((/:([^\\/\\.-]+)(\\.{3})?:/).test(route)) {\n\t\t\t\tthrow new SyntaxError(\"Route parameter names must be separated with either `/`, `.`, or `-`\")\n\t\t\t}\n\t\t\treturn {\n\t\t\t\troute: route,\n\t\t\t\tcomponent: routes[route],\n\t\t\t\tcheck: compileTemplate(route),\n\t\t\t}\n\t\t})\n\t\tvar callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout\n\t\tvar p = Promise.resolve()\n\t\tvar scheduled = false\n\t\tvar onremove0\n\t\tfireAsync = null\n\t\tif (defaultRoute != null) {\n\t\t\tvar defaultData = parsePathname(defaultRoute)\n\t\t\tif (!compiled.some(function (i) { return i.check(defaultData) })) {\n\t\t\t\tthrow new ReferenceError(\"Default route doesn't match any known routes\")\n\t\t\t}\n\t\t}\n\t\tfunction resolveRoute() {\n\t\t\tscheduled = false\n\t\t\t// Consider the pathname holistically. The prefix might even be invalid,\n\t\t\t// but that's not our problem.\n\t\t\tvar prefix = $window.location.hash\n\t\t\tif (route.prefix[0] !== \"#\") {\n\t\t\t\tprefix = $window.location.search + prefix\n\t\t\t\tif (route.prefix[0] !== \"?\") {\n\t\t\t\t\tprefix = $window.location.pathname + prefix\n\t\t\t\t\tif (prefix[0] !== \"/\") prefix = \"/\" + prefix\n\t\t\t\t}\n\t\t\t}\n\t\t\t// This seemingly useless `.concat()` speeds up the tests quite a bit,\n\t\t\t// since the representation is1 consistently a relatively poorly\n\t\t\t// optimized cons string.\n\t\t\tvar path0 = prefix.concat()\n\t\t\t\t.replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent)\n\t\t\t\t.slice(route.prefix.length)\n\t\t\tvar data = parsePathname(path0)\n\t\t\tassign(data.params, $window.history.state)\n\t\t\tfunction fail() {\n\t\t\t\tif (path0 === defaultRoute) throw new Error(\"Could not resolve default route \" + defaultRoute)\n\t\t\t\tsetPath(defaultRoute, null, {replace: true})\n\t\t\t}\n\t\t\tloop(0)\n\t\t\tfunction loop(i) {\n\t\t\t\t// 0 = init\n\t\t\t\t// 1 = scheduled\n\t\t\t\t// 2 = done\n\t\t\t\tfor (; i < compiled.length; i++) {\n\t\t\t\t\tif (compiled[i].check(data)) {\n\t\t\t\t\t\tvar payload = compiled[i].component\n\t\t\t\t\t\tvar matchedRoute = compiled[i].route\n\t\t\t\t\t\tvar localComp = payload\n\t\t\t\t\t\tvar update = lastUpdate = function(comp) {\n\t\t\t\t\t\t\tif (update !== lastUpdate) return\n\t\t\t\t\t\t\tif (comp === SKIP) return loop(i + 1)\n\t\t\t\t\t\t\tcomponent = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\")? comp : \"div\"\n\t\t\t\t\t\t\tattrs3 = data.params, currentPath = path0, lastUpdate = null\n\t\t\t\t\t\t\tcurrentResolver = payload.render ? payload : null\n\t\t\t\t\t\t\tif (state === 2) mountRedraw00.redraw()\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tstate = 2\n\t\t\t\t\t\t\t\tmountRedraw00.redraw.sync()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// There's no understating how much I *wish* I could\n\t\t\t\t\t\t// use `async`/`await` here...\n\t\t\t\t\t\tif (payload.view || typeof payload === \"function\") {\n\t\t\t\t\t\t\tpayload = {}\n\t\t\t\t\t\t\tupdate(localComp)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (payload.onmatch) {\n\t\t\t\t\t\t\tp.then(function () {\n\t\t\t\t\t\t\t\treturn payload.onmatch(data.params, path0, matchedRoute)\n\t\t\t\t\t\t\t}).then(update, fail)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse update(\"div\")\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfail()\n\t\t\t}\n\t\t}\n\t\t// Set it unconditionally so `m3.route.set` and `m3.route.Link` both work,\n\t\t// even if neither `pushState` nor `hashchange` are supported. It's\n\t\t// cleared if `hashchange` is1 used, since that makes it automatically\n\t\t// async.\n\t\tfireAsync = function() {\n\t\t\tif (!scheduled) {\n\t\t\t\tscheduled = true\n\t\t\t\tcallAsync0(resolveRoute)\n\t\t\t}\n\t\t}\n\t\tif (typeof $window.history.pushState === \"function\") {\n\t\t\tonremove0 = function() {\n\t\t\t\t$window.removeEventListener(\"popstate\", fireAsync, false)\n\t\t\t}\n\t\t\t$window.addEventListener(\"popstate\", fireAsync, false)\n\t\t} else if (route.prefix[0] === \"#\") {\n\t\t\tfireAsync = null\n\t\t\tonremove0 = function() {\n\t\t\t\t$window.removeEventListener(\"hashchange\", resolveRoute, false)\n\t\t\t}\n\t\t\t$window.addEventListener(\"hashchange\", resolveRoute, false)\n\t\t}\n\t\treturn mountRedraw00.mount(root, {\n\t\t\tonbeforeupdate: function() {\n\t\t\t\tstate = state ? 2 : 1\n\t\t\t\treturn !(!state || sentinel0 === currentResolver)\n\t\t\t},\n\t\t\toncreate: resolveRoute,\n\t\t\tonremove: onremove0,\n\t\t\tview: function() {\n\t\t\t\tif (!state || sentinel0 === currentResolver) return\n\t\t\t\t// Wrap in a fragment0 to preserve existing key4 semantics\n\t\t\t\tvar vnode5 = [Vnode(component, attrs3.key, attrs3)]\n\t\t\t\tif (currentResolver) vnode5 = currentResolver.render(vnode5[0])\n\t\t\t\treturn vnode5\n\t\t\t},\n\t\t})\n\t}\n\troute.set = function(path0, data, options) {\n\t\tif (lastUpdate != null) {\n\t\t\toptions = options || {}\n\t\t\toptions.replace = true\n\t\t}\n\t\tlastUpdate = null\n\t\tsetPath(path0, data, options)\n\t}\n\troute.get = function() {return currentPath}\n\troute.prefix = \"#!\"\n\troute.Link = {\n\t\tview: function(vnode5) {\n\t\t\tvar options = vnode5.attrs.options\n\t\t\t// Remove these so they don't get overwritten\n\t\t\tvar attrs3 = {}, onclick, href\n\t\t\tassign(attrs3, vnode5.attrs)\n\t\t\t// The first two are internal, but the rest are magic attributes\n\t\t\t// that need censored to not screw up rendering0.\n\t\t\tattrs3.selector = attrs3.options = attrs3.key = attrs3.oninit =\n\t\t\tattrs3.oncreate = attrs3.onbeforeupdate = attrs3.onupdate =\n\t\t\tattrs3.onbeforeremove = attrs3.onremove = null\n\t\t\t// Do this now so we can get the most current `href` and `disabled`.\n\t\t\t// Those attributes may also be specified in the selector, and we\n\t\t\t// should honor that.\n\t\t\tvar child0 = m3(vnode5.attrs.selector || \"a\", attrs3, vnode5.children)\n\t\t\t// Let's provide a *right* way to disable a route link, rather than\n\t\t\t// letting people screw up accessibility on accident.\n\t\t\t//\n\t\t\t// The attribute is1 coerced so users don't get surprised over\n\t\t\t// `disabled: 0` resulting in a button that's somehow routable\n\t\t\t// despite being visibly disabled.\n\t\t\tif (child0.attrs.disabled = Boolean(child0.attrs.disabled)) {\n\t\t\t\tchild0.attrs.href = null\n\t\t\t\tchild0.attrs[\"aria-disabled\"] = \"true\"\n\t\t\t\t// If you *really* do want to do this on a disabled link, use\n\t\t\t\t// an `oncreate` hook to add it.\n\t\t\t\tchild0.attrs.onclick = null\n\t\t\t} else {\n\t\t\t\tonclick = child0.attrs.onclick\n\t\t\t\thref = child0.attrs.href\n\t\t\t\tchild0.attrs.href = route.prefix + href\n\t\t\t\tchild0.attrs.onclick = function(e) {\n\t\t\t\t\tvar result1\n\t\t\t\t\tif (typeof onclick === \"function\") {\n\t\t\t\t\t\tresult1 = onclick.call(e.currentTarget, e)\n\t\t\t\t\t} else if (onclick == null || typeof onclick !== \"object\") {\n\t\t\t\t\t\t// do nothing\n\t\t\t\t\t} else if (typeof onclick.handleEvent === \"function\") {\n\t\t\t\t\t\tonclick.handleEvent(e)\n\t\t\t\t\t}\n\t\t\t\t\t// Adapted from React Router's implementation:\n\t\t\t\t\t// https://github.com/ReactTraining/react-router/blob/520a0acd48ae1b066eb0b07d6d4d1790a1d02482/packages/react-router-dom/modules/Link.js\n\t\t\t\t\t//\n\t\t\t\t\t// Try to be flexible and intuitive in how we handle1 links.\n\t\t\t\t\t// Fun fact: links aren't as obvious to get right as you\n\t\t\t\t\t// would expect. There's a lot more valid ways to click a\n\t\t\t\t\t// link than this, and one might want to not simply click a\n\t\t\t\t\t// link, but right click or command-click it to copy the\n\t\t\t\t\t// link target, etc. Nope, this isn't just for blind people.\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip if `onclick` prevented default\n\t\t\t\t\t\tresult1 !== false && !e.defaultPrevented &&\n\t\t\t\t\t\t// Ignore everything but left clicks\n\t\t\t\t\t\t(e.button === 0 || e.which === 0 || e.which === 1) &&\n\t\t\t\t\t\t// Let the browser handle1 `target=_blank`, etc.\n\t\t\t\t\t\t(!e.currentTarget.target || e.currentTarget.target === \"_self\") &&\n\t\t\t\t\t\t// No modifier keys\n\t\t\t\t\t\t!e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey\n\t\t\t\t\t) {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t\troute.set(href, null, options)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn child0\n\t\t},\n\t}\n\troute.param = function(key4) {\n\t\treturn attrs3 && key4 != null ? attrs3[key4] : attrs3\n\t}\n\treturn route\n}\nm.route = _25(window, mountRedraw)\nm.render = render\nm.redraw = mountRedraw.redraw\nm.request = request.request\nm.jsonp = request.jsonp\nm.parseQueryString = parseQueryString\nm.buildQueryString = buildQueryString\nm.parsePathname = parsePathname\nm.buildPathname = buildPathname\nm.vnode = Vnode\nm.PromisePolyfill = PromisePolyfill\nif (typeof module !== \"undefined\") module[\"exports\"] = m\nelse window.m = m\n}());","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import m from 'mithril';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar currentState;\nvar call = Function.prototype.call.bind(Function.prototype.call);\n\nvar scheduleRender = function scheduleRender() {\n  return (// Call m within the function body so environments with a global instance of m (like flems.io) don't complain\n    m.redraw()\n  );\n};\n\nvar updateDeps = function updateDeps(deps) {\n  var state = currentState;\n  var depsIndex = state.depsIndex++;\n  var prevDeps = state.depsStates[depsIndex] || [];\n  var shouldRecompute = deps === undefined ? true // Always compute\n  : Array.isArray(deps) ? deps.length > 0 ? !deps.every(function (x, i) {\n    return x === prevDeps[i];\n  }) // Only compute when one of the deps has changed\n  : !state.setup // Empty array: only compute at mount\n  : false; // Invalid value, do nothing\n\n  if (deps !== undefined) {\n    state.depsStates[depsIndex] = deps;\n  }\n\n  return shouldRecompute;\n};\n\nvar effect = function effect() {\n  var isAsync = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  return function (fn, deps) {\n    var state = currentState;\n    var shouldRecompute = updateDeps(deps);\n\n    if (shouldRecompute) {\n      var depsIndex = state.depsIndex;\n\n      var runCallbackFn = function runCallbackFn() {\n        var teardown = fn(); // A callback may return a function. If any, add it to the teardowns:\n\n        if (typeof teardown === 'function') {\n          // Store this this function to be called at cleanup and unmount\n          state.teardowns.set(depsIndex, teardown); // At unmount, call re-render at least once\n\n          state.teardowns.set('_', scheduleRender);\n        }\n      }; // First clean up any previous cleanup function\n\n\n      var teardown = state.teardowns.get(depsIndex);\n\n      try {\n        if (typeof teardown === 'function') {\n          teardown();\n        }\n      } finally {\n        state.teardowns[\"delete\"](depsIndex);\n      }\n\n      state.updates.push(isAsync ? function () {\n        return new Promise(function (resolve) {\n          return requestAnimationFrame(resolve);\n        }).then(runCallbackFn);\n      } : runCallbackFn);\n    }\n  };\n};\n\nvar updateState = function updateState(initialState, newValueFn) {\n  var state = currentState;\n  var index = state.statesIndex++;\n\n  if (!state.setup) {\n    state.states[index] = initialState;\n  }\n\n  return [state.states[index], function (value) {\n    var previousValue = state.states[index];\n    var newValue = newValueFn ? newValueFn(value, index) : value;\n    state.states[index] = newValue;\n\n    if (JSON.stringify(newValue) !== JSON.stringify(previousValue)) {\n      scheduleRender(); // Calling redraw multiple times: Mithril will drop extraneous redraw calls, so performance should not be an issue\n    }\n  }, index];\n};\n\nvar useState = function useState(initialState) {\n  var state = currentState;\n\n  var newValueFn = function newValueFn(value, index) {\n    return typeof value === 'function' ? value(state.states[index], index) : value;\n  };\n\n  return updateState(initialState, newValueFn);\n};\n\nvar useEffect = effect(true);\nvar useLayoutEffect = effect();\n\nvar useReducer = function useReducer(reducer, initialState, initFn) {\n  var state = currentState; // From the React docs: You can also create the initial state lazily. To do this, you can pass an init function as the third argument. The initial state will be set to init(initialValue).\n\n  var initValue = !state.setup && initFn ? initFn(initialState) : initialState;\n\n  var getValueDispatch = function getValueDispatch() {\n    var _updateState = updateState(initValue),\n        _updateState2 = _slicedToArray(_updateState, 3),\n        value = _updateState2[0],\n        setValue = _updateState2[1],\n        index = _updateState2[2];\n\n    var dispatch = function dispatch(action) {\n      var previousValue = state.states[index];\n      return setValue( // Next state:\n      reducer(previousValue, action));\n    };\n\n    return [value, dispatch];\n  };\n\n  return getValueDispatch();\n};\n\nvar useRef = function useRef(initialValue) {\n  // A ref is a persisted object that will not be updated, so it has no setter\n  var _updateState3 = updateState({\n    current: initialValue\n  }),\n      _updateState4 = _slicedToArray(_updateState3, 1),\n      value = _updateState4[0];\n\n  return value;\n};\n\nvar useMemo = function useMemo(fn, deps) {\n  var state = currentState;\n  var shouldRecompute = updateDeps(deps);\n\n  var _ref = !state.setup ? updateState(fn()) : updateState(),\n      _ref2 = _slicedToArray(_ref, 2),\n      memoized = _ref2[0],\n      setMemoized = _ref2[1];\n\n  if (state.setup && shouldRecompute) {\n    setMemoized(fn());\n  }\n\n  return memoized;\n};\n\nvar useCallback = function useCallback(callback, deps) {\n  return useMemo(function () {\n    return callback;\n  }, deps);\n};\n\nvar withHooks = function withHooks(renderFunction, initialAttrs) {\n  var init = function init(vnode) {\n    _extends(vnode.state, {\n      setup: false,\n      states: [],\n      statesIndex: 0,\n      depsStates: [],\n      depsIndex: 0,\n      updates: [],\n      cleanups: new Map(),\n      teardowns: new Map() // Keep track of teardowns even when the update was run only once\n\n    });\n  };\n\n  var update = function update(vnode) {\n    var prevState = currentState;\n    currentState = vnode.state;\n\n    try {\n      vnode.state.updates.forEach(call);\n    } finally {\n      _extends(vnode.state, {\n        setup: true,\n        updates: [],\n        depsIndex: 0,\n        statesIndex: 0\n      });\n\n      currentState = prevState;\n    }\n  };\n\n  var render = function render(vnode) {\n    var prevState = currentState;\n    currentState = vnode.state;\n\n    try {\n      return renderFunction(_objectSpread2(_objectSpread2(_objectSpread2({}, initialAttrs), vnode.attrs), {}, {\n        vnode: vnode,\n        children: vnode.children\n      }));\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n    } finally {\n      currentState = prevState;\n    }\n  };\n\n  var teardown = function teardown(vnode) {\n    var prevState = currentState;\n    currentState = vnode.state;\n\n    try {\n      _toConsumableArray(vnode.state.teardowns.values()).forEach(call);\n    } finally {\n      currentState = prevState;\n    }\n  };\n\n  return {\n    oninit: init,\n    oncreate: update,\n    onupdate: update,\n    view: render,\n    onremove: teardown\n  };\n};\n\nvar htmlAttributes = {\n  accept: \"accept\",\n  acceptcharset: \"acceptcharset\",\n  accesskey: \"accesskey\",\n  action: \"action\",\n  allowfullscreen: \"allowfullscreen\",\n  allowtransparency: \"allowtransparency\",\n  alt: \"alt\",\n  async: \"async\",\n  autocomplete: \"autocomplete\",\n  autofocus: \"autofocus\",\n  autoplay: \"autoplay\",\n  capture: \"capture\",\n  cellpadding: \"cellpadding\",\n  cellspacing: \"cellspacing\",\n  challenge: \"challenge\",\n  charset: \"charset\",\n  checked: \"checked\",\n  \"class\": \"className\",\n  classid: \"classid\",\n  classname: \"className\",\n  // Special case:\n  className: \"className\",\n  colspan: \"colspan\",\n  cols: \"cols\",\n  content: \"content\",\n  contenteditable: \"contenteditable\",\n  contextmenu: \"contextmenu\",\n  controls: \"controls\",\n  coords: \"coords\",\n  crossorigin: \"crossorigin\",\n  data: \"data\",\n  datetime: \"datetime\",\n  \"default\": \"default\",\n  defer: \"defer\",\n  dir: \"dir\",\n  disabled: \"disabled\",\n  download: \"download\",\n  draggable: \"draggable\",\n  enctype: \"enctype\",\n  form: \"form\",\n  formaction: \"formaction\",\n  formenctype: \"formenctype\",\n  formmethod: \"formmethod\",\n  formnovalidate: \"formnovalidate\",\n  formtarget: \"formtarget\",\n  frameborder: \"frameborder\",\n  headers: \"headers\",\n  height: \"height\",\n  hidden: \"hidden\",\n  high: \"high\",\n  href: \"href\",\n  hreflang: \"hreflang\",\n  htmlfor: \"htmlfor\",\n  httpequiv: \"httpequiv\",\n  icon: \"icon\",\n  id: \"id\",\n  inputmode: \"inputmode\",\n  integrity: \"integrity\",\n  is: \"is\",\n  keyparams: \"keyparams\",\n  keytype: \"keytype\",\n  kind: \"kind\",\n  label: \"label\",\n  lang: \"lang\",\n  list: \"list\",\n  loop: \"loop\",\n  low: \"low\",\n  manifest: \"manifest\",\n  marginheight: \"marginheight\",\n  marginwidth: \"marginwidth\",\n  max: \"max\",\n  maxlength: \"maxlength\",\n  media: \"media\",\n  mediagroup: \"mediagroup\",\n  method: \"method\",\n  min: \"min\",\n  minlength: \"minlength\",\n  multiple: \"multiple\",\n  muted: \"muted\",\n  name: \"name\",\n  novalidate: \"novalidate\",\n  nonce: \"nonce\",\n  onblur: \"onblur\",\n  onchange: \"onchange\",\n  onclick: \"onclick\",\n  onfocus: \"onfocus\",\n  oninput: \"oninput\",\n  onkeydown: \"onkeydown\",\n  onkeyup: \"onkeyup\",\n  onmousedown: \"onmousedown\",\n  onmouseout: \"onmouseout\",\n  onmouseover: \"onmouseover\",\n  onmouseup: \"onmouseup\",\n  onscroll: \"onscroll\",\n  onsubmit: \"onsubmit\",\n  ontouchend: \"ontouchend\",\n  ontouchmove: \"ontouchmove\",\n  ontouchstart: \"ontouchstart\",\n  open: \"open\",\n  optimum: \"optimum\",\n  pattern: \"pattern\",\n  placeholder: \"placeholder\",\n  poster: \"poster\",\n  preload: \"preload\",\n  radiogroup: \"radiogroup\",\n  readonly: \"readonly\",\n  rel: \"rel\",\n  required: \"required\",\n  reversed: \"reversed\",\n  role: \"role\",\n  rowspan: \"rowspan\",\n  rows: \"rows\",\n  sandbox: \"sandbox\",\n  scope: \"scope\",\n  scoped: \"scoped\",\n  scrolling: \"scrolling\",\n  seamless: \"seamless\",\n  selected: \"selected\",\n  shape: \"shape\",\n  size: \"size\",\n  sizes: \"sizes\",\n  span: \"span\",\n  spellcheck: \"spellcheck\",\n  src: \"src\",\n  srcdoc: \"srcdoc\",\n  srclang: \"srclang\",\n  srcset: \"srcset\",\n  start: \"start\",\n  step: \"step\",\n  style: \"style\",\n  summary: \"summary\",\n  tabindex: \"tabindex\",\n  target: \"target\",\n  title: \"title\",\n  type: \"type\",\n  usemap: \"usemap\",\n  value: \"value\",\n  width: \"width\",\n  wmode: \"wmode\",\n  wrap: \"wrap\"\n};\n\nvar a = htmlAttributes;\nvar h = m || {};\nvar trust = h.trust;\n\nh.trust = function (html, wrapper) {\n  return wrapper ? m(wrapper, trust(html)) : trust(html);\n};\n\nh.displayName = \"mithril\";\nh.fragment = m.fragment;\nvar jsx = m;\nvar getRef = function getRef(fn) {\n  return {\n    oncreate: function oncreate(vnode) {\n      return fn(vnode.dom);\n    }\n  };\n};\nvar cast = withHooks;\n\nexport { a, cast, getRef, h, jsx, useCallback, useEffect, useLayoutEffect, useMemo, useReducer, useRef, useState };\n","import { cast, h } from \"cyano\";\n\nconst _AppLayout = ({ Layout, Navigation, route, router, content, examples, tests }) => (\n  h(Layout,\n    {\n      route,\n      router,\n      navigation: h(Navigation, {\n        router,\n        currentPath: route.path,\n        parts: [\n          [\"Examples\", examples],\n          [\"Cypress tests\", tests]\n        ]\n      })\n    },\n    h(content)\n  )\n);\n\nconst AppLayout = cast(_AppLayout);\n\nexport default AppLayout;\n","import { cast, h } from \"cyano\";\n\nconst _Layout = ({ navigation, children }) => (\n  h(\"div\",\n    {\n      className: \"layout\"\n    },\n    [\n      navigation,\n      h(\"div\",\n        {\n          // key: \"component\",\n          className: \"component\"\n        },\n        children\n      )\n    ]\n  )\n);\n\nconst Layout = cast(_Layout);\n\nexport default Layout;\n","import { cast, h, a } from \"cyano\";\n\nconst _Link = ({ router, name, label, path, currentPath }) => (\n  h(\"li\",\n    {},  \n    h(\"a\", {\n      href: path,\n      className: path === currentPath ? \"is-active\" : \"\",\n      [a.onclick]: e => (\n        e.preventDefault(),\n        router.navigate(name)\n      )\n    },\n    label)\n  )\n);\nconst Link = cast(_Link);\n\nconst _MenuList = ({ router, title, links, currentPath }) => {\n  return [\n    h(\"p\",\n      {\n        key: \"label\",\n        className: \"menu-label\"\n      },\n      title\n    ),\n    h(\"ul\",\n      {\n        key: \"list\",\n        className: \"menu-list\"\n      },\n      links.map(link =>\n        h(Link, { ...link, router, currentPath })\n      )\n    )\n  ];\n};\nconst MenuList = cast(_MenuList);\n\nconst _Navigation = ({ router, currentPath, parts }) => (\n  h(\"aside\",\n    {\n      className: \"menu\"\n    },\n    parts.map(([title, links]) =>\n      h(MenuList, { router, title, links, currentPath })\n    )\n  )\n);\n\nexport default cast(_Navigation);\n","import { cast, useState, h, a } from \"cyano\";\n\nconst _Toggle = () => {\n  const [clicked, setClicked] = useState(false);\n  return h(\"div\", \n    {\n      className: \"toggle\"\n    },\n    [\n      h(\"button\",\n        {\n          className: `button ${clicked ? \"is-info\" : \"\"}`,\n          [a.onclick]: () => setClicked(!clicked)\n        },\n        \"Toggle\"\n      ),\n      h(\"div\",\n        {\n          className: \"info\"\n        },\n        clicked ? \"On\" : \"Off\"\n      )\n    ]\n  );\n};\n\nexport default cast(_Toggle);\n","import { cast, useState, useEffect, useRef, useReducer, h, a, getRef } from \"cyano\";\n\nconst useCounter = () => {\n  // A custom hook that uses another custom hook.\n  const createNewCounter = () => ({\n    id: new Date().getTime(),\n    initialCount: Math.round(Math.random() * 10)\n  });\n  const firstCounter = createNewCounter();\n  const [counters, addCounter, removeCounter] = useArray([firstCounter]);\n  return [\n    counters,\n    () => addCounter(createNewCounter()),\n    remove => removeCounter(remove)\n  ];\n};\n\nconst useArray = (initialValue = []) => {\n  const [arr, setArr] = useState(initialValue)\n  return [\n    arr,\n    add => setArr(arr.concat(add)),\n    remove => setArr(arr.filter(item => item !== remove))\n  ];\n};\n\nconst counterReducer = (state, action) => {\n  switch (action.type) {\n    case \"increment\":\n      return { count: state.count + 1 };\n    case \"decrement\":\n      return { count: state.count - 1 };\n    default:\n      throw new Error(\"Unhandled action:\", action);\n  }\n};\n\nconst _Counter = ({ id, initialCount, removeCounter }) => {\n  const [countState, dispatch] = useReducer(counterReducer, { count: initialCount });\n  const count = countState.count;\n\n  const [inited, setInited] = useState(false);\n  const domRef = useRef();\n\n  const remove = () => {\n    const removeOnTransitionEnd = () => (\n      removeCounter(id),\n      domRef.current.removeEventListener(\"transitionend\", removeOnTransitionEnd)\n    );\n    domRef.current.addEventListener(\"transitionend\", removeOnTransitionEnd);\n    domRef.current.classList.remove(\"active\");\n  };\n\n  useEffect(() => {\n    setInited(true);\n  }, [/* empty array: only run at mount */]);\n\n  return (\n    h(\"div\",\n      {\n        className: `counter ${inited ? \"active\" : \"\"}`,\n        ...getRef(dom => domRef.current = domRef.current || dom)\n      },\n      h(\"div\",\n        {\n          className: \"counter-inner\"\n        },\n        [\n          h(\"div\",\n            {\n              className: \"count\",\n            },\n            count\n          ),\n          h(\"button\",\n            {\n              className: \"button\",\n              disabled: count === 0,\n              [a.onclick]: () => dispatch({ type: \"decrement\" })\n            },\n            h(\"span\",\n              {\n                className: \"icon is-small\"\n              },\n              h(\"i\",\n                {\n                  className: \"fas fa-minus\"\n                }\n              )\n            )\n          ),\n          h(\"button\",\n            {\n              className: \"button\",\n              [a.onclick]: () => dispatch({ type: \"increment\" })\n            },\n            h(\"span\",\n              {\n                className: \"icon is-small\"\n              },\n              h(\"i\",\n                {\n                  className: \"fas fa-plus\"\n                }\n              )\n            )\n          ),\n          h(\"div\", {\n            className: \"spacer\",\n          }),\n          h(\"button\", {\n            className: \"delete is-large\",\n            [a.onclick]: () => remove()\n          }, \"Remove me\"),\n        ]\n      )\n    )\n  );\n};\n\nconst _CounterController = ({ Counter }) => {\n  const [counters, addCounter, removeCounter] = useCounter();\n  return [\n    h(\"div\",\n      {\n        className: \"controls\",\n        key: \"controls\"\n      },\n      [\n        h(\"button\",\n          {\n            className: \"button is-info\",\n            [a.onclick]: () => addCounter()\n          },\n          \"Add counter\"\n        ),\n        h(\"div\",\n          {\n            className: \"spacer\",\n          }\n        ),\n        h(\"span\",\n          {\n            className: \"info\",\n          },\n          h(\"span\",\n            {\n              className: \"tag is-light is-medium\"\n            },\n            `Counters: ${counters.length}`\n          )\n        )\n      ]\n    ),\n    h.fragment(\n      { key: \"counters\" },\n      counters.map(c => (\n        h(Counter, {\n          key: c.id,\n          id: c.id,\n          initialCount: c.initialCount,\n          removeCounter: () => removeCounter(c),\n        })\n      ))\n    )\n  ];\n};\n\nconst Counter = cast(_Counter);\nconst CounterController = cast(_CounterController, { Counter });\n\nexport default CounterController;\n","export default [\n  {\n    id: \"0\",\n    name: \"Ina\",\n    avatar: \"http://arthurclemens.github.io/assets/polythene/examples/avatar-1.png\",\n  },\n  {\n    id: \"1\",\n    name: \"Jane\",\n    avatar: \"http://arthurclemens.github.io/assets/polythene/examples/avatar-2.png\",\n  },\n  {\n    id: \"2\",\n    name: \"Maddy\",\n    avatar: \"http://arthurclemens.github.io/assets/polythene/examples/avatar-3.png\",\n  }\n];\n","const friendsData = {\n  \"0\": {\n    status: {\n      isOnline: true\n    }\n  },\n  \"1\": {\n    status: {\n      isOnline: true\n    }\n  },\n  \"2\": {\n    status: {\n      isOnline: false\n    }\n  }\n};\n\nexport const api = {\n  subscribeToFriendStatus: (friendId, handleStatusChange) => {\n    const friend = friendsData[friendId];\n    console.log(`subscribing status for ${friendId}`);\n    friend.status.isOnline = friendId === \"2\"\n      ? false\n      : true;\n    const delay = 200 + 100 * Math.random();\n    setTimeout(() => (\n      handleStatusChange(friend.status)\n    ), delay)\n  },\n  unsubscribeFromFriendStatus: (friendId, handleStatusChange) => {\n    const friend = friendsData[friendId];\n    friend.status.isOnline = null;\n    console.log(`unsubscribing status for ${friendId}`);\n    handleStatusChange(friend.status);\n  }\n};\n","import { cast, h } from \"cyano\";\nimport { useFriendStatus } from \"./custom-hooks\";\n\nconst _FriendStatus = ({ friendId }) => {\n  const isOnline = useFriendStatus(friendId);\n  return isOnline === null\n    ? h(\"div\", { className: \"status-dot unknown\" })\n    : isOnline\n      ? h(\"div\", { className: \"status-dot online\" })\n      : h(\"div\", { className: \"status-dot offline\" });\n};\n\nexport default cast(_FriendStatus);\n","import { api } from \"./chat-api\";\nimport { useState, useEffect } from \"cyano\";\n\nexport const useFriendStatus = friendId => {\n  const [isOnline, setIsOnline] = useState(null);\n  \n  function handleStatusChange(status) {\n    setIsOnline(status.isOnline);\n  }\n\n  useEffect(\n    () => {\n      api.subscribeToFriendStatus(friendId, handleStatusChange);\n      return () => {\n        api.unsubscribeFromFriendStatus(friendId, handleStatusChange);\n      }\n    },\n    []\n  );\n  \n  return isOnline;\n};\n","import { cast, useState, h, a } from \"cyano\";\nimport FriendStatus from \"./FriendStatus\";\nimport friendsData from \"./friends-data\";\n\nconst _ChatRecipientPicker = () => {\n  const [recipientId, setRecipientId] = useState(\"1\");\n\n  return h(\"div\",\n    { className: \"controls\" },\n    [\n      h(FriendStatus,\n        { key: recipientId, friendId: recipientId }\n      ),\n      h(\"div\",\n        {\n          className: \"select\",\n          key: \"select\",\n        },\n        h(\"select\",\n          {\n            [a.onchange]: e => setRecipientId(e.target.value),\n            value: recipientId\n          },\n          friendsData.map(friend => (\n            h(\"option\",\n              {\n                value: friend.id,\n                key: friend.id,\n              },\n              friend.name\n            )\n          ))\n        )\n      )\n    ]\n  )\n};\n\nexport default cast(_ChatRecipientPicker);\n","import { cast, h } from \"cyano\";\nimport FriendStatus from \"./FriendStatus\";\n\nconst _Friend = ({ friend, hasChatApi }) => {\n  return h(\"div\",\n    { className: \"friend\" },\n    [\n      h(\"div\",\n        {\n          className: \"avatar\",\n          style: {\n            backgroundImage: `url(${friend.avatar})`\n          }\n        }\n      ),\n      h(\"div\", { className: \"name\" }, friend.name),\n      h(\"div\", { className: \"spacer\" }),\n      hasChatApi\n        ? h(\"div\", null,\n            h(FriendStatus,\n              {\n                friendId: friend.id\n              }\n            )\n          )\n          : null\n    ]\n  );\n};\n\nexport default cast(_Friend);\n","import { cast, h, a, useState } from \"cyano\";\nimport friendsData from \"./friends-data\";\nimport ChatRecipientPicker from \"./ChatRecipientPicker\";\nimport Friend from \"./Friend\"; \n\nconst _Chat = () => { \n  const [hasChatApi, setHasChatApi] = useState(false);\n  return h(\"div\",\n    { className: \"chat\" },\n    [\n      h(\"div\",\n        { className: \"controls\" },\n        h(\"button\",\n          {\n            className: hasChatApi ? \"button\" : \"button is-link\",\n            [a.onclick]: () => setHasChatApi(!hasChatApi)\n          },\n          hasChatApi ? \"Deactivate chat\" : \"Activate chat\"\n        )\n      ),\n      hasChatApi ? h(ChatRecipientPicker) : null,\n      h(\"div\",\n        { className: \"friends\" },\n        friendsData.map(friend => (\n          h(Friend, {\n            friend,\n            hasChatApi,\n          })\n        ))\n      )\n    ]\n  );\n};\n\nexport default cast(_Chat);\n","import { cast, useState, h, a } from \"cyano\";\n\nconst useCount = (initialValue = 0) => {\n  const [count, setCount] = useState(initialValue);\n  return [\n    count,                      // value\n    () => setCount(count + 1),  // increment\n    () => setCount(count - 1)   // decrement\n  ];\n};\n\nconst useCounter = () => {\n  // A custom hook that uses another custom hook.\n  const createNewCounter = () => ({\n    id: new Date().getTime(),\n    initialCount: Math.round(Math.random() * 1000)\n  });\n  const firstCounter = createNewCounter();\n  const [counters, addCounter, removeCounter] = useArray([firstCounter]);\n  return [\n    counters,\n    () => addCounter(createNewCounter()),\n    remove => removeCounter(remove)\n  ];\n};\n\nconst useArray = (initialValue = []) => {\n  const [arr, setArr] = useState(initialValue)\n  return [\n    arr,\n    add => setArr(arr.concat(add)),\n    remove => setArr(arr.filter(item => item !== remove))\n  ];\n};\n\nconst _CustomHooks = () => {\n  const [count, increment, decrement] = useCount(0);\n  const [counters, addCounter, removeCounter] = useCounter();\n  const [lastItem, ] = counters.reverse();\n\n  return [\n    h(\"div\",\n      {\n        key: \"TestCounter\",\n        \"data-test-id\": \"TestCounter\"\n      },\n      [\n        h(\"h2\",\n          \"TestCounter\"\n        ),\n        h(\"p\",\n          [\n            h(\"span\", \"count: \"),\n            h(\"span\",\n              { \"data-test-id\": \"count\" },\n              count\n            )\n          ]\n        ),\n        h(\"button\", \n          {\n            \"data-test-id\": \"decrement\",\n            disabled: count === 0,\n            [a.onclick]: () => decrement()\n          },\n          \"Less\"\n        ),\n        h(\"button\", \n          {\n            \"data-test-id\": \"increment\",\n            [a.onclick]: () => increment()\n          },\n          \"More\"\n        )\n      ]\n    ),\n    h(\"div\", \n      {\n        key: \"TestCounters\",\n        \"data-test-id\": \"TestCounters\"\n      },\n      [\n        h(\"h2\",\n          \"TestCounters\"\n        ),\n        h(\"p\",\n          [\n            h(\"span\", \"counters: \"),\n            h(\"span\", {\n              \"data-test-id\": \"counters\"\n            }, counters.length)\n          ]\n        ),\n        h(\"button\", \n          {\n            \"data-test-id\": \"decrement\",\n            disabled: counters.length === 0,\n            [a.onclick]: () => removeCounter(lastItem)\n          },\n          \"Remove\"\n        ),\n        h(\"button\", \n          {\n            \"data-test-id\": \"increment\",\n            [a.onclick]: () => addCounter()\n          },\n          \"Add\"\n        )\n      ]\n    )\n  ];\n};\n\nconst CustomHooks = cast(_CustomHooks);\n\nexport default CustomHooks;\n","import { cast, h } from \"cyano\";\n\nconst _Trust = () => {\n  return [\n    h(\"div\",\n      {\n        key: \"svg\",\n        \"data-test-id\": \"svg\"\n      },\n      h.trust(\"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\\\"/></svg>\")\n    ),\n    h(\"div\",\n      {\n        key: \"html\",\n        \"data-test-id\": \"html\"\n      },\n      h.trust(\"<ul><li>Skydiving</li><li>Alaska</li><li>Kite surfing</li></ul>\")\n    ),\n    h(\"div\",\n      {\n        key: \"wrapper\",\n        \"data-test-id\": \"wrapper\"\n      },\n      h.trust(\"Hello\", \"span\")\n    ),\n  ];\n};\n\nexport default cast(_Trust);\n","import { cast, h } from \"cyano\";\n\nconst _Children = ({ title, children }) => {\n  return h(\"div\",\n    {\n      \"data-test-id\": \"Children\"\n    },\n    [\n      h(\"h2\", title),\n      children\n    ]\n  );\n};\n\nconst _Wrapper = ({ title, Children }) => \n  h(\"div\",\n    null,\n    h(Children,\n      { title },\n      h(\"div\", null, \"This is a child\")\n    )\n  );\n\nconst Children = cast(_Children);\nconst Wrapper = cast(_Wrapper, { title: \"Children\", Children });\n\nexport default Wrapper;\n","import { cast, h } from \"cyano\";\n\nconst _InitialProps = ({ title, defaultTitle }) => {\n  return h(\"div\",\n    {\n      \"data-test-id\": \"InitialProps\"\n    },\n    [\n      h(\"h2\", null, title || defaultTitle),\n      // h(\"h2\", defaultTitle),\n    ]\n  );\n};\n\nconst _Wrapper = ({ title, InitialProps }) => \n  h(\"div\",\n    null,\n    h(InitialProps,\n      { title }\n    )\n  );\n\nconst InitialProps = cast(_InitialProps, { defaultTitle: \"default title\" });\nconst Wrapper = cast(_Wrapper, { title: \"Hello\", InitialProps });\n\nexport default Wrapper;\n","import { cast, useState, a, h, jsx } from \"cyano\";\n/* jsx needs to be in scope for JSX parsing to work */\n\nconst _Toggle = ({ title }) => {\n  const [clicked, setClicked] = useState(false);\n  return (\n    <div className=\"toggle\">\n      <h2>{title}</h2>\n      <div\n        className={`button ${clicked ? \"is-info\" : \"\"}`}\n        {...{\n          [a.onclick]: () => setClicked(!clicked)\n        }}\n      >\n        Toggle\n      </div>\n      <div\n        className=\"info\"\n      >\n        {clicked ? h(\"div\", \"On\") : h(\"div\", \"Off\")}\n      </div>\n      <div>\n        {h.trust(\"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\\\"/></svg>\")}\n      </div>\n    </div>\n  );\n};\n\nconst Toggle = cast(_Toggle);\n\nconst _Wrapper = () => <Toggle title=\"Switch!\" />;\nexport default cast(_Wrapper);\n","import { cast, h, getRef, useRef, useState } from \"cyano\";\n\nconst _GetRef = () => {\n  const domRef = useRef();\n  const [render, forceRerender] = useState(0);\n\n  return h(\"div\",\n    {\n      \"data-test-id\": \"DomElementRef\"\n    },\n    [\n      h(\"span\", \"Element to get a reference of: \"),\n      h(\"span\", \n        {\n          ...getRef(dom => {\n            const shouldRerender = !domRef.current;\n            domRef.current = domRef.current || dom;\n            shouldRerender && forceRerender(render + 1);\n          })\n        },\n        \"QWERTY\"\n      ),\n      h(\"p\", [\n        h(\"span\", \"DOM element textContent: \"),\n        h(\"span\",\n          {\n            \"data-test-id\": \"textContent\"\n          },\n          domRef.current && domRef.current.textContent\n        )\n      ])\n    ]\n  );\n};\n\nexport default cast(_GetRef);\n","import { cast, h, a, getRef, useState } from \"cyano\";\n\nconst _Input = props => {\n  const [domElement, setDomElement] = useState();\n  const [value, setValue] = useState(\"some input\");\n\n  return h(\"div\",\n    {\n      \"data-test-id\": \"component-input\"\n    },\n    [\n      h(\"input\",\n        {\n          key: \"input\",\n          \"data-test-id\": \"input\",\n          value,\n          [a.onchange]: e => setValue(e.target.value),\n          [a.oninput]: e => setValue(e.target.value),\n          ...getRef(dom => dom && !domElement && (\n            setDomElement(dom),\n            // pass back to parent\n            props.ref && props.ref(dom)\n          )),\n        }),\n      h(\"p\",\n        {\n          key: \"label\",\n          \"data-test-id\": \"feedback\",\n        },\n        value\n      ),\n      h(\"p\",\n        {\n          key: \"feedback\",\n        },\n        [\n          h(\"span\",\n            {\n              key: \"label\",\n            },\n            \"input ref: \"\n          ),\n          h(\"span\",\n            {\n              key: \"domElement\",\n              \"data-test-id\": \"domElement\",\n            },\n            domElement && domElement.getAttribute(\"data-test-id\")\n          )\n        ]\n      ),\n    ]\n  );\n};\n\nconst _ForwardRef = ({ Input }) => {\n  const [domElement, setDomElement] = useState();\n\n  return h(\"div\",\n    {\n      \"data-test-id\": \"component-parent\"\n    },\n    [\n      h(Input, {\n        key: \"parent\",\n        ref: dom => (\n          setDomElement(dom)\n        ),\n      }),\n      h(\"p\",\n        {\n          key: \"feedback\",\n        },\n        [\n          h(\"span\",\n            {\n              key: \"label\",\n            },\n            \"Parent ref: \"\n          ),\n          h(\"span\",\n            {\n              key: \"domElement\",\n              \"data-test-id\": \"domElement\",\n            },\n            domElement && domElement.getAttribute(\"data-test-id\")\n          )\n        ]\n      ),\n    ]\n  );\n};\n\nconst Input = cast(_Input);\n\nexport default cast(_ForwardRef, { Input });\n","import { cast, h } from \"cyano\";\n\nconst _Fragment = () => \n  h(\"div.wrapper\",\n    { key: \"controls\", \"data-test-id\": \"wrapper\" },\n    [\n      h(\"div.first\",\n        { key: 1, \"data-test-id\": \"child-1\" },\n        1\n      ),\n      h.fragment(\n        { key: \"numbers\" },\n        [2,3,4].map(n =>\n          h(\"div\",\n            { key: n, \"data-test-id\": `child-${n}` },\n            n\n          )\n        )\n      )\n    ]\n  );\n\nconst Fragment = cast(_Fragment);\n\nexport default Fragment;\n","\n// examples\nimport Toggle from \"../examples/toggle\";\nimport CustomHooksUseReducer from \"../examples/custom-hooks-reducer\";\nimport Chat from \"../examples/chat\";\n\n// Cypress tests\nimport CustomHooks from \"../cypress-tests/custom-hooks\";\nimport Trust from \"../cypress-tests/trust\";\nimport Children from \"../cypress-tests/children\";\nimport InitialProps from \"../cypress-tests/initial-props\";\nimport ToggleJSX from \"../cypress-tests/toggle-jsx\";\nimport GetRef from \"../cypress-tests/getRef\";\nimport ForwardRef from \"../cypress-tests/forwardRef\";\nimport Fragment from \"../cypress-tests/Fragment\";\n\nconst toLinkData = ([label, path, component]) => ({\n  name: label.toLowerCase().replace(\" \", \"_\"),\n  label,\n  path,\n  component\n});\n\nexport const createRoutes = cast => {\n  \n  const examples = [\n    [\"Simple toggle\", \"/toggle\", Toggle],\n    [\"Custom hooks with useReducer\", \"/custom-hooks-usereducer\", CustomHooksUseReducer],\n    [\"Custom hooks chat example\", \"/custom-hooks-chat\", Chat],\n  ].map(toLinkData);\n\n  const tests = [\n    [\"Test custom hooks\", \"/TestCustomHooks\", CustomHooks],\n    [\"Test initial props\", \"/TestInitialProps\", InitialProps],\n    [\"Test getRef\", \"/GetRef\", GetRef],\n    [\"Test trust\", \"/TestTrust\", Trust],\n    [\"Test children\", \"/TestChildren\", Children],\n    [\"Test forward ref\", \"/ForwardRef\", ForwardRef],\n    [\"Test toggle JSX\", \"/ToggleJSX\", ToggleJSX],\n    [\"Test fragment\", \"/Fragment\", Fragment],\n  ].map(toLinkData);\n\n  return {\n    examples,\n    tests,\n  };\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","var makeOptions = function makeOptions(opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  return {\n    arrayFormat: opts.arrayFormat || 'none',\n    booleanFormat: opts.booleanFormat || 'none',\n    nullFormat: opts.nullFormat || 'default'\n  };\n};\n\nvar encodeValue = function encodeValue(value) {\n  return encodeURIComponent(value);\n};\n\nvar decodeValue = function decodeValue(value) {\n  return decodeURIComponent(value);\n};\n\nvar encodeBoolean = function encodeBoolean(name, value, opts) {\n  if (opts.booleanFormat === 'empty-true' && value) {\n    return name;\n  }\n\n  var encodedValue;\n\n  if (opts.booleanFormat === 'unicode') {\n    encodedValue = value ? '✓' : '✗';\n  } else {\n    encodedValue = value.toString();\n  }\n\n  return name + \"=\" + encodedValue;\n};\n\nvar encodeNull = function encodeNull(name, opts) {\n  if (opts.nullFormat === 'hidden') {\n    return '';\n  }\n\n  if (opts.nullFormat === 'string') {\n    return name + \"=null\";\n  }\n\n  return name;\n};\n\nvar getNameEncoder = function getNameEncoder(opts) {\n  if (opts.arrayFormat === 'index') {\n    return function (name, index) {\n      return name + \"[\" + index + \"]\";\n    };\n  }\n\n  if (opts.arrayFormat === 'brackets') {\n    return function (name) {\n      return name + \"[]\";\n    };\n  }\n\n  return function (name) {\n    return name;\n  };\n};\n\nvar encodeArray = function encodeArray(name, arr, opts) {\n  var encodeName = getNameEncoder(opts);\n  return arr.map(function (val, index) {\n    return encodeName(name, index) + \"=\" + encodeValue(val);\n  }).join('&');\n};\nvar encode = function encode(name, value, opts) {\n  if (value === null) {\n    return encodeNull(name, opts);\n  }\n\n  if (typeof value === 'boolean') {\n    return encodeBoolean(name, value, opts);\n  }\n\n  if (Array.isArray(value)) {\n    return encodeArray(name, value, opts);\n  }\n\n  return name + \"=\" + encodeValue(value);\n};\nvar decode = function decode(value, opts) {\n  if (value === undefined) {\n    return opts.booleanFormat === 'empty-true' ? true : null;\n  }\n\n  if (opts.booleanFormat === 'string') {\n    if (value === 'true') {\n      return true;\n    }\n\n    if (value === 'false') {\n      return false;\n    }\n  }\n\n  if (opts.booleanFormat === 'unicode') {\n    if (decodeValue(value) === '✓') {\n      return true;\n    }\n\n    if (decodeValue(value) === '✗') {\n      return false;\n    }\n  }\n\n  if (opts.nullFormat === 'string') {\n    if (value === 'null') {\n      return null;\n    }\n  }\n\n  return decodeValue(value);\n};\n\nvar getSearch = function getSearch(path) {\n  var pos = path.indexOf('?');\n\n  if (pos === -1) {\n    return path;\n  }\n\n  return path.slice(pos + 1);\n};\nvar isSerialisable = function isSerialisable(val) {\n  return val !== undefined;\n};\nvar parseName = function parseName(name) {\n  var bracketPosition = name.indexOf('[');\n  var hasBrackets = bracketPosition !== -1;\n  return {\n    hasBrackets: hasBrackets,\n    name: hasBrackets ? name.slice(0, bracketPosition) : name\n  };\n};\n\n/**\r\n * Parse a querystring and return an object of parameters\r\n */\n\nvar parse = function parse(path, opts) {\n  var options = makeOptions(opts);\n  return getSearch(path).split('&').reduce(function (params, param) {\n    var _a = param.split('='),\n        rawName = _a[0],\n        value = _a[1];\n\n    var _b = parseName(rawName),\n        hasBrackets = _b.hasBrackets,\n        name = _b.name;\n\n    var currentValue = params[name];\n    var decodedValue = decode(value, options);\n\n    if (currentValue === undefined) {\n      params[name] = hasBrackets ? [decodedValue] : decodedValue;\n    } else {\n      params[name] = (Array.isArray(currentValue) ? currentValue : [currentValue]).concat(decodedValue);\n    }\n\n    return params;\n  }, {});\n};\n/**\r\n * Build a querystring from an object of parameters\r\n */\n\nvar build = function build(params, opts) {\n  var options = makeOptions(opts);\n  return Object.keys(params).filter(function (paramName) {\n    return isSerialisable(params[paramName]);\n  }).map(function (paramName) {\n    return encode(paramName, params[paramName], options);\n  }).filter(Boolean).join('&');\n};\n/**\r\n * Remove a list of parameters from a querystring\r\n */\n\nvar omit = function omit(path, paramsToOmit, opts) {\n  var options = makeOptions(opts);\n  var searchPart = getSearch(path);\n\n  if (searchPart === '') {\n    return {\n      querystring: '',\n      removedParams: {}\n    };\n  }\n\n  var _a = path.split('&').reduce(function (_a, chunk) {\n    var left = _a[0],\n        right = _a[1];\n    var rawName = chunk.split('=')[0];\n    var name = parseName(rawName).name;\n    return paramsToOmit.indexOf(name) === -1 ? [left.concat(chunk), right] : [left, right.concat(chunk)];\n  }, [[], []]),\n      kept = _a[0],\n      removed = _a[1];\n\n  return {\n    querystring: kept.join('&'),\n    removedParams: parse(removed.join('&'), options)\n  };\n};\n/**\r\n * Remove a list of parameters from a querystring\r\n */\n\nvar keep = function keep(path, paramsToKeep, opts) {\n  var options = makeOptions(opts);\n  var searchPart = getSearch(path);\n\n  if (searchPart === '') {\n    return {\n      keptParams: {},\n      querystring: ''\n    };\n  }\n\n  var kept = path.split('&').reduce(function (acc, chunk) {\n    var rawName = chunk.split('=')[0];\n    var name = parseName(rawName).name;\n\n    if (paramsToKeep.includes(name)) {\n      acc.push(chunk);\n    }\n\n    return acc;\n  }, []);\n  return {\n    keptParams: parse(kept.join('&'), options),\n    querystring: kept.join('&')\n  };\n};\n\nexport { build, keep, omit, parse };\n//# sourceMappingURL=search-params.esm.js.map\n","import { __assign } from 'tslib';\nimport { parse, build } from 'search-params';\n\n/**\r\n * We encode using encodeURIComponent but we want to\r\n * preserver certain characters which are commonly used\r\n * (sub delimiters and ':')\r\n *\r\n * https://www.ietf.org/rfc/rfc3986.txt\r\n *\r\n * reserved    = gen-delims / sub-delims\r\n *\r\n * gen-delims  = \":\" / \"/\" / \"?\" / \"#\" / \"[\" / \"]\" / \"@\"\r\n *\r\n * sub-delims  = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\"\r\n              / \"*\" / \"+\" / \",\" / \";\" / \"=\"\r\n */\nvar excludeSubDelimiters = /[^!$'()*+,;|:]/g;\nvar encodeURIComponentExcludingSubDelims = function encodeURIComponentExcludingSubDelims(segment) {\n  return segment.replace(excludeSubDelimiters, function (match) {\n    return encodeURIComponent(match);\n  });\n};\nvar encodingMethods = {\n  \"default\": encodeURIComponentExcludingSubDelims,\n  uri: encodeURI,\n  uriComponent: encodeURIComponent,\n  none: function none(val) {\n    return val;\n  },\n  legacy: encodeURI\n};\nvar decodingMethods = {\n  \"default\": decodeURIComponent,\n  uri: decodeURI,\n  uriComponent: decodeURIComponent,\n  none: function none(val) {\n    return val;\n  },\n  legacy: decodeURIComponent\n};\nvar encodeParam = function encodeParam(param, encoding, isSpatParam) {\n  var encoder = encodingMethods[encoding] || encodeURIComponentExcludingSubDelims;\n\n  if (isSpatParam) {\n    return String(param).split('/').map(encoder).join('/');\n  }\n\n  return encoder(String(param));\n};\nvar decodeParam = function decodeParam(param, encoding) {\n  return (decodingMethods[encoding] || decodeURIComponent)(param);\n};\n\nvar defaultOrConstrained = function defaultOrConstrained(match) {\n  return '(' + (match ? match.replace(/(^<|>$)/g, '') : \"[a-zA-Z0-9-_.~%':|=+\\\\*@$]+\") + ')';\n};\nvar rules = [{\n  name: 'url-parameter',\n  pattern: /^:([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\n  regex: function regex(match) {\n    return new RegExp(defaultOrConstrained(match[2]));\n  }\n}, {\n  name: 'url-parameter-splat',\n  pattern: /^\\*([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/,\n  regex: /([^?]*)/\n}, {\n  name: 'url-parameter-matrix',\n  pattern: /^;([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})(<(.+?)>)?/,\n  regex: function regex(match) {\n    return new RegExp(';' + match[1] + '=' + defaultOrConstrained(match[2]));\n  }\n}, {\n  name: 'query-parameter',\n  pattern: /^(?:\\?|&)(?::)?([a-zA-Z0-9-_]*[a-zA-Z0-9]{1})/\n}, {\n  name: 'delimiter',\n  pattern: /^(\\/|\\?)/,\n  regex: function regex(match) {\n    return new RegExp('\\\\' + match[0]);\n  }\n}, {\n  name: 'sub-delimiter',\n  pattern: /^(!|&|-|_|\\.|;)/,\n  regex: function regex(match) {\n    return new RegExp(match[0]);\n  }\n}, {\n  name: 'fragment',\n  pattern: /^([0-9a-zA-Z]+)/,\n  regex: function regex(match) {\n    return new RegExp(match[0]);\n  }\n}];\n\nvar tokenise = function tokenise(str, tokens) {\n  if (tokens === void 0) {\n    tokens = [];\n  } // Look for a matching rule\n\n\n  var matched = rules.some(function (rule) {\n    var match = str.match(rule.pattern);\n\n    if (!match) {\n      return false;\n    }\n\n    tokens.push({\n      type: rule.name,\n      match: match[0],\n      val: match.slice(1, 2),\n      otherVal: match.slice(2),\n      regex: rule.regex instanceof Function ? rule.regex(match) : rule.regex\n    });\n\n    if (match[0].length < str.length) {\n      tokens = tokenise(str.substr(match[0].length), tokens);\n    }\n\n    return true;\n  }); // If no rules matched, throw an error (possible malformed path)\n\n  if (!matched) {\n    throw new Error(\"Could not parse path '\" + str + \"'\");\n  }\n\n  return tokens;\n};\n\nvar exists = function exists(val) {\n  return val !== undefined && val !== null;\n};\n\nvar optTrailingSlash = function optTrailingSlash(source, strictTrailingSlash) {\n  if (strictTrailingSlash) {\n    return source;\n  }\n\n  if (source === '\\\\/') {\n    return source;\n  }\n\n  return source.replace(/\\\\\\/$/, '') + '(?:\\\\/)?';\n};\n\nvar upToDelimiter = function upToDelimiter(source, delimiter) {\n  if (!delimiter) {\n    return source;\n  }\n\n  return /(\\/)$/.test(source) ? source : source + '(\\\\/|\\\\?|\\\\.|;|$)';\n};\n\nvar appendQueryParam = function appendQueryParam(params, param, val) {\n  if (val === void 0) {\n    val = '';\n  }\n\n  var existingVal = params[param];\n\n  if (existingVal === undefined) {\n    params[param] = val;\n  } else {\n    params[param] = Array.isArray(existingVal) ? existingVal.concat(val) : [existingVal, val];\n  }\n\n  return params;\n};\n\nvar defaultOptions = {\n  urlParamsEncoding: 'default'\n};\n\nvar Path =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function Path(path, options) {\n    if (!path) {\n      throw new Error('Missing path in Path constructor');\n    }\n\n    this.path = path;\n    this.options = __assign(__assign({}, defaultOptions), options);\n    this.tokens = tokenise(path);\n    this.hasUrlParams = this.tokens.filter(function (t) {\n      return /^url-parameter/.test(t.type);\n    }).length > 0;\n    this.hasSpatParam = this.tokens.filter(function (t) {\n      return /splat$/.test(t.type);\n    }).length > 0;\n    this.hasMatrixParams = this.tokens.filter(function (t) {\n      return /matrix$/.test(t.type);\n    }).length > 0;\n    this.hasQueryParams = this.tokens.filter(function (t) {\n      return /^query-parameter/.test(t.type);\n    }).length > 0; // Extract named parameters from tokens\n\n    this.spatParams = this.getParams('url-parameter-splat');\n    this.urlParams = this.getParams(/^url-parameter/); // Query params\n\n    this.queryParams = this.getParams('query-parameter'); // All params\n\n    this.params = this.urlParams.concat(this.queryParams); // Check if hasQueryParams\n    // Regular expressions for url part only (full and partial match)\n\n    this.source = this.tokens.filter(function (t) {\n      return t.regex !== undefined;\n    }).map(function (t) {\n      return t.regex.source;\n    }).join('');\n  }\n\n  Path.createPath = function (path, options) {\n    return new Path(path, options);\n  };\n\n  Path.prototype.isQueryParam = function (name) {\n    return this.queryParams.indexOf(name) !== -1;\n  };\n\n  Path.prototype.isSpatParam = function (name) {\n    return this.spatParams.indexOf(name) !== -1;\n  };\n\n  Path.prototype.test = function (path, opts) {\n    var _this = this;\n\n    var options = __assign(__assign({\n      caseSensitive: false,\n      strictTrailingSlash: false\n    }, this.options), opts); // trailingSlash: falsy => non optional, truthy => optional\n\n\n    var source = optTrailingSlash(this.source, options.strictTrailingSlash); // Check if exact match\n\n    var match = this.urlTest(path, source + (this.hasQueryParams ? '(\\\\?.*$|$)' : '$'), options.caseSensitive, options.urlParamsEncoding); // If no match, or no query params, no need to go further\n\n    if (!match || !this.hasQueryParams) {\n      return match;\n    } // Extract query params\n\n\n    var queryParams = parse(path, options.queryParams);\n    var unexpectedQueryParams = Object.keys(queryParams).filter(function (p) {\n      return !_this.isQueryParam(p);\n    });\n\n    if (unexpectedQueryParams.length === 0) {\n      // Extend url match\n      Object.keys(queryParams).forEach( // @ts-ignore\n      function (p) {\n        return match[p] = queryParams[p];\n      });\n      return match;\n    }\n\n    return null;\n  };\n\n  Path.prototype.partialTest = function (path, opts) {\n    var _this = this;\n\n    var options = __assign(__assign({\n      caseSensitive: false,\n      delimited: true\n    }, this.options), opts); // Check if partial match (start of given path matches regex)\n    // trailingSlash: falsy => non optional, truthy => optional\n\n\n    var source = upToDelimiter(this.source, options.delimited);\n    var match = this.urlTest(path, source, options.caseSensitive, options.urlParamsEncoding);\n\n    if (!match) {\n      return match;\n    }\n\n    if (!this.hasQueryParams) {\n      return match;\n    }\n\n    var queryParams = parse(path, options.queryParams);\n    Object.keys(queryParams).filter(function (p) {\n      return _this.isQueryParam(p);\n    }).forEach(function (p) {\n      return appendQueryParam(match, p, queryParams[p]);\n    });\n    return match;\n  };\n\n  Path.prototype.build = function (params, opts) {\n    var _this = this;\n\n    if (params === void 0) {\n      params = {};\n    }\n\n    var options = __assign(__assign({\n      ignoreConstraints: false,\n      ignoreSearch: false,\n      queryParams: {}\n    }, this.options), opts);\n\n    var encodedUrlParams = Object.keys(params).filter(function (p) {\n      return !_this.isQueryParam(p);\n    }).reduce(function (acc, key) {\n      if (!exists(params[key])) {\n        return acc;\n      }\n\n      var val = params[key];\n\n      var isSpatParam = _this.isSpatParam(key);\n\n      if (typeof val === 'boolean') {\n        acc[key] = val;\n      } else if (Array.isArray(val)) {\n        acc[key] = val.map(function (v) {\n          return encodeParam(v, options.urlParamsEncoding, isSpatParam);\n        });\n      } else {\n        acc[key] = encodeParam(val, options.urlParamsEncoding, isSpatParam);\n      }\n\n      return acc;\n    }, {}); // Check all params are provided (not search parameters which are optional)\n\n    if (this.urlParams.some(function (p) {\n      return !exists(params[p]);\n    })) {\n      var missingParameters = this.urlParams.filter(function (p) {\n        return !exists(params[p]);\n      });\n      throw new Error(\"Cannot build path: '\" + this.path + \"' requires missing parameters { \" + missingParameters.join(', ') + ' }');\n    } // Check constraints\n\n\n    if (!options.ignoreConstraints) {\n      var constraintsPassed = this.tokens.filter(function (t) {\n        return /^url-parameter/.test(t.type) && !/-splat$/.test(t.type);\n      }).every(function (t) {\n        return new RegExp('^' + defaultOrConstrained(t.otherVal[0]) + '$').test(encodedUrlParams[t.val]);\n      });\n\n      if (!constraintsPassed) {\n        throw new Error(\"Some parameters of '\" + this.path + \"' are of invalid format\");\n      }\n    }\n\n    var base = this.tokens.filter(function (t) {\n      return /^query-parameter/.test(t.type) === false;\n    }).map(function (t) {\n      if (t.type === 'url-parameter-matrix') {\n        return \";\" + t.val + \"=\" + encodedUrlParams[t.val[0]];\n      }\n\n      return /^url-parameter/.test(t.type) ? encodedUrlParams[t.val[0]] : t.match;\n    }).join('');\n\n    if (options.ignoreSearch) {\n      return base;\n    }\n\n    var searchParams = this.queryParams.filter(function (p) {\n      return Object.keys(params).indexOf(p) !== -1;\n    }).reduce(function (sparams, paramName) {\n      sparams[paramName] = params[paramName];\n      return sparams;\n    }, {});\n    var searchPart = build(searchParams, options.queryParams);\n    return searchPart ? base + '?' + searchPart : base;\n  };\n\n  Path.prototype.getParams = function (type) {\n    var predicate = type instanceof RegExp ? function (t) {\n      return type.test(t.type);\n    } : function (t) {\n      return t.type === type;\n    };\n    return this.tokens.filter(predicate).map(function (t) {\n      return t.val[0];\n    });\n  };\n\n  Path.prototype.urlTest = function (path, source, caseSensitive, urlParamsEncoding) {\n    var _this = this;\n\n    var regex = new RegExp('^' + source, caseSensitive ? '' : 'i');\n    var match = path.match(regex);\n\n    if (!match) {\n      return null;\n    } else if (!this.urlParams.length) {\n      return {};\n    } // Reduce named params to key-value pairs\n\n\n    return match.slice(1, this.urlParams.length + 1).reduce(function (params, m, i) {\n      params[_this.urlParams[i]] = decodeParam(m, urlParamsEncoding);\n      return params;\n    }, {});\n  };\n\n  return Path;\n}();\n\nexport { Path };\n//# sourceMappingURL=path-parser.esm.js.map\n","import { __assign } from 'tslib';\nimport { Path } from 'path-parser';\nimport { build, omit, parse } from 'search-params';\n\nvar getMetaFromSegments = function getMetaFromSegments(segments) {\n  var accName = '';\n  return segments.reduce(function (meta, segment) {\n    var _a, _b, _c, _d;\n\n    var urlParams = (_b = (_a = segment.parser) === null || _a === void 0 ? void 0 : _a.urlParams.reduce(function (params, p) {\n      params[p] = 'url';\n      return params;\n    }, {}), _b !== null && _b !== void 0 ? _b : {});\n    var allParams = (_d = (_c = segment.parser) === null || _c === void 0 ? void 0 : _c.queryParams.reduce(function (params, p) {\n      params[p] = 'query';\n      return params;\n    }, urlParams), _d !== null && _d !== void 0 ? _d : {});\n\n    if (segment.name !== undefined) {\n      accName = accName ? accName + '.' + segment.name : segment.name;\n      meta[accName] = allParams;\n    }\n\n    return meta;\n  }, {});\n};\nvar buildStateFromMatch = function buildStateFromMatch(match) {\n  if (!match || !match.segments || !match.segments.length) {\n    return null;\n  }\n\n  var name = match.segments.map(function (segment) {\n    return segment.name;\n  }).filter(function (name) {\n    return name;\n  }).join('.');\n  var params = match.params;\n  return {\n    name: name,\n    params: params,\n    meta: getMetaFromSegments(match.segments)\n  };\n};\nvar buildPathFromSegments = function buildPathFromSegments(segments, params, options) {\n  if (params === void 0) {\n    params = {};\n  }\n\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _a = options.queryParamsMode,\n      queryParamsMode = _a === void 0 ? 'default' : _a,\n      _b = options.trailingSlashMode,\n      trailingSlashMode = _b === void 0 ? 'default' : _b;\n  var searchParams = [];\n  var nonSearchParams = [];\n\n  for (var _i = 0, segments_1 = segments; _i < segments_1.length; _i++) {\n    var segment = segments_1[_i];\n    var parser = segment.parser;\n\n    if (parser) {\n      searchParams.push.apply(searchParams, parser.queryParams);\n      nonSearchParams.push.apply(nonSearchParams, parser.urlParams);\n      nonSearchParams.push.apply(nonSearchParams, parser.spatParams);\n    }\n  }\n\n  if (queryParamsMode === 'loose') {\n    var extraParams = Object.keys(params).reduce(function (acc, p) {\n      return searchParams.indexOf(p) === -1 && nonSearchParams.indexOf(p) === -1 ? acc.concat(p) : acc;\n    }, []);\n    searchParams.push.apply(searchParams, extraParams);\n  }\n\n  var searchParamsObject = searchParams.reduce(function (acc, paramName) {\n    if (Object.keys(params).indexOf(paramName) !== -1) {\n      acc[paramName] = params[paramName];\n    }\n\n    return acc;\n  }, {});\n  var searchPart = build(searchParamsObject, options.queryParams);\n  var path = segments.reduce(function (path, segment) {\n    var _a, _b;\n\n    var segmentPath = (_b = (_a = segment.parser) === null || _a === void 0 ? void 0 : _a.build(params, {\n      ignoreSearch: true,\n      queryParams: options.queryParams,\n      urlParamsEncoding: options.urlParamsEncoding\n    }), _b !== null && _b !== void 0 ? _b : '');\n    return segment.absolute ? segmentPath : path + segmentPath;\n  }, '') // remove repeated slashes\n  .replace(/\\/\\/{1,}/g, '/');\n  var finalPath = path;\n\n  if (trailingSlashMode === 'always') {\n    finalPath = /\\/$/.test(path) ? path : path + \"/\";\n  } else if (trailingSlashMode === 'never' && path !== '/') {\n    finalPath = /\\/$/.test(path) ? path.slice(0, -1) : path;\n  }\n\n  return finalPath + (searchPart ? '?' + searchPart : '');\n};\nvar getPathFromSegments = function getPathFromSegments(segments) {\n  return segments ? segments.map(function (segment) {\n    return segment.path;\n  }).join('') : null;\n};\n\nvar getPath = function getPath(path) {\n  return path.split('?')[0];\n};\n\nvar getSearch = function getSearch(path) {\n  return path.split('?')[1] || '';\n};\n\nvar matchChildren = function matchChildren(nodes, pathSegment, currentMatch, options, consumedBefore) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _a = options.queryParamsMode,\n      queryParamsMode = _a === void 0 ? 'default' : _a,\n      _b = options.strictTrailingSlash,\n      strictTrailingSlash = _b === void 0 ? false : _b,\n      _c = options.strongMatching,\n      strongMatching = _c === void 0 ? true : _c,\n      _d = options.caseSensitive,\n      caseSensitive = _d === void 0 ? false : _d;\n  var isRoot = nodes.length === 1 && nodes[0].name === '';\n\n  var _loop_1 = function _loop_1(child) {\n    // Partially match path\n    var match = null;\n    var remainingPath = void 0;\n    var segment = pathSegment;\n\n    if (consumedBefore === '/' && child.path === '/') {\n      // when we encounter repeating slashes we add the slash\n      // back to the URL to make it de facto pathless\n      segment = '/' + pathSegment;\n    }\n\n    if (!child.children.length) {\n      match = child.parser.test(segment, {\n        caseSensitive: caseSensitive,\n        strictTrailingSlash: strictTrailingSlash,\n        queryParams: options.queryParams,\n        urlParamsEncoding: options.urlParamsEncoding\n      });\n    }\n\n    if (!match) {\n      match = child.parser.partialTest(segment, {\n        delimited: strongMatching,\n        caseSensitive: caseSensitive,\n        queryParams: options.queryParams,\n        urlParamsEncoding: options.urlParamsEncoding\n      });\n    }\n\n    if (match) {\n      // Remove consumed segment from path\n      var consumedPath = child.parser.build(match, {\n        ignoreSearch: true,\n        urlParamsEncoding: options.urlParamsEncoding\n      });\n\n      if (!strictTrailingSlash && !child.children.length) {\n        consumedPath = consumedPath.replace(/\\/$/, '');\n      } // Can't create a regexp from the path because it might contain a\n      // regexp character.\n\n\n      if (segment.toLowerCase().indexOf(consumedPath.toLowerCase()) === 0) {\n        remainingPath = segment.slice(consumedPath.length);\n      } else {\n        remainingPath = segment;\n      }\n\n      if (!strictTrailingSlash && !child.children.length) {\n        remainingPath = remainingPath.replace(/^\\/\\?/, '?');\n      }\n\n      var querystring = omit(getSearch(segment.replace(consumedPath, '')), child.parser.queryParams, options.queryParams).querystring;\n      remainingPath = getPath(remainingPath) + (querystring ? \"?\" + querystring : '');\n\n      if (!strictTrailingSlash && !isRoot && remainingPath === '/' && !/\\/$/.test(consumedPath)) {\n        remainingPath = '';\n      }\n\n      currentMatch.segments.push(child);\n      Object.keys(match).forEach(function (param) {\n        return currentMatch.params[param] = match[param];\n      });\n\n      if (!isRoot && !remainingPath.length) {\n        return {\n          value: currentMatch\n        };\n      }\n\n      if (!isRoot && queryParamsMode !== 'strict' && remainingPath.indexOf('?') === 0) {\n        // unmatched queryParams in non strict mode\n        var remainingQueryParams_1 = parse(remainingPath.slice(1), options.queryParams);\n        Object.keys(remainingQueryParams_1).forEach(function (name) {\n          return currentMatch.params[name] = remainingQueryParams_1[name];\n        });\n        return {\n          value: currentMatch\n        };\n      } // Continue matching on non absolute children\n\n\n      var children = child.getNonAbsoluteChildren(); // If no children to match against but unmatched path left\n\n      if (!children.length) {\n        return {\n          value: null\n        };\n      }\n\n      return {\n        value: matchChildren(children, remainingPath, currentMatch, options, consumedPath)\n      };\n    }\n  }; // for (child of node.children) {\n\n\n  for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n    var child = nodes_1[_i];\n\n    var state_1 = _loop_1(child);\n\n    if (typeof state_1 === \"object\") return state_1.value;\n  }\n\n  return null;\n};\n\nfunction sortChildren(children) {\n  var originalChildren = children.slice(0);\n  return children.sort(sortPredicate(originalChildren));\n}\n\nvar sortPredicate = function sortPredicate(originalChildren) {\n  return function (left, right) {\n    var _a, _b, _c, _d, _e, _f;\n\n    var leftPath = left.path.replace(/<.*?>/g, '').split('?')[0].replace(/(.+)\\/$/, '$1');\n    var rightPath = right.path.replace(/<.*?>/g, '').split('?')[0].replace(/(.+)\\/$/, '$1'); // '/' last\n\n    if (leftPath === '/') {\n      return 1;\n    }\n\n    if (rightPath === '/') {\n      return -1;\n    } // Spat params last\n\n\n    if ((_a = left.parser) === null || _a === void 0 ? void 0 : _a.hasSpatParam) {\n      return 1;\n    }\n\n    if ((_b = right.parser) === null || _b === void 0 ? void 0 : _b.hasSpatParam) {\n      return -1;\n    } // No spat, number of segments (less segments last)\n\n\n    var leftSegments = (leftPath.match(/\\//g) || []).length;\n    var rightSegments = (rightPath.match(/\\//g) || []).length;\n\n    if (leftSegments < rightSegments) {\n      return 1;\n    }\n\n    if (leftSegments > rightSegments) {\n      return -1;\n    } // Same number of segments, number of URL params ascending\n\n\n    var leftParamsCount = (_d = (_c = left.parser) === null || _c === void 0 ? void 0 : _c.urlParams.length, _d !== null && _d !== void 0 ? _d : 0);\n    var rightParamsCount = (_f = (_e = right.parser) === null || _e === void 0 ? void 0 : _e.urlParams.length, _f !== null && _f !== void 0 ? _f : 0);\n\n    if (leftParamsCount < rightParamsCount) {\n      return -1;\n    }\n\n    if (leftParamsCount > rightParamsCount) {\n      return 1;\n    } // Same number of segments and params, last segment length descending\n\n\n    var leftParamLength = (leftPath.split('/').slice(-1)[0] || '').length;\n    var rightParamLength = (rightPath.split('/').slice(-1)[0] || '').length;\n\n    if (leftParamLength < rightParamLength) {\n      return 1;\n    }\n\n    if (leftParamLength > rightParamLength) {\n      return -1;\n    } // Same last segment length, preserve definition order. Note that we\n    // cannot just return 0, as sort is not guaranteed to be a stable sort.\n\n\n    return originalChildren.indexOf(left) - originalChildren.indexOf(right);\n  };\n};\n\nvar RouteNode =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function RouteNode(name, path, childRoutes, options) {\n    if (name === void 0) {\n      name = '';\n    }\n\n    if (path === void 0) {\n      path = '';\n    }\n\n    if (childRoutes === void 0) {\n      childRoutes = [];\n    }\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.name = name;\n    this.absolute = /^~/.test(path);\n    this.path = this.absolute ? path.slice(1) : path;\n    this.parser = this.path ? new Path(this.path) : null;\n    this.children = [];\n    this.parent = options.parent;\n    this.checkParents();\n    this.add(childRoutes, options.onAdd, options.finalSort ? false : options.sort !== false);\n\n    if (options.finalSort) {\n      this.sortDescendants();\n    }\n\n    return this;\n  }\n\n  RouteNode.prototype.getParentSegments = function (segments) {\n    if (segments === void 0) {\n      segments = [];\n    }\n\n    return this.parent && this.parent.parser ? this.parent.getParentSegments(segments.concat(this.parent)) : segments.reverse();\n  };\n\n  RouteNode.prototype.setParent = function (parent) {\n    this.parent = parent;\n    this.checkParents();\n  };\n\n  RouteNode.prototype.setPath = function (path) {\n    if (path === void 0) {\n      path = '';\n    }\n\n    this.path = path;\n    this.parser = path ? new Path(path) : null;\n  };\n\n  RouteNode.prototype.add = function (route, cb, sort) {\n    var _this = this;\n\n    if (sort === void 0) {\n      sort = true;\n    }\n\n    if (route === undefined || route === null) {\n      return this;\n    }\n\n    if (route instanceof Array) {\n      route.forEach(function (r) {\n        return _this.add(r, cb, sort);\n      });\n      return this;\n    }\n\n    if (!(route instanceof RouteNode) && !(route instanceof Object)) {\n      throw new Error('RouteNode.add() expects routes to be an Object or an instance of RouteNode.');\n    } else if (route instanceof RouteNode) {\n      route.setParent(this);\n      this.addRouteNode(route, sort);\n    } else {\n      if (!route.name || !route.path) {\n        throw new Error('RouteNode.add() expects routes to have a name and a path defined.');\n      }\n\n      var routeNode = new RouteNode(route.name, route.path, route.children, {\n        finalSort: false,\n        onAdd: cb,\n        parent: this,\n        sort: sort\n      });\n      var fullName = routeNode.getParentSegments([routeNode]).map(function (_) {\n        return _.name;\n      }).join('.');\n\n      if (cb) {\n        cb(__assign(__assign({}, route), {\n          name: fullName\n        }));\n      }\n\n      this.addRouteNode(routeNode, sort);\n    }\n\n    return this;\n  };\n\n  RouteNode.prototype.addNode = function (name, path) {\n    this.add(new RouteNode(name, path));\n    return this;\n  };\n\n  RouteNode.prototype.getPath = function (routeName) {\n    var segmentsByName = this.getSegmentsByName(routeName);\n    return segmentsByName ? getPathFromSegments(segmentsByName) : null;\n  };\n\n  RouteNode.prototype.getNonAbsoluteChildren = function () {\n    return this.children.filter(function (child) {\n      return !child.absolute;\n    });\n  };\n\n  RouteNode.prototype.sortChildren = function () {\n    if (this.children.length) {\n      sortChildren(this.children);\n    }\n  };\n\n  RouteNode.prototype.sortDescendants = function () {\n    this.sortChildren();\n    this.children.forEach(function (child) {\n      return child.sortDescendants();\n    });\n  };\n\n  RouteNode.prototype.buildPath = function (routeName, params, options) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var segments = this.getSegmentsByName(routeName);\n\n    if (!segments) {\n      throw new Error(\"[route-node][buildPath] '{routeName}' is not defined\");\n    }\n\n    return buildPathFromSegments(segments, params, options);\n  };\n\n  RouteNode.prototype.buildState = function (name, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    var segments = this.getSegmentsByName(name);\n\n    if (!segments || !segments.length) {\n      return null;\n    }\n\n    return {\n      name: name,\n      params: params,\n      meta: getMetaFromSegments(segments)\n    };\n  };\n\n  RouteNode.prototype.matchPath = function (path, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (path === '' && !options.strictTrailingSlash) {\n      path = '/';\n    }\n\n    var match = this.getSegmentsMatchingPath(path, options);\n\n    if (!match) {\n      return null;\n    }\n\n    var matchedSegments = match.segments;\n\n    if (matchedSegments[0].absolute) {\n      var firstSegmentParams = matchedSegments[0].getParentSegments();\n      matchedSegments.reverse();\n      matchedSegments.push.apply(matchedSegments, firstSegmentParams);\n      matchedSegments.reverse();\n    }\n\n    var lastSegment = matchedSegments[matchedSegments.length - 1];\n    var lastSegmentSlashChild = lastSegment.findSlashChild();\n\n    if (lastSegmentSlashChild) {\n      matchedSegments.push(lastSegmentSlashChild);\n    }\n\n    return buildStateFromMatch(match);\n  };\n\n  RouteNode.prototype.addRouteNode = function (route, sort) {\n    if (sort === void 0) {\n      sort = true;\n    }\n\n    var names = route.name.split('.');\n\n    if (names.length === 1) {\n      // Check duplicated routes\n      if (this.children.map(function (child) {\n        return child.name;\n      }).indexOf(route.name) !== -1) {\n        throw new Error(\"Alias \\\"\" + route.name + \"\\\" is already defined in route node\");\n      } // Check duplicated paths\n\n\n      if (this.children.map(function (child) {\n        return child.path;\n      }).indexOf(route.path) !== -1) {\n        throw new Error(\"Path \\\"\" + route.path + \"\\\" is already defined in route node\");\n      }\n\n      this.children.push(route);\n\n      if (sort) {\n        this.sortChildren();\n      }\n    } else {\n      // Locate parent node\n      var segments = this.getSegmentsByName(names.slice(0, -1).join('.'));\n\n      if (segments) {\n        route.name = names[names.length - 1];\n        segments[segments.length - 1].add(route);\n      } else {\n        throw new Error(\"Could not add route named '\" + route.name + \"', parent is missing.\");\n      }\n    }\n\n    return this;\n  };\n\n  RouteNode.prototype.checkParents = function () {\n    if (this.absolute && this.hasParentsParams()) {\n      throw new Error('[RouteNode] A RouteNode with an abolute path cannot have parents with route parameters');\n    }\n  };\n\n  RouteNode.prototype.hasParentsParams = function () {\n    if (this.parent && this.parent.parser) {\n      var parser = this.parent.parser;\n      var hasParams = parser.hasUrlParams || parser.hasSpatParam || parser.hasMatrixParams || parser.hasQueryParams;\n      return hasParams || this.parent.hasParentsParams();\n    }\n\n    return false;\n  };\n\n  RouteNode.prototype.findAbsoluteChildren = function () {\n    return this.children.reduce(function (absoluteChildren, child) {\n      return absoluteChildren.concat(child.absolute ? child : []).concat(child.findAbsoluteChildren());\n    }, []);\n  };\n\n  RouteNode.prototype.findSlashChild = function () {\n    var slashChildren = this.getNonAbsoluteChildren().filter(function (child) {\n      return child.parser && /^\\/(\\?|$)/.test(child.parser.path);\n    });\n    return slashChildren[0];\n  };\n\n  RouteNode.prototype.getSegmentsByName = function (routeName) {\n    var findSegmentByName = function findSegmentByName(name, routes) {\n      var filteredRoutes = routes.filter(function (r) {\n        return r.name === name;\n      });\n      return filteredRoutes.length ? filteredRoutes[0] : undefined;\n    };\n\n    var segments = [];\n    var routes = this.parser ? [this] : this.children;\n    var names = (this.parser ? [''] : []).concat(routeName.split('.'));\n    var matched = names.every(function (name) {\n      var segment = findSegmentByName(name, routes);\n\n      if (segment) {\n        routes = segment.children;\n        segments.push(segment);\n        return true;\n      }\n\n      return false;\n    });\n    return matched ? segments : null;\n  };\n\n  RouteNode.prototype.getSegmentsMatchingPath = function (path, options) {\n    var topLevelNodes = this.parser ? [this] : this.children;\n    var startingNodes = topLevelNodes.reduce(function (nodes, node) {\n      return nodes.concat(node, node.findAbsoluteChildren());\n    }, []);\n    var currentMatch = {\n      segments: [],\n      params: {}\n    };\n    var finalMatch = matchChildren(startingNodes, path, currentMatch, options);\n\n    if (finalMatch && finalMatch.segments.length === 1 && finalMatch.segments[0].name === '') {\n      return null;\n    }\n\n    return finalMatch;\n  };\n\n  return RouteNode;\n}();\n\nexport { RouteNode };\n//# sourceMappingURL=route-node.esm.js.map\n","var nameToIDs = function (name) {\r\n    return name\r\n        .split('.')\r\n        .reduce(function (ids, name) {\r\n        return ids.concat(ids.length ? ids[ids.length - 1] + '.' + name : name);\r\n    }, []);\r\n};\r\nvar exists = function (val) { return val !== undefined && val !== null; };\r\nvar hasMetaParams = function (state) { return state && state.meta && state.meta.params; };\r\nvar extractSegmentParams = function (name, state) {\r\n    if (!hasMetaParams(state) || !exists(state.meta.params[name]))\r\n        return {};\r\n    return Object.keys(state.meta.params[name]).reduce(function (params, p) {\r\n        params[p] = state.params[p];\r\n        return params;\r\n    }, {});\r\n};\r\nfunction transitionPath(toState, fromState) {\r\n    var toStateOptions = (toState.meta && toState.meta && toState.meta.options) || {};\r\n    var fromStateIds = fromState ? nameToIDs(fromState.name) : [];\r\n    var toStateIds = nameToIDs(toState.name);\r\n    var maxI = Math.min(fromStateIds.length, toStateIds.length);\r\n    function pointOfDifference() {\r\n        var i;\r\n        var _loop_1 = function () {\r\n            var left = fromStateIds[i];\r\n            var right = toStateIds[i];\r\n            if (left !== right)\r\n                return { value: i };\r\n            var leftParams = extractSegmentParams(left, toState);\r\n            var rightParams = extractSegmentParams(right, fromState);\r\n            if (Object.keys(leftParams).length !==\r\n                Object.keys(rightParams).length)\r\n                return { value: i };\r\n            if (Object.keys(leftParams).length === 0)\r\n                return \"continue\";\r\n            var different = Object.keys(leftParams).some(function (p) { return rightParams[p] !== leftParams[p]; });\r\n            if (different) {\r\n                return { value: i };\r\n            }\r\n        };\r\n        for (i = 0; i < maxI; i += 1) {\r\n            var state_1 = _loop_1();\r\n            if (typeof state_1 === \"object\")\r\n                return state_1.value;\r\n        }\r\n        return i;\r\n    }\r\n    var i;\r\n    if (!fromState || toStateOptions.reload) {\r\n        i = 0;\r\n    }\r\n    else if (!hasMetaParams(fromState) && !hasMetaParams(toState)) {\r\n        i = 0;\r\n    }\r\n    else {\r\n        i = pointOfDifference();\r\n    }\r\n    var toDeactivate = fromStateIds.slice(i).reverse();\r\n    var toActivate = toStateIds.slice(i);\r\n    var intersection = fromState && i > 0 ? fromStateIds[i - 1] : '';\r\n    return {\r\n        intersection: intersection,\r\n        toDeactivate: toDeactivate,\r\n        toActivate: toActivate\r\n    };\r\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nfunction shouldUpdateNode(nodeName) {\r\n    return function (toState, fromSate) {\r\n        var _a = transitionPath(toState, fromSate), intersection = _a.intersection, toActivate = _a.toActivate, toDeactivateReversed = _a.toDeactivate;\r\n        var toDeactivate = __spreadArrays(toDeactivateReversed).reverse();\r\n        if (toState.meta.options && toState.meta.options.reload) {\r\n            return true;\r\n        }\r\n        if (nodeName === intersection) {\r\n            return true;\r\n        }\r\n        if (toActivate.indexOf(nodeName) === -1) {\r\n            return false;\r\n        }\r\n        var matching = true;\r\n        for (var i = 0; i < toActivate.length; i += 1) {\r\n            var activatedSegment = toActivate[i];\r\n            var sameLevelDeactivatedSegment = toDeactivate[i];\r\n            matching = activatedSegment === sameLevelDeactivatedSegment;\r\n            if (matching && activatedSegment === nodeName) {\r\n                return true;\r\n            }\r\n            if (!matching) {\r\n                return false;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n}\n\nexport default transitionPath;\nexport { nameToIDs, shouldUpdateNode };\n","import { RouteNode } from 'route-node';\nexport { RouteNode } from 'route-node';\nimport $$observable from 'symbol-observable';\nimport transitionPath, { nameToIDs } from 'router5-transition-path';\nexport { default as transitionPath } from 'router5-transition-path';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultOptions = {\r\n    trailingSlashMode: 'default',\r\n    queryParamsMode: 'default',\r\n    strictTrailingSlash: false,\r\n    autoCleanUp: true,\r\n    allowNotFound: false,\r\n    strongMatching: true,\r\n    rewritePathOnMatch: true,\r\n    caseSensitive: false,\r\n    urlParamsEncoding: 'default'\r\n};\r\nfunction withOptions(options) {\r\n    return function (router) {\r\n        var routerOptions = __assign(__assign({}, defaultOptions), options);\r\n        router.getOptions = function () { return routerOptions; };\r\n        router.setOption = function (option, value) {\r\n            routerOptions[option] = value;\r\n            return router;\r\n        };\r\n        return router;\r\n    };\r\n}\n\nvar errorCodes = {\r\n    ROUTER_NOT_STARTED: 'NOT_STARTED',\r\n    NO_START_PATH_OR_STATE: 'NO_START_PATH_OR_STATE',\r\n    ROUTER_ALREADY_STARTED: 'ALREADY_STARTED',\r\n    ROUTE_NOT_FOUND: 'ROUTE_NOT_FOUND',\r\n    SAME_STATES: 'SAME_STATES',\r\n    CANNOT_DEACTIVATE: 'CANNOT_DEACTIVATE',\r\n    CANNOT_ACTIVATE: 'CANNOT_ACTIVATE',\r\n    TRANSITION_ERR: 'TRANSITION_ERR',\r\n    TRANSITION_CANCELLED: 'CANCELLED'\r\n};\r\nvar constants = {\r\n    UNKNOWN_ROUTE: '@@router5/UNKNOWN_ROUTE',\r\n    ROUTER_START: '$start',\r\n    ROUTER_STOP: '$stop',\r\n    TRANSITION_START: '$$start',\r\n    TRANSITION_CANCEL: '$$cancel',\r\n    TRANSITION_SUCCESS: '$$success',\r\n    TRANSITION_ERROR: '$$error'\r\n};\n\nfunction withRoutes(routes) {\r\n    return function (router) {\r\n        router.forward = function (fromRoute, toRoute) {\r\n            router.config.forwardMap[fromRoute] = toRoute;\r\n            return router;\r\n        };\r\n        var rootNode = routes instanceof RouteNode\r\n            ? routes\r\n            : new RouteNode('', '', routes, { onAdd: onRouteAdded });\r\n        function onRouteAdded(route) {\r\n            if (route.canActivate)\r\n                router.canActivate(route.name, route.canActivate);\r\n            if (route.forwardTo)\r\n                router.forward(route.name, route.forwardTo);\r\n            if (route.decodeParams)\r\n                router.config.decoders[route.name] = route.decodeParams;\r\n            if (route.encodeParams)\r\n                router.config.encoders[route.name] = route.encodeParams;\r\n            if (route.defaultParams)\r\n                router.config.defaultParams[route.name] = route.defaultParams;\r\n        }\r\n        router.rootNode = rootNode;\r\n        router.add = function (routes, finalSort) {\r\n            rootNode.add(routes, onRouteAdded, !finalSort);\r\n            if (finalSort) {\r\n                rootNode.sortDescendants();\r\n            }\r\n            return router;\r\n        };\r\n        router.addNode = function (name, path, canActivateHandler) {\r\n            rootNode.addNode(name, path);\r\n            if (canActivateHandler)\r\n                router.canActivate(name, canActivateHandler);\r\n            return router;\r\n        };\r\n        router.isActive = function (name, params, strictEquality, ignoreQueryParams) {\r\n            if (params === void 0) { params = {}; }\r\n            if (strictEquality === void 0) { strictEquality = false; }\r\n            if (ignoreQueryParams === void 0) { ignoreQueryParams = true; }\r\n            var activeState = router.getState();\r\n            if (!activeState)\r\n                return false;\r\n            if (strictEquality || activeState.name === name) {\r\n                return router.areStatesEqual(router.makeState(name, params), activeState, ignoreQueryParams);\r\n            }\r\n            return router.areStatesDescendants(router.makeState(name, params), activeState);\r\n        };\r\n        router.buildPath = function (route, params) {\r\n            if (route === constants.UNKNOWN_ROUTE) {\r\n                return params.path;\r\n            }\r\n            var paramsWithDefault = __assign(__assign({}, router.config.defaultParams[route]), params);\r\n            var _a = router.getOptions(), trailingSlashMode = _a.trailingSlashMode, queryParamsMode = _a.queryParamsMode, queryParams = _a.queryParams;\r\n            var encodedParams = router.config.encoders[route]\r\n                ? router.config.encoders[route](paramsWithDefault)\r\n                : paramsWithDefault;\r\n            return router.rootNode.buildPath(route, encodedParams, {\r\n                trailingSlashMode: trailingSlashMode,\r\n                queryParamsMode: queryParamsMode,\r\n                queryParams: queryParams,\r\n                urlParamsEncoding: router.getOptions().urlParamsEncoding\r\n            });\r\n        };\r\n        router.matchPath = function (path, source) {\r\n            var options = router.getOptions();\r\n            var match = router.rootNode.matchPath(path, options);\r\n            if (match) {\r\n                var name_1 = match.name, params = match.params, meta = match.meta;\r\n                var decodedParams = router.config.decoders[name_1]\r\n                    ? router.config.decoders[name_1](params)\r\n                    : params;\r\n                var _a = router.forwardState(name_1, decodedParams), routeName = _a.name, routeParams = _a.params;\r\n                var builtPath = options.rewritePathOnMatch === false\r\n                    ? path\r\n                    : router.buildPath(routeName, routeParams);\r\n                return router.makeState(routeName, routeParams, builtPath, {\r\n                    params: meta,\r\n                    source: source\r\n                });\r\n            }\r\n            return null;\r\n        };\r\n        router.setRootPath = function (rootPath) {\r\n            router.rootNode.setPath(rootPath);\r\n        };\r\n        return router;\r\n    };\r\n}\n\nfunction withDependencies(dependencies) {\r\n    return function (router) {\r\n        var routerDependencies = dependencies;\r\n        router.setDependency = function (dependencyName, dependency) {\r\n            routerDependencies[dependencyName] = dependency;\r\n            return router;\r\n        };\r\n        router.setDependencies = function (deps) {\r\n            Object.keys(deps).forEach(function (name) {\r\n                return router.setDependency(name, deps[name]);\r\n            });\r\n            return router;\r\n        };\r\n        router.getDependencies = function () { return routerDependencies; };\r\n        router.getInjectables = function () { return [router, router.getDependencies()]; };\r\n        router.executeFactory = function (factoryFunction) {\r\n            return factoryFunction.apply(void 0, router.getInjectables());\r\n        };\r\n        return router;\r\n    };\r\n}\n\nfunction withState(router) {\r\n    var stateId = 0;\r\n    var routerState = null;\r\n    router.getState = function () { return routerState; };\r\n    router.setState = function (state) {\r\n        routerState = state;\r\n    };\r\n    router.makeState = function (name, params, path, meta, forceId) { return ({\r\n        name: name,\r\n        params: __assign(__assign({}, router.config.defaultParams[name]), params),\r\n        path: path,\r\n        meta: meta\r\n            ? __assign(__assign({}, meta), { id: forceId === undefined ? ++stateId : forceId }) : undefined\r\n    }); };\r\n    router.makeNotFoundState = function (path, options) {\r\n        return router.makeState(constants.UNKNOWN_ROUTE, { path: path }, path, {\r\n            options: options\r\n        });\r\n    };\r\n    router.areStatesEqual = function (state1, state2, ignoreQueryParams) {\r\n        if (ignoreQueryParams === void 0) { ignoreQueryParams = true; }\r\n        if (state1.name !== state2.name)\r\n            return false;\r\n        var getUrlParams = function (name) {\r\n            return router.rootNode\r\n                //@ts-ignore\r\n                .getSegmentsByName(name)\r\n                .map(function (segment) { return segment.parser['urlParams']; })\r\n                .reduce(function (params, p) { return params.concat(p); }, []);\r\n        };\r\n        var state1Params = ignoreQueryParams\r\n            ? getUrlParams(state1.name)\r\n            : Object.keys(state1.params);\r\n        var state2Params = ignoreQueryParams\r\n            ? getUrlParams(state2.name)\r\n            : Object.keys(state2.params);\r\n        return (state1Params.length === state2Params.length &&\r\n            state1Params.every(function (p) { return state1.params[p] === state2.params[p]; }));\r\n    };\r\n    router.areStatesDescendants = function (parentState, childState) {\r\n        var regex = new RegExp('^' + parentState.name + '\\\\.(.*)$');\r\n        if (!regex.test(childState.name))\r\n            return false;\r\n        // If child state name extends parent state name, and all parent state params\r\n        // are in child state params.\r\n        return Object.keys(parentState.params).every(function (p) { return parentState.params[p] === childState.params[p]; });\r\n    };\r\n    router.forwardState = function (routeName, routeParams) {\r\n        var name = router.config.forwardMap[routeName] || routeName;\r\n        var params = __assign(__assign(__assign({}, router.config.defaultParams[routeName]), router.config.defaultParams[name]), routeParams);\r\n        return {\r\n            name: name,\r\n            params: params\r\n        };\r\n    };\r\n    router.buildState = function (routeName, routeParams) {\r\n        var _a = router.forwardState(routeName, routeParams), name = _a.name, params = _a.params;\r\n        return router.rootNode.buildState(name, params);\r\n    };\r\n    return router;\r\n}\n\nvar eventsMap = {\r\n    onStart: constants.ROUTER_START,\r\n    onStop: constants.ROUTER_STOP,\r\n    onTransitionSuccess: constants.TRANSITION_SUCCESS,\r\n    onTransitionStart: constants.TRANSITION_START,\r\n    onTransitionError: constants.TRANSITION_ERROR,\r\n    onTransitionCancel: constants.TRANSITION_CANCEL\r\n};\r\nfunction withPlugins(router) {\r\n    var routerPlugins = [];\r\n    router.getPlugins = function () { return routerPlugins; };\r\n    router.usePlugin = function () {\r\n        var plugins = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            plugins[_i] = arguments[_i];\r\n        }\r\n        var removePluginFns = plugins.map(function (plugin) {\r\n            routerPlugins.push(plugin);\r\n            return startPlugin(plugin);\r\n        });\r\n        return function () {\r\n            routerPlugins = routerPlugins.filter(function (plugin) { return plugins.indexOf(plugin) === -1; });\r\n            removePluginFns.forEach(function (removePlugin) { return removePlugin(); });\r\n        };\r\n    };\r\n    function startPlugin(plugin) {\r\n        var appliedPlugin = router.executeFactory(plugin);\r\n        var removeEventListeners = Object.keys(eventsMap)\r\n            .map(function (methodName) {\r\n            if (appliedPlugin[methodName]) {\r\n                return router.addEventListener(eventsMap[methodName], appliedPlugin[methodName]);\r\n            }\r\n        })\r\n            .filter(Boolean);\r\n        return function () {\r\n            removeEventListeners.forEach(function (removeListener) { return removeListener(); });\r\n            if (appliedPlugin.teardown) {\r\n                appliedPlugin.teardown();\r\n            }\r\n        };\r\n    }\r\n    return router;\r\n}\n\nfunction withMiddleware(router) {\r\n    var middlewareFactories = [];\r\n    var middlewareFunctions = [];\r\n    router.useMiddleware = function () {\r\n        var middlewares = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            middlewares[_i] = arguments[_i];\r\n        }\r\n        var removePluginFns = middlewares.map(function (middleware) {\r\n            var middlewareFunction = router.executeFactory(middleware);\r\n            middlewareFactories.push(middleware);\r\n            middlewareFunctions.push(middlewareFunction);\r\n            return function () {\r\n                middlewareFactories = middlewareFactories.filter(function (m) { return m !== middleware; });\r\n                middlewareFunctions = middlewareFunctions.filter(function (m) { return m !== middlewareFunction; });\r\n            };\r\n        });\r\n        return function () { return removePluginFns.forEach(function (fn) { return fn(); }); };\r\n    };\r\n    router.clearMiddleware = function () {\r\n        middlewareFactories = [];\r\n        middlewareFunctions = [];\r\n        return router;\r\n    };\r\n    router.getMiddlewareFactories = function () { return middlewareFactories; };\r\n    router.getMiddlewareFunctions = function () { return middlewareFunctions; };\r\n    return router;\r\n}\n\nfunction withObservability(router) {\r\n    var callbacks = {};\r\n    router.invokeEventListeners = function (eventName) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        (callbacks[eventName] || []).forEach(function (cb) { return cb.apply(void 0, args); });\r\n    };\r\n    router.removeEventListener = function (eventName, cb) {\r\n        callbacks[eventName] = callbacks[eventName].filter(function (_cb) { return _cb !== cb; });\r\n    };\r\n    router.addEventListener = function (eventName, cb) {\r\n        callbacks[eventName] = (callbacks[eventName] || []).concat(cb);\r\n        return function () { return router.removeEventListener(eventName, cb); };\r\n    };\r\n    function subscribe(listener) {\r\n        var isObject = typeof listener === 'object';\r\n        var finalListener = isObject ? listener.next.bind(listener) : listener;\r\n        var unsubscribeHandler = router.addEventListener(constants.TRANSITION_SUCCESS, function (toState, fromState) {\r\n            finalListener({\r\n                route: toState,\r\n                previousRoute: fromState\r\n            });\r\n        });\r\n        return isObject\r\n            ? { unsubscribe: unsubscribeHandler }\r\n            : unsubscribeHandler;\r\n    }\r\n    function observable() {\r\n        var _a;\r\n        return _a = {\r\n                subscribe: function (observer) {\r\n                    if (typeof observer !== 'object' || observer === null) {\r\n                        throw new TypeError('Expected the observer to be an object.');\r\n                    }\r\n                    return subscribe(observer);\r\n                }\r\n            },\r\n            _a[$$observable] = function () {\r\n                return this;\r\n            },\r\n            _a;\r\n    }\r\n    router.subscribe = subscribe;\r\n    //@ts-ignore\r\n    router[$$observable] = observable;\r\n    //@ts-ignore\r\n    router['@@observable'] = observable;\r\n    return router;\r\n}\n\nfunction resolve(functions, _a, callback) {\r\n    var isCancelled = _a.isCancelled, toState = _a.toState, fromState = _a.fromState, _b = _a.errorKey, errorKey = _b === void 0 ? undefined : _b;\r\n    var remainingFunctions = Array.isArray(functions)\r\n        ? functions\r\n        : Object.keys(functions);\r\n    var isState = function (obj) {\r\n        return typeof obj === 'object' &&\r\n            obj.name !== undefined &&\r\n            obj.params !== undefined &&\r\n            obj.path !== undefined;\r\n    };\r\n    var hasStateChanged = function (toState, fromState) {\r\n        return fromState.name !== toState.name ||\r\n            fromState.params !== toState.params ||\r\n            fromState.path !== toState.path;\r\n    };\r\n    var mergeStates = function (toState, fromState) { return (__assign(__assign(__assign({}, fromState), toState), { meta: __assign(__assign({}, fromState.meta), toState.meta) })); };\r\n    var processFn = function (stepFn, errBase, state, _done) {\r\n        var done = function (err, newState) {\r\n            if (err) {\r\n                _done(err);\r\n            }\r\n            else if (newState && newState !== state && isState(newState)) {\r\n                if (hasStateChanged(newState, state)) {\r\n                    console.error('[router5][transition] Warning: state values (name, params, path) were changed during transition process.');\r\n                }\r\n                _done(null, mergeStates(newState, state));\r\n            }\r\n            else {\r\n                _done(null, state);\r\n            }\r\n        };\r\n        var res = stepFn.call(null, state, fromState, done);\r\n        if (isCancelled()) {\r\n            done(null);\r\n        }\r\n        else if (typeof res === 'boolean') {\r\n            done(res ? null : errBase);\r\n        }\r\n        else if (isState(res)) {\r\n            done(null, res);\r\n        }\r\n        else if (res && typeof res.then === 'function') {\r\n            res.then(function (resVal) {\r\n                if (resVal instanceof Error)\r\n                    done({ error: resVal }, null);\r\n                else\r\n                    done(null, resVal);\r\n            }, function (err) {\r\n                if (err instanceof Error) {\r\n                    console.error(err.stack || err);\r\n                    done(__assign(__assign({}, errBase), { promiseError: err }), null);\r\n                }\r\n                else {\r\n                    done(typeof err === 'object'\r\n                        ? __assign(__assign({}, errBase), err) : errBase, null);\r\n                }\r\n            });\r\n        }\r\n        // else: wait for done to be called\r\n    };\r\n    var next = function (err, state) {\r\n        var _a;\r\n        if (isCancelled()) {\r\n            callback();\r\n        }\r\n        else if (err) {\r\n            callback(err);\r\n        }\r\n        else {\r\n            if (!remainingFunctions.length) {\r\n                callback(null, state);\r\n            }\r\n            else {\r\n                var isMapped = typeof remainingFunctions[0] === 'string';\r\n                var errBase = errorKey && isMapped\r\n                    ? (_a = {}, _a[errorKey] = remainingFunctions[0], _a) : {};\r\n                var stepFn = isMapped\r\n                    ? functions[remainingFunctions[0]]\r\n                    : remainingFunctions[0];\r\n                remainingFunctions = remainingFunctions.slice(1);\r\n                processFn(stepFn, errBase, state, next);\r\n            }\r\n        }\r\n    };\r\n    next(null, toState);\r\n}\n\nfunction transition(router, toState, fromState, opts, callback) {\r\n    var cancelled = false;\r\n    var completed = false;\r\n    var options = router.getOptions();\r\n    var _a = router.getLifecycleFunctions(), canDeactivateFunctions = _a[0], canActivateFunctions = _a[1];\r\n    var middlewareFunctions = router.getMiddlewareFunctions();\r\n    var isCancelled = function () { return cancelled; };\r\n    var cancel = function () {\r\n        if (!cancelled && !completed) {\r\n            cancelled = true;\r\n            callback({ code: errorCodes.TRANSITION_CANCELLED }, null);\r\n        }\r\n    };\r\n    var done = function (err, state) {\r\n        completed = true;\r\n        if (isCancelled()) {\r\n            return;\r\n        }\r\n        if (!err && options.autoCleanUp) {\r\n            var activeSegments_1 = nameToIDs(toState.name);\r\n            Object.keys(canDeactivateFunctions).forEach(function (name) {\r\n                if (activeSegments_1.indexOf(name) === -1)\r\n                    router.clearCanDeactivate(name);\r\n            });\r\n        }\r\n        callback(err, state || toState);\r\n    };\r\n    var makeError = function (base, err) { return (__assign(__assign({}, base), (err instanceof Object ? err : { error: err }))); };\r\n    var isUnknownRoute = toState.name === constants.UNKNOWN_ROUTE;\r\n    var asyncBase = { isCancelled: isCancelled, toState: toState, fromState: fromState };\r\n    var _b = transitionPath(toState, fromState), toDeactivate = _b.toDeactivate, toActivate = _b.toActivate;\r\n    var canDeactivate = !fromState || opts.forceDeactivate\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            var canDeactivateFunctionMap = toDeactivate\r\n                .filter(function (name) { return canDeactivateFunctions[name]; })\r\n                .reduce(function (fnMap, name) {\r\n                var _a;\r\n                return (__assign(__assign({}, fnMap), (_a = {}, _a[name] = canDeactivateFunctions[name], _a)));\r\n            }, {});\r\n            resolve(canDeactivateFunctionMap, __assign(__assign({}, asyncBase), { errorKey: 'segment' }), function (err) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.CANNOT_DEACTIVATE }, err)\r\n                    : null);\r\n            });\r\n        };\r\n    var canActivate = isUnknownRoute\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            var canActivateFunctionMap = toActivate\r\n                .filter(function (name) { return canActivateFunctions[name]; })\r\n                .reduce(function (fnMap, name) {\r\n                var _a;\r\n                return (__assign(__assign({}, fnMap), (_a = {}, _a[name] = canActivateFunctions[name], _a)));\r\n            }, {});\r\n            resolve(canActivateFunctionMap, __assign(__assign({}, asyncBase), { errorKey: 'segment' }), function (err) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.CANNOT_ACTIVATE }, err)\r\n                    : null);\r\n            });\r\n        };\r\n    var middleware = !middlewareFunctions.length\r\n        ? []\r\n        : function (toState, fromState, cb) {\r\n            return resolve(middlewareFunctions, __assign({}, asyncBase), function (err, state) {\r\n                return cb(err\r\n                    ? makeError({ code: errorCodes.TRANSITION_ERR }, err)\r\n                    : null, state || toState);\r\n            });\r\n        };\r\n    var pipeline = []\r\n        .concat(canDeactivate)\r\n        .concat(canActivate)\r\n        .concat(middleware);\r\n    resolve(pipeline, asyncBase, done);\r\n    return cancel;\r\n}\n\nvar noop = function () { };\r\nfunction withNavigation(router) {\r\n    var cancelCurrentTransition;\r\n    router.navigate = navigate;\r\n    router.navigate = navigate;\r\n    router.navigateToDefault = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var opts = typeof args[0] === 'object' ? args[0] : {};\r\n        var done = args.length === 2\r\n            ? args[1]\r\n            : typeof args[0] === 'function'\r\n                ? args[0]\r\n                : noop;\r\n        var options = router.getOptions();\r\n        if (options.defaultRoute) {\r\n            return navigate(options.defaultRoute, options.defaultParams, opts, done);\r\n        }\r\n        return function () { };\r\n    };\r\n    router.cancel = function () {\r\n        if (cancelCurrentTransition) {\r\n            cancelCurrentTransition('navigate');\r\n            cancelCurrentTransition = null;\r\n        }\r\n        return router;\r\n    };\r\n    function navigate() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var name = args[0];\r\n        var lastArg = args[args.length - 1];\r\n        var done = typeof lastArg === 'function' ? lastArg : noop;\r\n        var params = typeof args[1] === 'object' ? args[1] : {};\r\n        var opts = typeof args[2] === 'object' ? args[2] : {};\r\n        if (!router.isStarted()) {\r\n            done({ code: errorCodes.ROUTER_NOT_STARTED });\r\n            return;\r\n        }\r\n        var route = router.buildState(name, params);\r\n        if (!route) {\r\n            var err = { code: errorCodes.ROUTE_NOT_FOUND };\r\n            done(err);\r\n            router.invokeEventListeners(constants.TRANSITION_ERROR, null, router.getState(), err);\r\n            return;\r\n        }\r\n        var toState = router.makeState(route.name, route.params, router.buildPath(route.name, route.params), { params: route.meta, options: opts });\r\n        var sameStates = router.getState()\r\n            ? router.areStatesEqual(router.getState(), toState, false)\r\n            : false;\r\n        // Do not proceed further if states are the same and no reload\r\n        // (no deactivation and no callbacks)\r\n        if (sameStates && !opts.reload && !opts.force) {\r\n            var err = { code: errorCodes.SAME_STATES };\r\n            done(err);\r\n            router.invokeEventListeners(constants.TRANSITION_ERROR, toState, router.getState(), err);\r\n            return;\r\n        }\r\n        var fromState = router.getState();\r\n        if (opts.skipTransition) {\r\n            done(null, toState);\r\n            return noop;\r\n        }\r\n        // Transition\r\n        return router.transitionToState(toState, fromState, opts, function (err, state) {\r\n            if (err) {\r\n                if (err.redirect) {\r\n                    var _a = err.redirect, name_1 = _a.name, params_1 = _a.params;\r\n                    navigate(name_1, params_1, __assign(__assign({}, opts), { force: true, redirected: true }), done);\r\n                }\r\n                else {\r\n                    done(err);\r\n                }\r\n            }\r\n            else {\r\n                router.invokeEventListeners(constants.TRANSITION_SUCCESS, state, fromState, opts);\r\n                done(null, state);\r\n            }\r\n        });\r\n    }\r\n    router.transitionToState = function (toState, fromState, options, done) {\r\n        if (options === void 0) { options = {}; }\r\n        if (done === void 0) { done = noop; }\r\n        router.cancel();\r\n        router.invokeEventListeners(constants.TRANSITION_START, toState, fromState);\r\n        cancelCurrentTransition = transition(router, toState, fromState, options, function (err, state) {\r\n            cancelCurrentTransition = null;\r\n            state = state || toState;\r\n            if (err) {\r\n                if (err.code === errorCodes.TRANSITION_CANCELLED) {\r\n                    router.invokeEventListeners(constants.TRANSITION_CANCEL, toState, fromState);\r\n                }\r\n                else {\r\n                    router.invokeEventListeners(constants.TRANSITION_ERROR, toState, fromState, err);\r\n                }\r\n                done(err);\r\n            }\r\n            else {\r\n                router.setState(state);\r\n                done(null, state);\r\n            }\r\n        });\r\n        return cancelCurrentTransition;\r\n    };\r\n    return router;\r\n}\n\nvar noop$1 = function () { };\r\nfunction withRouterLifecycle(router) {\r\n    var started = false;\r\n    router.isStarted = function () { return started; };\r\n    //@ts-ignore\r\n    router.start = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        var options = router.getOptions();\r\n        var lastArg = args[args.length - 1];\r\n        var done = typeof lastArg === 'function' ? lastArg : noop$1;\r\n        var startPathOrState = typeof args[0] !== 'function' ? args[0] : undefined;\r\n        if (started) {\r\n            done({ code: errorCodes.ROUTER_ALREADY_STARTED });\r\n            return router;\r\n        }\r\n        var startPath, startState;\r\n        started = true;\r\n        router.invokeEventListeners(constants.ROUTER_START);\r\n        // callback\r\n        var cb = function (err, state, invokeErrCb) {\r\n            if (invokeErrCb === void 0) { invokeErrCb = true; }\r\n            if (!err)\r\n                router.invokeEventListeners(constants.TRANSITION_SUCCESS, state, null, { replace: true });\r\n            if (err && invokeErrCb)\r\n                router.invokeEventListeners(constants.TRANSITION_ERROR, state, null, err);\r\n            done(err, state);\r\n        };\r\n        if (startPathOrState === undefined && !options.defaultRoute) {\r\n            return cb({ code: errorCodes.NO_START_PATH_OR_STATE });\r\n        }\r\n        if (typeof startPathOrState === 'string') {\r\n            startPath = startPathOrState;\r\n        }\r\n        else if (typeof startPathOrState === 'object') {\r\n            startState = startPathOrState;\r\n        }\r\n        if (!startState) {\r\n            // If no supplied start state, get start state\r\n            startState =\r\n                startPath === undefined ? null : router.matchPath(startPath);\r\n            // Navigate to default function\r\n            var navigateToDefault_1 = function () {\r\n                return router.navigateToDefault({ replace: true }, done);\r\n            };\r\n            var redirect_1 = function (route) {\r\n                return router.navigate(route.name, route.params, { replace: true, reload: true, redirected: true }, done);\r\n            };\r\n            var transitionToState = function (state) {\r\n                router.transitionToState(state, router.getState(), {}, function (err, state) {\r\n                    if (!err)\r\n                        cb(null, state);\r\n                    else if (err.redirect)\r\n                        redirect_1(err.redirect);\r\n                    else if (options.defaultRoute)\r\n                        navigateToDefault_1();\r\n                    else\r\n                        cb(err, null, false);\r\n                });\r\n            };\r\n            // If matched start path\r\n            if (startState) {\r\n                transitionToState(startState);\r\n            }\r\n            else if (options.defaultRoute) {\r\n                // If default, navigate to default\r\n                navigateToDefault_1();\r\n            }\r\n            else if (options.allowNotFound) {\r\n                transitionToState(router.makeNotFoundState(startPath, { replace: true }));\r\n            }\r\n            else {\r\n                // No start match, no default => do nothing\r\n                cb({ code: errorCodes.ROUTE_NOT_FOUND, path: startPath }, null);\r\n            }\r\n        }\r\n        else {\r\n            // Initialise router with provided start state\r\n            router.setState(startState);\r\n            cb(null, startState);\r\n        }\r\n        return router;\r\n    };\r\n    router.stop = function () {\r\n        if (started) {\r\n            router.setState(null);\r\n            started = false;\r\n            router.invokeEventListeners(constants.ROUTER_STOP);\r\n        }\r\n        return router;\r\n    };\r\n    return router;\r\n}\n\nvar toFunction = function (val) { return (typeof val === 'function' ? val : function () { return function () { return val; }; }); };\r\nfunction withRouteLifecycle(router) {\r\n    var canDeactivateFactories = {};\r\n    var canActivateFactories = {};\r\n    var canDeactivateFunctions = {};\r\n    var canActivateFunctions = {};\r\n    router.getLifecycleFactories = function () {\r\n        return [canDeactivateFactories, canActivateFactories];\r\n    };\r\n    router.getLifecycleFunctions = function () {\r\n        return [canDeactivateFunctions, canActivateFunctions];\r\n    };\r\n    router.canDeactivate = function (name, canDeactivateHandler) {\r\n        var factory = toFunction(canDeactivateHandler);\r\n        canDeactivateFactories[name] = factory;\r\n        canDeactivateFunctions[name] = router.executeFactory(factory);\r\n        return router;\r\n    };\r\n    router.clearCanDeactivate = function (name) {\r\n        canDeactivateFactories[name] = undefined;\r\n        canDeactivateFunctions[name] = undefined;\r\n        return router;\r\n    };\r\n    router.canActivate = function (name, canActivateHandler) {\r\n        var factory = toFunction(canActivateHandler);\r\n        canActivateFactories[name] = factory;\r\n        canActivateFunctions[name] = router.executeFactory(factory);\r\n        return router;\r\n    };\r\n    return router;\r\n}\n\nvar pipe = function () {\r\n    var fns = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        fns[_i] = arguments[_i];\r\n    }\r\n    return function (arg) {\r\n        return fns.reduce(function (prev, fn) { return fn(prev); }, arg);\r\n    };\r\n};\r\nvar createRouter = function (routes, options, dependencies) {\r\n    if (routes === void 0) { routes = []; }\r\n    if (options === void 0) { options = {}; }\r\n    if (dependencies === void 0) { dependencies = {}; }\r\n    var config = {\r\n        decoders: {},\r\n        encoders: {},\r\n        defaultParams: {},\r\n        forwardMap: {}\r\n    };\r\n    return pipe(withOptions(options), withDependencies(dependencies), withObservability, withState, withRouterLifecycle, withRouteLifecycle, withNavigation, withPlugins, withMiddleware, withRoutes(routes))({ config: config });\r\n};\n\nfunction cloneRouter(router, dependencies) {\r\n    var clonedRouter = createRouter(router.rootNode, router.getOptions(), dependencies);\r\n    clonedRouter.useMiddleware.apply(clonedRouter, router.getMiddlewareFactories());\r\n    clonedRouter.usePlugin.apply(clonedRouter, router.getPlugins());\r\n    clonedRouter.config = router.config;\r\n    var _a = router.getLifecycleFactories(), canDeactivateFactories = _a[0], canActivateFactories = _a[1];\r\n    Object.keys(canDeactivateFactories).forEach(function (name) {\r\n        return clonedRouter.canDeactivate(name, canDeactivateFactories[name]);\r\n    });\r\n    Object.keys(canActivateFactories).forEach(function (name) {\r\n        return clonedRouter.canActivate(name, canActivateFactories[name]);\r\n    });\r\n    return clonedRouter;\r\n}\n\nexport default createRouter;\nexport { cloneRouter, constants, createRouter, errorCodes };\n","import { errorCodes, constants } from 'router5';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\n\nvar value = function (arg) { return function () { return arg; }; };\r\nvar noop = function () { };\r\nvar isBrowser = typeof window !== 'undefined' && window.history;\r\nvar getBase = function () { return window.location.pathname; };\r\nvar supportsPopStateOnHashChange = function () {\r\n    return window.navigator.userAgent.indexOf('Trident') === -1;\r\n};\r\nvar pushState = function (state, title, path) {\r\n    return window.history.pushState(state, title, path);\r\n};\r\nvar replaceState = function (state, title, path) {\r\n    return window.history.replaceState(state, title, path);\r\n};\r\nvar addPopstateListener = function (fn, opts) {\r\n    var shouldAddHashChangeListener = opts.useHash && !supportsPopStateOnHashChange();\r\n    window.addEventListener('popstate', fn);\r\n    if (shouldAddHashChangeListener) {\r\n        window.addEventListener('hashchange', fn);\r\n    }\r\n    return function () {\r\n        window.removeEventListener('popstate', fn);\r\n        if (shouldAddHashChangeListener) {\r\n            window.removeEventListener('hashchange', fn);\r\n        }\r\n    };\r\n};\r\nvar getLocation = function (opts) {\r\n    var path = opts.useHash\r\n        ? window.location.hash.replace(new RegExp('^#' + opts.hashPrefix), '')\r\n        : window.location.pathname.replace(new RegExp('^' + opts.base), '');\r\n    // Fix issue with browsers that don't URL encode characters (Edge)\r\n    var correctedPath = safelyEncodePath(path);\r\n    return (correctedPath || '/') + window.location.search;\r\n};\r\nvar safelyEncodePath = function (path) {\r\n    try {\r\n        return encodeURI(decodeURI(path));\r\n    }\r\n    catch (_) {\r\n        return path;\r\n    }\r\n};\r\nvar getState = function () { return window.history.state; };\r\nvar getHash = function () { return window.location.hash; };\r\nvar browser = {};\r\nif (isBrowser) {\r\n    browser = {\r\n        getBase: getBase,\r\n        pushState: pushState,\r\n        replaceState: replaceState,\r\n        addPopstateListener: addPopstateListener,\r\n        getLocation: getLocation,\r\n        getState: getState,\r\n        getHash: getHash\r\n    };\r\n}\r\nelse {\r\n    browser = {\r\n        getBase: value(''),\r\n        pushState: noop,\r\n        replaceState: noop,\r\n        addPopstateListener: noop,\r\n        getLocation: value(''),\r\n        getState: value(null),\r\n        getHash: value('')\r\n    };\r\n}\r\nvar safeBrowser = browser;\n\nvar defaultOptions = {\r\n    forceDeactivate: true,\r\n    useHash: false,\r\n    hashPrefix: '',\r\n    base: '',\r\n    mergeState: false,\r\n    preserveHash: true\r\n};\r\nvar source = 'popstate';\r\nfunction browserPluginFactory(opts, browser) {\r\n    if (browser === void 0) { browser = safeBrowser; }\r\n    var options = __assign(__assign({}, defaultOptions), opts);\r\n    var transitionOptions = {\r\n        forceDeactivate: options.forceDeactivate,\r\n        source: source\r\n    };\r\n    var removePopStateListener;\r\n    return function browserPlugin(router) {\r\n        var routerOptions = router.getOptions();\r\n        var routerStart = router.start;\r\n        router.buildUrl = function (route, params) {\r\n            var base = options.base || '';\r\n            var prefix = options.useHash ? \"#\" + options.hashPrefix : '';\r\n            var path = router.buildPath(route, params);\r\n            return base + prefix + path;\r\n        };\r\n        var urlToPath = function (url) {\r\n            var match = url.match(/^(?:http|https):\\/\\/(?:[0-9a-z_\\-.:]+?)(?=\\/)(.*)$/);\r\n            var path = match ? match[1] : url;\r\n            var pathParts = path.match(/^(.+?)(#.+?)?(\\?.+)?$/);\r\n            if (!pathParts)\r\n                throw new Error(\"[router5] Could not parse url \" + url);\r\n            var pathname = pathParts[1];\r\n            var hash = pathParts[2] || '';\r\n            var search = pathParts[3] || '';\r\n            return ((options.useHash\r\n                ? hash.replace(new RegExp('^#' + options.hashPrefix), '')\r\n                : options.base\r\n                    ? pathname.replace(new RegExp('^' + options.base), '')\r\n                    : pathname) + search);\r\n        };\r\n        router.matchUrl = function (url) { return router.matchPath(urlToPath(url)); };\r\n        router.start = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            if (args.length === 0 || typeof args[0] === 'function') {\r\n                routerStart.apply(void 0, __spreadArrays([browser.getLocation(options)], args));\r\n            }\r\n            else {\r\n                routerStart.apply(void 0, args);\r\n            }\r\n            return router;\r\n        };\r\n        router.replaceHistoryState = function (name, params, title) {\r\n            if (params === void 0) { params = {}; }\r\n            if (title === void 0) { title = ''; }\r\n            var route = router.buildState(name, params);\r\n            var state = router.makeState(route.name, route.params, router.buildPath(route.name, route.params), { params: route.meta });\r\n            var url = router.buildUrl(name, params);\r\n            router.lastKnownState = state;\r\n            browser.replaceState(state, title, url);\r\n        };\r\n        function updateBrowserState(state, url, replace) {\r\n            var trimmedState = state\r\n                ? {\r\n                    meta: state.meta,\r\n                    name: state.name,\r\n                    params: state.params,\r\n                    path: state.path\r\n                }\r\n                : state;\r\n            var finalState = options.mergeState === true\r\n                ? __assign(__assign({}, browser.getState()), trimmedState) : trimmedState;\r\n            if (replace)\r\n                browser.replaceState(finalState, '', url);\r\n            else\r\n                browser.pushState(finalState, '', url);\r\n        }\r\n        function onPopState(evt) {\r\n            var routerState = router.getState();\r\n            // Do nothing if no state or if last know state is poped state (it should never happen)\r\n            var newState = !evt.state || !evt.state.name;\r\n            var state = newState\r\n                ? router.matchPath(browser.getLocation(options), source)\r\n                : router.makeState(evt.state.name, evt.state.params, evt.state.path, __assign(__assign({}, evt.state.meta), { source: source }), evt.state.meta.id);\r\n            var defaultRoute = routerOptions.defaultRoute, defaultParams = routerOptions.defaultParams;\r\n            if (!state) {\r\n                // If current state is already the default route, we will have a double entry\r\n                // Navigating back and forth will emit SAME_STATES error\r\n                defaultRoute &&\r\n                    router.navigateToDefault(__assign(__assign({}, transitionOptions), { reload: true, replace: true }));\r\n                return;\r\n            }\r\n            if (routerState &&\r\n                router.areStatesEqual(state, routerState, false)) {\r\n                return;\r\n            }\r\n            router.transitionToState(state, routerState, transitionOptions, function (err, toState) {\r\n                if (err) {\r\n                    if (err.redirect) {\r\n                        var _a = err.redirect, name_1 = _a.name, params = _a.params;\r\n                        router.navigate(name_1, params, __assign(__assign({}, transitionOptions), { replace: true, force: true, redirected: true }));\r\n                    }\r\n                    else if (err.code === errorCodes.CANNOT_DEACTIVATE) {\r\n                        var url = router.buildUrl(routerState.name, routerState.params);\r\n                        if (!newState) {\r\n                            // Keep history state unchanged but use current URL\r\n                            updateBrowserState(state, url, true);\r\n                        }\r\n                        // else do nothing or history will be messed up\r\n                        // TODO: history.back()?\r\n                    }\r\n                    else {\r\n                        // Force navigation to default state\r\n                        defaultRoute &&\r\n                            router.navigate(defaultRoute, defaultParams, __assign(__assign({}, transitionOptions), { reload: true, replace: true }));\r\n                    }\r\n                }\r\n                else {\r\n                    router.invokeEventListeners(constants.TRANSITION_SUCCESS, toState, routerState, { replace: true });\r\n                }\r\n            });\r\n        }\r\n        function onStart() {\r\n            if (options.useHash && !options.base) {\r\n                // Guess base\r\n                options.base = browser.getBase();\r\n            }\r\n            removePopStateListener = browser.addPopstateListener(onPopState, options);\r\n        }\r\n        function teardown() {\r\n            if (removePopStateListener) {\r\n                removePopStateListener();\r\n                removePopStateListener = undefined;\r\n            }\r\n        }\r\n        function onTransitionSuccess(toState, fromState, opts) {\r\n            var historyState = browser.getState();\r\n            var hasState = historyState &&\r\n                historyState.meta &&\r\n                historyState.name &&\r\n                historyState.params;\r\n            var statesAreEqual = fromState && router.areStatesEqual(fromState, toState, false);\r\n            var replace = opts.replace || !hasState || statesAreEqual;\r\n            var url = router.buildUrl(toState.name, toState.params);\r\n            if (fromState === null &&\r\n                options.useHash === false &&\r\n                options.preserveHash === true) {\r\n                url += browser.getHash();\r\n            }\r\n            updateBrowserState(toState, url, replace);\r\n        }\r\n        return {\r\n            onStart: onStart,\r\n            onStop: teardown,\r\n            teardown: teardown,\r\n            onTransitionSuccess: onTransitionSuccess,\r\n            onPopState: onPopState\r\n        };\r\n    };\r\n}\n\nexport default browserPluginFactory;\n","import createRouter from \"router5\";\nimport browserPlugin from \"router5-plugin-browser\";\n\nconst routerOptions = {\n  useHash: true,\n  hashPrefix: \"!\"\n};\n\nexport const setupRouter = ({ routes, setContent }) => {\n\n  const { name: defaultRoute } = routes[0];\n  const router = createRouter(routes, {\n    defaultRoute\n  });\n\n  router.usePlugin(browserPlugin(routerOptions));\n\n  router.subscribe(({ route }) => {\n    const routeData = routes.find(({ path }) => path === route.path);\n    if (routeData) {\n      const { component } = routeData;\n      setContent({ content: component, route, router });\n    }\n  });\n\n  router.start();\n};\n","import m from \"mithril\";\nimport { cast } from \"cyano\";\nimport { createApp } from \"tests-cyano-shared/app/createApp\";\n\nconst mountNode = document.querySelector(\"#root\");\n\nconst setContent = ({ AppLayout, ...props }) => {\n  m.mount(mountNode, {\n    view: () =>\n      m(AppLayout, props)\n  });\n};\n\ncreateApp({\n  setContent,\n  cast,\n});\n","import AppLayout from \"./AppLayout\";\nimport Layout from \"./Layout\";\nimport Navigation from \"./Navigation\";\nimport { createRoutes } from \"./routes\";\nimport { setupRouter } from \"./router\";\n\nexport const createApp = ({ setContent, cast }) => {\n  const { examples, tests } = createRoutes(cast);\n  const routes = examples.concat(tests);\n\n  setupRouter({\n    routes,\n    setContent: ({ content, route, router }) => setContent({\n      AppLayout,\n      Layout,\n      Navigation,\n      routes,\n      examples,\n      tests,\n      content,\n      route,\n      router,\n    })\n  });\n};\n"],"sourceRoot":""}