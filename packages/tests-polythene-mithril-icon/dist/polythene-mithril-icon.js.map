{"version":3,"file":"polythene-mithril-icon.js","sources":["../../tests-polythene-core-svg/dist/polythene-core-svg.mjs","../../tests-polythene-core-icon/dist/polythene-core-icon.mjs","../src/index.js"],"sourcesContent":["import { useState, useEffect, getDom, a, h } from 'cyano';\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n/**\n * Reducer helper function.\n * @param {object} acc \n * @param {string} p \n * @returns {object}\n */\n\n\nvar r = function r(acc, p) {\n  return acc[p] = 1, acc;\n};\n/**\n * List of default attributes.\n * Separately handled:\n * - class\n * - element\n * @type Array<string> defaultAttrs\n */\n\n\nvar defaultAttrs = [// Universal\n\"key\", \"style\", \"href\", \"id\", // React\n\"tabIndex\", // Mithril\n\"tabindex\", \"oninit\", \"oncreate\", \"onupdate\", \"onbeforeremove\", \"onremove\", \"onbeforeupdate\"];\n/**\n * \n * @param {{[s: string]: string}} attrs \n * @param {object} [modifications] \n * @param {Array<string>} [modifications.add]\n * @param {Array<string>} [modifications.remove]\n * @returns {object}\n */\n\nvar filterSupportedAttributes = function filterSupportedAttributes(attrs) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      add = _ref.add,\n      remove = _ref.remove;\n  /**\n   * @type {{[s: string]: string}} removeLookup \n   */\n\n\n  var removeLookup = remove ? remove.reduce(r, {}) : {};\n  /**\n   * @type {Array<string>} attrsList \n   */\n\n  var attrsList = add ? defaultAttrs.concat(add) : defaultAttrs;\n  var supported = attrsList.filter(function (item) {\n    return !removeLookup[item];\n  }).reduce(r, {});\n  return Object.keys(attrs).reduce(\n  /**\n   * @param {object} acc\n   * @param {string} key\n   */\n  function (acc, key) {\n    return supported[key] ? acc[key] = attrs[key] : null, acc;\n  }, {});\n};\n\nvar isClient = typeof document !== \"undefined\";\nvar isServer = !isClient; // @ts-check\n\nvar isTouch = isServer ? false : \"ontouchstart\" in document.documentElement;\nvar pointerEndEvent = isTouch ? [\"click\", \"mouseup\"] : [\"mouseup\"];\n\nif (isClient) {\n  var htmlElement = document.querySelector(\"html\");\n\n  if (htmlElement) {\n    htmlElement.classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n  }\n} // @ts-check\n\n/**\n * @type {{[s: string]: Array<function>}} listeners\n */\n\n\nvar listeners = {};\n/**\n * \n * @param {string} eventName \n * @param {object} event \n */\n\n\nvar emit = function emit(eventName, event) {\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  listeners[eventName].forEach(function (listener) {\n    return listener(event);\n  });\n};\n\nif (isClient) {\n  window.addEventListener(\"resize\", function (e) {\n    return emit(\"resize\", e);\n  });\n  window.addEventListener(\"scroll\", function (e) {\n    return emit(\"scroll\", e);\n  });\n  window.addEventListener(\"keydown\", function (e) {\n    return emit(\"keydown\", e);\n  });\n  pointerEndEvent.forEach(function (eventName) {\n    return window.addEventListener(eventName, function (e) {\n      return emit(eventName, e);\n    });\n  });\n}\n\nvar classes = {\n  component: \"pe-svg\"\n};\n\nconst _SVG = props => {\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        domElement = _useState2[0],\n        setDomElement = _useState2[1];\n\n  useEffect(() => {\n    if (!domElement) return; // Prevent that SVG gets keyboard focus\n\n    const elem = domElement.querySelector(\"svg\");\n\n    if (elem) {\n      elem.setAttribute(\"focusable\", \"false\");\n    }\n  }, [domElement]);\n  const componentProps = Object.assign({}, filterSupportedAttributes(props), getDom(dom => dom && !domElement && setDomElement(dom)), props.testId && {\n    \"data-test-id\": props.testId\n  }, {\n    className: [classes.component, props.tone === \"dark\" ? \"pe-dark-tone\" : null, props.tone === \"light\" ? \"pe-light-tone\" : null, props.className || props[a.class]].join(\" \")\n  });\n  const content = props.content ? props.content : props.children || props;\n  return h(props.element || \"div\", componentProps, content);\n};\n\nexport default _SVG;\n","import _SVG from 'polythene-core-svg';\nimport { cast, a, h } from 'cyano';\n\n/**\n * Reducer helper function.\n * @param {object} acc \n * @param {string} p \n * @returns {object}\n */\n\n\nvar r = function r(acc, p) {\n  return acc[p] = 1, acc;\n};\n/**\n * List of default attributes.\n * Separately handled:\n * - class\n * - element\n * @type Array<string> defaultAttrs\n */\n\n\nvar defaultAttrs = [// Universal\n\"key\", \"style\", \"href\", \"id\", // React\n\"tabIndex\", // Mithril\n\"tabindex\", \"oninit\", \"oncreate\", \"onupdate\", \"onbeforeremove\", \"onremove\", \"onbeforeupdate\"];\n/**\n * \n * @param {{[s: string]: string}} attrs \n * @param {object} [modifications] \n * @param {Array<string>} [modifications.add]\n * @param {Array<string>} [modifications.remove]\n * @returns {object}\n */\n\nvar filterSupportedAttributes = function filterSupportedAttributes(attrs) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      add = _ref.add,\n      remove = _ref.remove;\n  /**\n   * @type {{[s: string]: string}} removeLookup \n   */\n\n\n  var removeLookup = remove ? remove.reduce(r, {}) : {};\n  /**\n   * @type {Array<string>} attrsList \n   */\n\n  var attrsList = add ? defaultAttrs.concat(add) : defaultAttrs;\n  var supported = attrsList.filter(function (item) {\n    return !removeLookup[item];\n  }).reduce(r, {});\n  return Object.keys(attrs).reduce(\n  /**\n   * @param {object} acc\n   * @param {string} key\n   */\n  function (acc, key) {\n    return supported[key] ? acc[key] = attrs[key] : null, acc;\n  }, {});\n};\n/**\n * \n * @param {{[s: string]: string}} classes \n * @returns {{[s: string]: string}}\n */\n\n\nvar sizeClasses = function sizeClasses(classes) {\n  return {\n    small: classes.small,\n    regular: classes.regular,\n    medium: classes.medium,\n    large: classes.large,\n    fab: classes.fab\n  };\n};\n/**\n * \n * @param {{[s: string]: string}} classes \n * @param {string} [size] \n * @returns {object}\n */\n\n\nvar classForSize = function classForSize(classes) {\n  var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"regular\";\n  return sizeClasses(classes)[size];\n};\n\nvar isClient = typeof document !== \"undefined\";\nvar isServer = !isClient; // @ts-check\n\nvar isTouch = isServer ? false : \"ontouchstart\" in document.documentElement;\nvar pointerEndEvent = isTouch ? [\"click\", \"mouseup\"] : [\"mouseup\"];\n\nif (isClient) {\n  var htmlElement = document.querySelector(\"html\");\n\n  if (htmlElement) {\n    htmlElement.classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n  }\n} // @ts-check\n\n/**\n * @type {{[s: string]: Array<function>}} listeners\n */\n\n\nvar listeners = {};\n/**\n * \n * @param {string} eventName \n * @param {object} event \n */\n\n\nvar emit = function emit(eventName, event) {\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  listeners[eventName].forEach(function (listener) {\n    return listener(event);\n  });\n};\n\nif (isClient) {\n  window.addEventListener(\"resize\", function (e) {\n    return emit(\"resize\", e);\n  });\n  window.addEventListener(\"scroll\", function (e) {\n    return emit(\"scroll\", e);\n  });\n  window.addEventListener(\"keydown\", function (e) {\n    return emit(\"keydown\", e);\n  });\n  pointerEndEvent.forEach(function (eventName) {\n    return window.addEventListener(eventName, function (e) {\n      return emit(eventName, e);\n    });\n  });\n}\n\nvar classes = {\n  component: \"pe-icon\",\n  // states\n  avatar: \"pe-icon--avatar\",\n  large: \"pe-icon--large\",\n  medium: \"pe-icon--medium\",\n  regular: \"pe-icon--regular\",\n  small: \"pe-icon--small\"\n};\n\nconst SVG = cast(_SVG);\n\nconst _Icon = props => {\n  const componentProps = Object.assign({}, filterSupportedAttributes(props), props.testId && {\n    \"data-test-id\": props.testId\n  }, {\n    className: [classes.component, classForSize(classes, props.size), props.avatar ? classes.avatar : null, props.tone === \"dark\" ? \"pe-dark-tone\" : null, props.tone === \"light\" ? \"pe-light-tone\" : null, props.className || props[a.class]].join(\" \")\n  }, props.events);\n  const content = props.content ? props.content : props.svg ? h(SVG, props.svg) : props.src ? h(\"img\", {\n    src: props.src\n  }) : props.children;\n  return h(props.element || \"div\", componentProps, content);\n};\n\nexport default _Icon;\n","import _Icon from \"polythene-core-icon\";\nimport { cast } from \"cyano\";\n\nexport default cast(_Icon);\n"],"names":["_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","_iterableToArrayLimit","TypeError","_nonIterableRest","r","acc","p","defaultAttrs","isClient","document","isTouch","documentElement","pointerEndEvent","htmlElement","querySelector","classList","add","listeners","emit","eventName","event","forEach","listener","window","addEventListener","e","classes","component","classForSize","size","arguments","small","regular","medium","large","fab","sizeClasses","avatar","SVG","cast","props","_useState2","useState","domElement","setDomElement","useEffect","elem","setAttribute","componentProps","Object","assign","attrs","_ref","remove","removeLookup","reduce","supported","concat","filter","item","keys","key","filterSupportedAttributes","getDom","dom","testId","className","tone","a","class","join","content","children","h","element","events","svg","src"],"mappings":"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"}